import"./Scaffold-D_ifbLkl.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as n,e as s,a as o,i as c,b as d,t as u,f as h,n as f,c as y}from"./app-DeJr7fNP.js";import{L as g}from"./LoadingIcon-8dx7WYGr.js";import{_ as k,a as w}from"./InputLabel-C2gVT93H.js";import{r as I}from"./PhoneIcon-CdiwYJQQ.js";function V(t,e){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.25 9.75v-4.5m0 4.5h4.5m-4.5 0l6-6m-3 18c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 014.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 00-.38 1.21 12.035 12.035 0 007.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 011.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 01-2.25 2.25h-2.25z"})])}const E={props:["phone","for","verified","type","phoneVerify","phoneError","phoneVerifyError","disable","disableEdit","activeButtonText","admin"],emits:["update:phone","update:phoneVerify","update:verified"],data(){return{loading:!1,timer:60,oldPhone:null}},components:{PhoneArrowDownLeftIcon:V,LoadingIcon:g,PhoneIcon:I,InputLabel:k,InputError:w},watch:{},computed:{isDisabled:function(){return this.disable!=null?this.disable:this.loading||this.timer<60&&this.timer>0||this.phone==this.oldPhone}},created(){},mounted(){this.$nextTick(()=>{this.oldPhone=this.phone})},methods:{sendVerificationCode(t){this.loading=!0,window.axios.post(route("sms.send.verification"),{phone:t,type:this.type||"verification",table:this.for}).then(e=>{e.data&&e.data.message&&this.showToast("success",e.data.message),this.startTimer()}).catch(e=>{console.log(e),e=this.getErrors(e),this.showToast("danger",e)}).finally(()=>{this.loading=!1})},startTimer(){this.timer=60;const t=setInterval((function(){this.timer--,this.timer<=0&&(clearInterval(t),this.timer=60)}).bind(this),1e3)}}},P={class:"grid grid-cols-1 text-start gap-2"},L={key:0,class:"flex items-center"},D={key:0,class:"text-danger text-xs mx-1"},B={key:1,class:"text-success text-xs mx-1"},C={class:"relative mb-2 flex flex-wrap items-stretch"},T={class:"flex bg-gray-100 text-gray-500 items-center whitespace-nowrap rounded-s border border-e-0 border-solid border-neutral-300 text-center text-base font-normal leading-[1.6] dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200",id:"basic-addon1"},z={class:"p-3"},A=["value","disabled"],N=["disabled"],j={key:1,class:"text-white"},F={key:2,class:"text-white"},M={key:0},S={class:"relative mb-2 mt-2 flex flex-wrap items-stretch"},q={class:"flex bg-gray-100 text-gray-500 items-center whitespace-nowrap rounded-s border border-e-0 border-solid border-neutral-300 text-center text-base font-normal leading-[1.6] dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200",id:"basic-addon1"},G={class:"p-3"},H=["value"];function J(t,e,r,K,i,l){const m=c("InputLabel"),b=c("PhoneIcon"),_=c("LoadingIcon"),p=c("InputError"),x=c("PhoneArrowDownLeftIcon");return n(),s("div",P,[o("div",null,[d(m,{class:"mt-2",for:"phone",value:t.__("phone")},null,8,["value"]),r.disableEdit?h("",!0):(n(),s("div",L,[r.verified==0?(n(),s("span",D,"("+u(t.__("not_verified"))+")",1)):r.verified==1?(n(),s("span",B,"("+u(t.__("verified"))+")",1)):h("",!0)])),o("div",C,[o("span",T,[o("div",z,[d(b,{class:"h-5 w-5"})])]),o("input",{value:r.phone,disabled:r.disableEdit,class:f([{"opacity-50":r.disableEdit},"flex-auto rounded-0 border border-solid border-neutral-300 px-3 text-neutral-700 transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:focus:border-primary"]),onInput:e[0]||(e[0]=a=>{t.$emit("update:phone",a.target.value)}),onVisibility:e[1]||(e[1]=a=>t.$el.type="text"),ref:"input_phone"},null,42,A),o("span",{onClick:e[2]||(e[2]=a=>!l.isDisabled&&i.timer==60?l.sendVerificationCode(r.phone):null),class:f(["flex cursor-pointer hover:bg-primary-400 bg-primary-500 items-center whitespace-nowrap rounded-e border border-s-0 border-solid border-neutral-300 px-3 py-[0.25rem] focus:border-primary text-center text-base font-normal leading-[1.6] text-neutral-700 dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200",{"opacity-25":l.isDisabled}]),disabled:l.isDisabled},[i.loading?(n(),y(_,{key:0,class:"w-4 h-4 mx-3"})):h("",!0),i.timer<60&&i.timer>0?(n(),s("span",j,u(i.timer),1)):(n(),s("span",F,u(r.activeButtonText||t.__("activation")),1))],10,N)]),d(p,{class:"mt-1",message:r.phoneError},null,8,["message"])]),!l.isDisabled||i.timer<60?(n(),s("div",M,[d(m,{class:"",for:"phone_verify",value:t.__("phone_verify")},null,8,["value"]),o("div",S,[o("span",q,[o("div",G,[d(x,{class:"h-5 w-5"})])]),o("input",{value:r.phoneVerify,id:"phone_verify",onInput:e[3]||(e[3]=a=>t.$emit("update:phoneVerify",a.target.value)),class:"flex-auto rounded-e border border-solid border-neutral-300 px-3 text-neutral-700 transition duration-200 ease-in-out focus:z-[3] focus:border-primary-500 focus:text-neutral-700 dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:focus:border-primary",onVisibility:e[4]||(e[4]=a=>t.$el.type="text"),ref:"input_phone_verify"},null,40,H)]),d(p,{class:"mt-1",message:r.phoneVerifyError},null,8,["message"])])):h("",!0)])}const Y=v(E,[["render",J]]);export{Y as P};
