import"./Scaffold-D_ifbLkl.js";import{P as I,a as C}from"./Panel-rs2tkraC.js";import{T as S,Z as $,j as P,i,o as l,c as g,w as m,a as o,t as a,b as n,l as f,n as c,e as _,f as d,p as T}from"./app-DeJr7fNP.js";import{_ as D}from"./Checkbox-BWgqGgzP.js";import"./GuestLayout-B84nh8OP.js";import{_ as B,a as U}from"./InputLabel-C2gVT93H.js";import{_ as F}from"./PrimaryButton-Fk5jf8Nh.js";import{_ as A}from"./TextInput-BUWn7uYR.js";import{R as E}from"./RadioGroup-F_Tqn1wR.js";import{L}from"./LoadingIcon-8dx7WYGr.js";import{P as M}from"./Popover-BaS0lwjX.js";import{T as j}from"./Tooltip-CSg56dN2.js";import{_ as O}from"./TagInput-3zOTNi0B.js";import{I as X}from"./ImageUploader-v1nOBbO9.js";import{S as N}from"./Selector-NdNaM2dQ.js";import{P as V}from"./ProvinceCounty-Bztk6mkC.js";import{P as z}from"./PhoneFields-Dp_fguC6.js";import{S as H}from"./SocialFields-hQVy6EEa.js";import{T as R}from"./TextEditor-7zAQTOol.js";import{U as q}from"./UserSelector-D8GJCG_Y.js";import{A as G}from"./AddressSelector-BkUCPfBb.js";import{C as Q}from"./CitySelector-BCnZf9JU.js";import{P as Z}from"./ProductSelector-Fbd4wGgI.js";import{O as J}from"./OrderSelector-C8nGUsaL.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as W}from"./ShoppingBagIcon-zIu7FSuq.js";import{r as Y}from"./Footer-BYUJXMx0.js";import{r as rr}from"./Alert-CDDSmLjy.js";import{r as er}from"./EyeIcon-DI71KuzS.js";import{r as or}from"./FolderPlusIcon-oBdmLyEF.js";import{r as tr}from"./Bars2Icon-DNQAv7Yb.js";import{r as sr}from"./ChatBubbleBottomCenterTextIcon-CovOeJqa.js";import{r as ir}from"./QuestionMarkCircleIcon-jeUFMgsk.js";import{r as nr}from"./Squares2X2Icon-Dviu76Pe.js";import{r as ar}from"./SignalIcon-C7ONQsBK.js";import{r as lr}from"./PencilIcon-BtrTq_9n.js";import{r as mr}from"./CartItemButton-BUsVs_zz.js";import{r as cr}from"./ClockIcon-ByUjxpap.js";import{r as dr}from"./TrashIcon-BFmLih4l.js";import{r as pr}from"./PlusIcon-NsBgz0vi.js";import"./ApplicationLogo-CV6pwTdm.js";import"./WrenchScrewdriverIcon-DQFoZ8JW.js";import"./XMarkIcon-CEnCPALs.js";import"./PhoneIcon-CdiwYJQQ.js";import"./LinkIcon-ClPrNMD5.js";import"./MinusIcon-B-7x8Y4K.js";import"./Pagination-VNHzEPuv.js";import"./ChevronRightIcon-9GRJ1f_S.js";import"./MagnifyingGlassIcon--KPgqpVy.js";import"./geosearch.module--3h6cvjB.js";import"./SearchInput-CiaqlZI_.js";import"./MapPinIcon-DUvwgUpM.js";import"./MapIcon-CJ5EAjl4.js";import"./ChevronUpIcon-DGI4GkYP.js";const fr={data(){return{orderFrom:[this.__("internal"),this.__("external")],form:S({agency_id:this.$page.props.agency.id,driver_id:null,car_id:null,ordersData:[],orders:[]})}},components:{AddressSelector:G,UserSelector:q,ImageUploader:X,LoadingIcon:L,Head:$,Link:P,HomeIcon:W,ChevronDownIcon:Y,Panel:I,InputLabel:B,TextInput:A,InputError:U,PrimaryButton:F,RadioGroup:E,UserIcon:rr,EyeIcon:er,Checkbox:D,Popover:M,Tooltip:j,FolderPlusIcon:or,Bars2Icon:tr,ChatBubbleBottomCenterTextIcon:sr,TagInput:O,QuestionMarkCircleIcon:ir,Selector:N,Squares2X2Icon:nr,ProvinceCounty:V,PhoneFields:z,SocialFields:H,SignalIcon:ar,TextEditor:R,PencilIcon:lr,XMarkIcon:mr,CitySelector:Q,CurrencyDollarIcon:C,ClockIcon:cr,ProductSelector:Z,TrashIcon:dr,PlusIcon:pr,OrderSelector:J},mounted(){},watch:{form(r,s){}},methods:{updateAddress(r){r=r||{},this.$nextTick(()=>{this.form.from_address=r.address,this.form.from_province_id=r.province_id,this.form.from_county_id=r.county_id,this.form.from_district_id=r.district_id,this.form.from_lat=r.lat,this.form.from_lon=r.lon,this.form.from_location=r.lat&&r.lon?`${r.lat},${r.lon}`:null,this.form.from_postal_code=this.f2e(r.postal_code),this.form.from_fullname=r.receiver_fullname,this.form.from_phone=r.receiver_phone,this.$refs.addressSelector.preload(r)})},submit(){this.form.clearErrors(),this.form.orders=this.myMap(this.form.ordersData,r=>({id:r.id,type:r.type,from_agency_id:r.from_agency_id,status:r.status})),this.form.post(route("admin.panel.shipping.create"),{preserveScroll:!1,onSuccess:r=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:r=>{}})}}},_r={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},hr={class:"text-2xl font-semibold"},ur={class:"px-2 md:px-4"},gr={class:"mx-auto md:max-w-2xl lg:max-w-max mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},yr={class:"flex flex-col mx-2 col-span-2 w-full px-2"},br={class:"my-2"},vr={class:"grow"},xr=["onClick"],kr={class:"my-2"},wr={class:"grow"},Ir=["onClick"],Cr={class:"my-2"},Sr={key:0,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},$r={class:"animate-bounce"},Pr={class:"mt-4"},Tr={class:"text-lg"};function Dr(r,s,Br,Ur,t,p){const y=i("FolderPlusIcon"),h=i("XMarkIcon"),u=i("UserSelector"),b=i("OrderSelector"),v=i("LoadingIcon"),x=i("PrimaryButton"),k=i("Panel");return l(),g(k,null,{header:m(()=>[o("title",null,a(r.__("new_shipping")),1)]),content:m(()=>[o("div",_r,[n(y,{class:"h-7 w-7 mx-3"}),o("h1",hr,a(r.__("new_shipping")),1)]),o("div",ur,[o("div",gr,[o("div",yr,[o("form",{onSubmit:s[3]||(s[3]=f((...e)=>p.submit&&p.submit(...e),["prevent"]))},[o("div",br,[n(u,{colsData:["fullname","phone","agency"],labelsData:["name","phone","agency"],callback:{level:r.getAgency,agency:e=>`${e.name||""} (${e.id||""})`},error:t.form.errors.driver_id,link:r.route("admin.panel.shipping.driver.search"),label:r.__("driver"),id:"driver",selected:t.form.driver_id,"onUpdate:selected":s[0]||(s[0]=e=>t.form.driver_id=e),preload:null},{selector:m(e=>[o("div",{class:c([(e.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[o("div",vr,a(e.selectedText??r.__("select")),1),e.selectedText?(l(),_("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(w=>e.clear(),["stop"])},[n(h,{class:"w-5 h-5"})],8,xr)):d("",!0)],2)]),_:1},8,["callback","error","link","label","selected"])]),o("div",kr,[n(u,{colsData:["name","agency"],labelsData:["name","agency"],callback:{level:r.getAgency,agency:e=>`${e.name||""} (${e.id||""})`},error:t.form.errors.car_id,link:r.route("admin.panel.shipping.car.search"),label:r.__("car"),id:"car",selected:t.form.car_id,"onUpdate:selected":s[1]||(s[1]=e=>t.form.car_id=e),preload:null},{selector:m(e=>[o("div",{class:c([(e.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[o("div",wr,a(e.selectedText??r.__("select")),1),e.selectedText?(l(),_("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(w=>e.clear(),["stop"])},[n(h,{class:"w-5 h-5"})],8,Ir)):d("",!0)],2)]),_:1},8,["callback","error","link","label","selected"])]),o("div",Cr,[n(b,{error:t.form.errors,link:r.route("admin.panel.order.merged.search")+`?agency_id=${t.form.agency_id}`,label:r.__("orders"),id:"orders",selecteds:t.form.ordersData,"onUpdate:selecteds":s[2]||(s[2]=e=>t.form.ordersData=e),preload:null},null,8,["error","link","label","selecteds"])]),t.form.progress?(l(),_("div",Sr,[o("div",{class:c(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":t.form.progress.percentage<100}]),style:T(`width: ${t.form.progress.percentage}%`)},[o("span",$r,a(t.form.progress.percentage),1)],6)])):d("",!0),o("div",Pr,[n(x,{onClick:p.submit,type:"button",class:c(["w-full flex items-center justify-center",{"opacity-25":t.form.processing}]),disabled:t.form.processing},{default:m(()=>[t.form.processing?(l(),g(v,{key:0,class:"w-4 h-4 mx-3"})):d("",!0),o("span",Tr,a(r.__("register_info")),1)]),_:1},8,["onClick","class","disabled"])])],32)])])])]),_:1})}const Fe=K(fr,[["render",Dr]]);export{Fe as default};
