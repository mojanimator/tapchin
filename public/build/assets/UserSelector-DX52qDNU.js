import{a as D}from"./InputLabel-DWU22C58.js";import{P as C,r as M}from"./Pagination-B7Lk-YHC.js";import{r as S,I as U}from"./Footer-B5OFFhHa.js";import{D as E,i as g,o,e as n,a as e,t as h,f as m,r as P,b as p,F as c,h as u,k as T,G as j,J as z,z as A,l as x,n as B}from"./app-COCv_6FM.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as G}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as L}from"./CartItemButton-ClgMcctk.js";const N={name:"UserSelector",props:["id","mode","text","preload","paginate","selected","placeholder","error","link","label","colsData","labelsData","callback"],components:{ChevronDownIcon:S,MagnifyingGlassIcon:G,Pagination:C,XMarkIcon:L,ArrowsUpDownIcon:M,Image:U,InputError:D},data(){return{params:{page:1,search:null,paginate:this.paginate||24,order_by:null,dir:"DESC",cols:this.colsData||["fullname","phone"],labels:this.colsData||["name","phone"]},Modal:null,data:[],pagination:{},loading:!1,removing:!1,uploading:!1,selectingForIndex:null,selectedText:null,selectedItem:null,errors:null}},emits:["update:selected","update:text","change"],created(){this.cols=this.colsData||["fullname","phone"],this.labels=this.labelsData||["name","phone"]},mounted(){this.callback;const t=document.getElementById(`modalUsers-${this.id}`);this.Modal=new E(t),this.getData(),this.preload&&this.preload.id&&this.selectItem(this.preload)},methods:{clear(){this.selectedItem=null,this.selectedText=null,this.$emit("update:selected",null)},selectItem(t){this.selectedItem=t.id;for(let a in this.cols)t[this.cols[a]]&&this.callback&&this.callback[this.cols[a]]&&(t[this.cols[a]]=this.callback[this.cols[a]](t[this.cols[a]]));this.selectedText=this.myMap(this.cols,a=>t[a]).filter(a=>a!=null).join(" | "),this.$emit("update:selected",this.selectedItem),this.$emit("update:text",this.selectedText),this.$emit("change",t),this.Modal.hide()},getData(){this.loading=!0,this.data=[],window.axios.get(this.link,{params:this.params},{}).then(t=>{this.data=t.data.data,delete t.data.data,this.pagination=t.data}).catch(t=>{t.response?this.errors=t.response.data:t.request?this.errors=t.request:this.errors=t.message}).finally(()=>{this.loading=!1})},paginationChanged(t){this.params.page=t.page,this.getData()}}},F={key:0,class:"text-sm text-gray-700"},X=["id"],q={"data-te-modal-dialog-ref":"",class:"pointer-events-none relative w-auto translate-y-[-50px] opacity-0 transition-all duration-300 ease-in-out p-5 md:p-10"},K={class:"min-[576px]:shadow-[0_0.5rem_1rem_rgba(#000, 0.15)] pointer-events-auto relative flex w-full flex-col rounded-md border-none bg-white bg-clip-padding text-current shadow-lg outline-none dark:bg-neutral-600"},J=A('<div class="flex flex-shrink-0 items-center justify-between rounded-t-md border-b-2 border-neutral-100 border-opacity-100 p-4 dark:border-opacity-50"><h5 class="text-xl font-medium leading-normal text-neutral-800 dark:text-neutral-200" id="exampleModalLabel"></h5><button type="button" class="box-content text-danger rounded-none border-none hover:no-underline hover:opacity-75 focus:opacity-100 focus:shadow-none focus:outline-none" data-te-modal-dismiss aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>',1),H={class:"relative flex-auto p-4","data-te-modal-body-ref":""},O={class:"px-2 flex flex-col md:px-4"},Q={class:"flex-col bg-white overflow-x-auto rounded-lg"},R={class:"flex flex-wrap items-center justify-between py-4 dark:bg-gray-800 p-4"},W={class:"flex items-center p-1"},Y={class:"relative mx-1","data-te-dropdown-ref":""},Z={type:"button",id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700"},$=e("span",{class:"sr-only"},"table actions",-1),ee={ref:"paginateMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg dark:bg-neutral-700 [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},te={class:""},ae=["onClick"],se=e("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),re={class:"relative p-1"},oe=e("label",{for:"table-search",class:"sr-only"},"Search",-1),ne={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},le=["placeholder"],ie={class:"w-full text-sm text-start text-gray-500 dark:text-gray-400"},de={class:"text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},ce={class:"text-sm text-center"},ge=["onClick"],he={class:"flex items-center justify-center"},pe={class:"px-2"},ue={class:""},be={class:"animate-pulse bg-white text-center border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},me=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})])],-1),xe=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),ye=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),fe=[me,xe,ye],_e=["onClick"],ke={key:0,class:"flex justify-center items-center px-2 py-2 text-gray-900 whitespace-nowrap dark:text-white"},ve={class:"text-sm font-semibold"},we=e("div",{class:"font-normal text-gray-500"},null,-1),Ie={key:1,class:"px-2 py-4"},De=e("div",{class:"flex flex-shrink-0 flex-wrap items-center justify-end rounded-b-md border-t-2 border-neutral-100 border-opacity-100 p-4 dark:border-opacity-50"},null,-1);function Ce(t,a,i,Me,r,l){const y=g("InputError"),f=g("ChevronDownIcon"),_=g("Pagination"),k=g("MagnifyingGlassIcon"),v=g("XMarkIcon"),w=g("ArrowsUpDownIcon");return o(),n(c,null,[e("div",{class:"",onClick:a[0]||(a[0]=s=>{l.getData(),r.Modal.show()})},[i.label?(o(),n("div",F,h(i.label),1)):m("",!0),P(t.$slots,"selector",{selectedText:r.selectedText,clear:l.clear}),p(y,{class:"mt-1",message:i.error},null,8,["message"])]),e("div",{"data-te-modal-init":"",class:"fixed left-0 top-0 backdrop-blur z-[1055] hidden h-full w-full overflow-y-auto overflow-x-hidden outline-none",id:`modalUsers-${i.id}`,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",q,[e("div",K,[J,e("div",H,[e("div",O,[e("div",Q,[e("div",R,[e("div",W,[e("div",Y,[e("button",Z,[$,e("span",null,h(r.params.paginate),1),p(f,{class:"h-4 w-4 mx-1"})]),e("div",ee,[(o(!0),n(c,null,u(t.$page.props.pageItems,s=>(o(),n("div",te,[e("div",{onClick:x(b=>{r.params.paginate=s,l.getData()},["stop"]),role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100 dark:text-light dark:hover:bg-primary"},h(s),9,ae),se]))),256))],512)]),p(_,{onPaginationChanged:l.paginationChanged,pagination:r.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",re,[oe,e("div",ne,[p(k,{onClick:a[1]||(a[1]=s=>l.getData()),class:"w-4 h-4 dark:text-gray-400"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:a[2]||(a[2]=s=>{r.params.search=null,l.getData()})},[p(v,{class:"w-4 h-4 dark:text-gray-400"})]),T(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":a[3]||(a[3]=s=>r.params.search=s),onKeydown:a[4]||(a[4]=z(x(s=>l.getData(),["prevent"]),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.__("search")},null,40,le),[[j,r.params.search]])])]),e("table",ie,[e("thead",de,[e("tr",ce,[(o(!0),n(c,null,u(t.cols,(s,b)=>(o(),n("th",{scope:"col",class:"px-2 py-3 cursor-pointer hover:text-gray-500",onClick:d=>{r.params.order_by=s,r.params.dir=r.params.dir=="ASC"?"DESC":"ASC",r.params.page=1,l.getData()}},[e("div",he,[e("span",pe,h(t.__(t.labels[b])),1),p(w,{class:"w-4 h-4"})])],8,ge))),256))])]),e("tbody",ue,[r.loading?(o(),n(c,{key:0},u(3,s=>e("tr",be,fe)),64)):m("",!0),(o(!0),n(c,null,u(r.data,(s,b)=>(o(),n("tr",{class:B([{"border-b":b!=r.data.length-1},"cursor-pointer hover:bg-gray-400 bg-white text-center dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"]),onClick:d=>l.selectItem(s)},[(o(!0),n(c,null,u(t.cols,(d,I)=>(o(),n(c,null,[I==0?(o(),n("td",ke,[e("div",ve,h(t.cropText(s[d],40)),1),we])):(o(),n("td",Ie,h(i.callback&&i.callback[d]?i.callback[d](s[d]):t.__(s[d])),1))],64))),256))],10,_e))),256))])])])])]),De])])],8,X)],64)}const Ae=V(N,[["render",Ce]]);export{Ae as U};
