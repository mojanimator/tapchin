import{A}from"./AddressSelector-Bg6-VUjw.js";import{L as q}from"./LoadingIcon-PyLCRR-O.js";import{r as U,T as F}from"./TomanIcon-CryjNtY-.js";import{I as E}from"./Footer-B5OFFhHa.js";import{S as D}from"./Scaffold-DWvcdxbt.js";import{Z as z,j as H,i as m,o as a,c as f,w as h,a as e,t as s,e as c,F as v,h as x,f as l,k as I,v as C,b as d,g as k,n as y}from"./app-COCv_6FM.js";import{_ as M}from"./PrimaryButton-zI18mNha.js";import{_ as Z}from"./SecondaryButton-T-3OVGxv.js";import{_ as G}from"./TextInput-K5DGNw4r.js";import{_ as J}from"./SearchInput-o3w2TZ-x.js";import{L as K}from"./LocationSelector-uJZ_cDRB.js";import{S as O,a as Q}from"./swiper-vue-CZXAQxnE.js";import{N as R,P as W,A as X}from"./scrollbar-D-KXdfFN.js";import{S as Y}from"./scrollbar-T_jY5SJb.js";import{C as $}from"./CartItemButton-ClgMcctk.js";import{T as ee}from"./Timestamp-7lheTnyH.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./EyeIcon-DDKOnXSf.js";import{r as re}from"./PencilIcon-DNzpRAcV.js";import{r as oe}from"./MapPinIcon-DwZhsMsl.js";import{r as ae}from"./ShoppingBagIcon-DdettYi9.js";import"./geosearch.module-Dvy0ZXuX.js";import"./Selector-D_Wz8VRX.js";import"./InputLabel-DWU22C58.js";import"./Bars2Icon-CXJclUCF.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./MagnifyingGlassIcon-BmWdTLzH.js";import"./Alert-eYSKKEf0.js";import"./PhoneIcon-CmyMHnNp.js";import"./Squares2X2Icon-B-hFow5j.js";import"./MapIcon-zUuRLJSy.js";import"./TrashIcon-CtMFSBd1.js";import"./ApplicationLogo-DT4XYSyB.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";import"./ClockIcon-Ca9_Bi8-.js";const ie={data(){return{page:"cart",cart:null,loading:!1,modules:[R,W,Y,X]}},props:["heroText"],components:{Timestamp:ee,CartItemButton:$,SearchInput:J,SecondaryButton:Z,PrimaryButton:M,Scaffold:D,Head:z,LoadingIcon:q,Image:E,EyeIcon:se,Link:H,PencilIcon:re,Swiper:O,SwiperSlide:Q,LocationSelector:K,MapPinIcon:oe,ArrowTrendingUpIcon:U,TomanIcon:F,ShoppingBagIcon:ae,AddressSelector:A,TextInput:G},setup(t){},mounted(){route().current("checkout.shipping")?this.page="shipping":route().current("checkout.payment")&&(this.page="payment"),this.update(),this.emitter.on("updateCart",t=>{this.cart=t})},methods:{handleNextButtonClick(){this.loading||(this.page=="cart"?this.update({current:"checkout.cart",next:"checkout.shipping"}):this.page=="shipping"?this.update({current:"checkout.shipping",next:"checkout.payment"}):this.page=="payment"&&this.update({current:"checkout.payment",next:"order.create",cmnd:"create_order_and_pay"}))},update(t={}){this.isLoading(!0),t.current=`checkout.${this.page}`,this.loading=!0,window.axios.patch(route("cart.update"),t,{}).then(n=>{n.data&&n.data.message&&t.length>0&&this.showToast("success",n.data.message),n.data.cart&&(this.updateCart(n.data.cart),this.cart=n.data.cart),t.next&&(this.cart.errors.length>0&&this.page!="cart"?this.showToast("danger",this.__("please_correct_errors")):n.data.url?window.location=n.data.url:this.$inertia.visit(route(t.next)))}).catch(n=>{this.error=this.getErrors(n),n.response&&n.response.data&&n.response.data.cart&&(this.updateCart(n.response.data.cart),this.cart=n.response.data.cart),this.showToast("danger",this.error)}).finally(()=>{this.loading=!1,this.isLoading(!1)})}}},ce=e("div",{class:"py-8 shadow-md bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-teal-500 to-teal-500"},null,-1),ne={key:0,class:"flex flex-col md:flex-row p-2 lg:p-4 lg:max-w-5xl mx-auto"},de={class:"grow py-4 border rounded-lg md:rounded-e-none bg-neutral-50"},le={key:0,class:"border-b flex flex-col rounded-lg mx-4 mt-4 p-2 lg:p-4"},_e={class:"text-neutral-400 pb-2"},me={key:1,class:"border-b flex flex-col shadow rounded-lg mx-1 mt-4 p-2 lg:p-4"},pe={class:"text-neutral-400 pb-2"},ue={key:2,class:"w-full p-4 items-center flex flex-col justify-center"},he={class:"shadow-md rounded"},ge={class:"p-2"},fe={key:0,class:"flex items-start"},ve={key:0,class:"w-full flex-col p-2 space-y-2 items-start"},xe={class:"flex items-center justify-between"},ye={key:0,class:"text-sm text-neutral-500 mx-2"},ke={class:"text-neutral-400 text-sm"},be={class:"flex items-center text-sm"},we={class:"text-neutral-600 mx-1"},Ie={class:"text-neutral-600 mx-1"},Ce={class:"text-neutral-400"},Se={class:"flex items-center text-sm"},Te={class:"text-neutral-600 mx-1"},Pe={class:"text-neutral-600 mx-1"},Be={class:"flex items-center text-sm"},Le={class:"text-neutral-600 mx-1"},Ve={class:"text-neutral-600 mx-1"},je={class:"text-neutral-400 mx-1"},Ne={key:1,class:"text-danger-600 font-bold text-sm"},Ae={class:"flex flex-wrap items-center justify-start my-2"},qe={class:"flex"},Ue={class:"mx-2"},Fe={class:"flex items-center text-sm border-b p-2 py-2"},Ee={class:"text-neutral-600 mx-1"},De={class:"text-neutral-800 mx-1"},ze={class:"flex items-center text-sm p-2 py-2"},He={class:"text-neutral-600 mx-1"},Me={class:"text-neutral-800 mx-1"},Ze={key:0,class:"border-t p-2"},Ge={class:"text-neutral-500"},Je={key:0,class:"text-red-500 font-bold"},Ke={key:1},Oe={key:0,class:"text-sm"},Qe={key:0,class:"text-sm my-2 text-primary-700"},Re={class:"flex items-center"},We={class:"text-neutral-500"},Xe={class:"mx-2"},Ye={class:"my-2"},$e={key:2,class:"my-4"},et={class:"flex border-t items-center justify-end font-bold text-sm p-4 py-2"},tt={class:"text-neutral-600 mx-1"},st={class:"text-neutral-800 mx-1"},rt={class:"min-w-[15rem] sticky bg-neutral-100 my-2 md:my-0 p-2 rounded-lg md:rounded-s-none"},ot={class:"flex flex-col md:my-4"},at={class:"flex items-center text-sm border-b p-4 py-2"},it={class:"text-neutral-600 mx-1"},ct={class:"text-neutral-800 mx-1"},nt={class:"flex items-center text-sm border-b p-4 py-2"},dt={class:"text-neutral-600 mx-1"},lt={class:"text-neutral-800 mx-1"},_t={class:"flex items-center text-sm p-4 py-2"},mt={class:"text-neutral-600 mx-1"},pt={class:"text-neutral-800 mx-1"},ut={class:"flex items-center text-sm p-4 py-2"},ht={class:"text-neutral-600 mx-1"},gt={class:"text-neutral-800 mx-1"},ft={class:"flex items-center justify-start font-bold text-sm p-4 py-2"},vt={class:"text-neutral-600 mx-1"},xt={class:"text-neutral-800 mx-1"},yt={key:0};function kt(t,n,bt,wt,r,g){const S=m("AddressSelector"),b=m("Link"),T=m("Image"),p=m("TomanIcon"),P=m("CartItemButton"),B=m("Timestamp"),L=m("TextInput"),w=m("LoadingIcon"),V=m("PrimaryButton"),j=m("Scaffold");return a(),f(j,{"navbar-theme":"dark"},{header:h(()=>[e("title",null,s(r.page=="shipping"?t.__("address"):t.__("cart")),1)]),default:h(()=>[ce,r.cart?(a(),c("div",ne,[e("section",de,[r.page=="payment"?(a(),c("div",le,[e("div",_e,s(t.__("payment_method")),1),(a(!0),c(v,null,x(r.cart.payment_methods,_=>(a(),c("div",{class:y(["border rounded-md p-4 cursor-pointer hover:bg-neutral-100",{"bg-neutral-100":_.selected}])},[e("div",null,s(_.name),1)],2))),256))])):l("",!0),r.page=="shipping"||r.page=="payment"?(a(),c("div",me,[e("div",pe,s(t.__("delivery_address")),1),r.cart.need_address||r.page!="cart"?(a(),f(S,{key:0,editable:r.page!="cart",clearable:!0,class:"",ref:"addressSelector",onChange:n[0]||(n[0]=_=>g.update({address_idx:_})),error:r.cart.errors&&r.cart.errors.filter(_=>_.type=="address").length>0?r.cart.errors.filter(_=>_.type=="address")[0].message:null,"preload-data":r.cart.address,type:"cart"},null,8,["editable","error","preload-data"])):l("",!0),I(e("div",{class:"text-primary-500 font-bold py-2"},s(t.__("you_selected_self_receive")),513),[[C,r.page=="payment"&&r.cart.orders.length>0&&r.cart.need_self_receive]])])):l("",!0),r.cart.orders.length==0?(a(),c("div",ue,[e("div",null,s(t.__("cart_is_empty")),1),d(b,{class:"text-primary-500 hover:text-primary-400 cursor-pointer",href:t.route("shop.index")},{default:h(()=>[k(s(t.__("shop")),1)]),_:1},8,["href"])])):l("",!0),(a(!0),c(v,null,x(r.cart.orders,(_,N)=>(a(),c("div",he,[e("div",ge,s(`${t.__("order")} ${N+1}`),1),(a(!0),c(v,null,x(_.shipments,(i,It)=>(a(),c("div",{class:y([{"bg-danger-100":i.method.error_message&&r.page!="cart"},"p-2 m-2"])},[(a(!0),c(v,null,x(i.items,(o,u)=>(a(),c("div",{key:o.cart_item.variation_id,class:y(["flex p-2 flex-col my-2",{"bg-danger-100":o.cart_item.error_message}])},[o.cart_item?(a(),c("div",fe,[e("div",null,[d(T,{src:t.route("storage.variations")+`/${o.cart_item.variation_id}/thumb.jpg`,classes:"w-32 h-32 object-contain rounded  mx-1 ","data-lity":t.route("storage.variations")+`/${o.cart_item.variation_id}/thumb.jpg`},null,8,["src","data-lity"])]),o.cart_item.product?(a(),c("div",ve,[e("div",xe,[d(b,{href:t.route("variation.view",{id:o.cart_item.product.id,name:o.cart_item.product.name}),class:"cursor-pointer hover:text-primary-500"},{default:h(()=>[k(s(o.cart_item.product.name||""),1)]),_:2},1032,["href"]),o.cart_item.product.grade?(a(),c("div",ye,s(t.__("grade")+" "+o.cart_item.product.grade),1)):l("",!0)]),e("div",ke,s(o.repo_name),1),e("div",be,[e("div",we,s(t.__("qty"))+":",1),e("div",Ie,s(o.cart_item.qty?parseFloat(o.cart_item.qty):0),1),e("div",Ce,s(t.getPack(o.cart_item.product.pack_id)),1)]),e("div",Se,[e("div",Te,s(t.__("price_unit"))+":",1),e("div",Pe,s(t.asPrice(o.cart_item.product.price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})]),e("div",Be,[e("div",Le,s(t.__("weight_unit"))+":",1),e("div",Ve,s(parseFloat(o.cart_item.product.weight)),1),e("div",je,s(t.__("kg")),1)])])):l("",!0)])):l("",!0),o.cart_item.error_message?(a(),c("div",Ne,s(o.cart_item.error_message),1)):l("",!0),e("div",Ae,[d(P,{"product-id":o.cart_item.variation_id,class:"flex min-w-[100%] xs:min-w-[50%] sm:min-w-[36%] lg:min-w-[20%] hover:cursor-pointer"},null,8,["product-id"]),e("div",qe,[e("div",Ue,s(t.asPrice(o.cart_item.total_price)),1),e("div",null,[d(p,{class:""})])])])],2))),128)),e("div",null,[e("div",Fe,[e("div",Ee,s(t.__("cart_total_qty"))+":",1),e("div",De,s(i.total_items),1)]),e("div",ze,[e("div",He,s(t.__("cart_total_price"))+":",1),e("div",Me,s(t.asPrice(i.total_items_price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})])]),r.page!="cart"?(a(),c("div",Ze,[e("div",Ge,s(t.__("shipping_method")),1),i.method.error_message?(a(),c("div",Je,s(i.method.error_message),1)):(a(),c("div",Ke,[e("div",null,[k(s(i.method.name)+" ",1),i.method.description?(a(),c("span",Oe,"("+s(i.method.description)+")",1)):l("",!0)]),i.method.address?(a(),c("div",Qe,s(t.__("address"))+": "+s(i.method.address),1)):l("",!0),e("div",Re,[e("div",We,s(t.__("shipping_price"))+" :",1),e("div",Xe,s(t.asPrice(i.total_shipping_price)),1),d(p,{class:""})]),e("div",Ye,[i.has_available_shipping&&!i.visit_checked?(a(),f(B,{key:0,mode:"view",errors:i.error_message,label:t.__("delivery_time"),onChange:o=>{let u={};u[`timestamp_shipping_${i.method.id}`]=o,g.update(u)},modelValue:i.method.timestamps,"onUpdate:modelValue":o=>i.method.timestamps=o},null,8,["errors","label","onChange","modelValue","onUpdate:modelValue"])):l("",!0)])])),i.has_available_shipping?(a(),c("div",$e,[d(L,{onChange:o=>{let u={};u[`visit_repo_${i.repo_id}`]=i.visit_checked,g.update(u)},id:`visit_repo_${i.repo_id}`,type:"checkbox",placeholder:t.__("visit_repo"),classes:" px-0 mx-0 ",modelValue:i.visit_checked,"onUpdate:modelValue":o=>i.visit_checked=o,autocomplete:`visit_repo_${i.repo_id}`},null,8,["onChange","id","placeholder","modelValue","onUpdate:modelValue","autocomplete"])])):l("",!0)])):l("",!0)],2))),256)),e("div",et,[e("div",tt,s(t.__("order_price"))+":",1),e("div",st,s(t.asPrice(_.total_price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})])]))),256))]),e("aside",rt,[e("div",ot,[e("div",at,[e("div",it,s(t.__("orders_count"))+":",1),e("div",ct,s(r.cart.orders.length),1)]),e("div",nt,[e("div",dt,s(t.__("cart_total_qty"))+":",1),e("div",lt,s(r.cart.total_items),1)]),e("div",_t,[e("div",mt,s(t.__("total_shipping_price"))+":",1),e("div",pt,s(t.asPrice(r.cart.total_shipping_price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})]),e("div",ut,[e("div",ht,s(t.__("cart_total_price"))+":",1),e("div",gt,s(t.asPrice(r.cart.total_items_price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})]),e("div",ft,[e("div",vt,s(t.__("total_price"))+":",1),e("div",xt,s(t.asPrice(r.cart.total_price)),1),d(p,{class:"w-5 h-5 text-neutral-400"})]),d(V,{class:y([{"opacity-50 disabled":r.cart.orders.length==0},"my-2"]),onClick:g.handleNextButtonClick,classes:""},{default:h(()=>[r.loading?(a(),f(w,{key:1,class:"fill-white w-8 mx-auto",ref:"loader",type:"line-dot"},null,512)):(a(),c("span",yt,s(r.page=="shipping"?t.__("order_and_payment"):r.page=="payment"?t.__("pay"):t.__("complete_and_add_address")),1))]),_:1},8,["class","onClick"])])])])):l("",!0),I(d(w,{ref:"loader",type:"linear"},null,512),[[C,r.loading]])]),_:1})}const ns=te(ie,[["render",kt]]);export{ns as default};
