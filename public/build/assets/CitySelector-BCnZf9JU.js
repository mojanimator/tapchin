import{D as C,i as d,o as s,e as c,b as a,a as e,t as l,F as u,h as m,n as I,f as _,l as b,k as L,v as M,c as $}from"./app-DeJr7fNP.js";import{_ as V,a as B}from"./InputLabel-C2gVT93H.js";import{_ as S}from"./TextInput-BUWn7uYR.js";import{L as E}from"./LoadingIcon-8dx7WYGr.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as z}from"./MapPinIcon-DUvwgUpM.js";import{r as N}from"./Bars2Icon-DNQAv7Yb.js";import{r as D,a as P}from"./ChevronRightIcon-9GRJ1f_S.js";import{r as R}from"./CartItemButton-BUsVs_zz.js";const X={data(){return{currentLevel:0,currentCity:{id:0,parent_id:0,level:0},selecteds:[],selectedName:null,loading:!1,cities:this.$page.props.cities,filteredCities:[]}},props:["id","label","preload","data","modelValue","multi","error"],emits:["change","update:modelValue"],components:{InputLabel:V,MapPinIcon:z,Bars2Icon:N,TextInput:S,LoadingIcon:E,ChevronLeftIcon:D,ChevronRightIcon:P,XMarkIcon:R,InputError:B},mounted(){const t=document.getElementById("citySelectorModal");if(this.modal=new C(t),this.preload){this.selecteds=[];for(let r in this.preload)for(let i in this.$page.props.cities)this.preload[r]==this.$page.props.cities[i].id&&this.selecteds.push({id:this.$page.props.cities[i].id,name:this.$page.props.cities[i].name});this.$emit("update:modelValue",this.myMap(this.selecteds,r=>r.id))}},methods:{remove(t){this.selecteds.splice(t,1),this.$emit("update:modelValue",this.myMap(this.selecteds,r=>r.id))},reset(){this.currentLevel=1,this.currentCity={id:0,parent_id:0}},updateLocation(t){window.axios.post(route("user.update_location"),{city_id:t})},back(){this.currentCity.parent_id>0?(this.currentCity=this.cities.filter(t=>t.id==this.currentCity.parent_id)[0],this.currentLevel=this.currentCity.level):this.currentCity={id:0,parent_id:0,level:0}},selectCity(t){this.cities.filter(r=>t.id==r.parent_id).length==0?this.selecteds.filter(r=>t.id==r.id).length==0?this.selecteds.push({id:t.id,name:t.name}):this.selecteds=this.selecteds.filter(r=>t.id!=r.id):(this.currentCity=t,this.currentLevel++),this.$emit("update:modelValue",this.myMap(this.selecteds,r=>r.id))},getCities(t,r){this.filteredCities=[];for(const i in this.cities)this.cities[i].level==t&&this.cities[i].parent_id==r&&this.filteredCities.push(this.cities[i]);return this.filteredCities}}},F={class:""},T={key:0},q={key:1},A={class:"flex flex-wrap"},G=["onClick"],H={class:"p-1 rounded-full"},J={"data-te-modal-init":"",class:"fixed left-0 top-0 backdrop-blur z-[1055] hidden h-full w-full overflow-y-auto overflow-x-hidden outline-none",id:"citySelectorModal",tabindex:"-1","aria-labelledby":"citySelectorModalLabel","aria-hidden":"true"},K={"data-te-modal-dialog-ref":"",class:"max-w-2xl pointer-events-none relative w-auto translate-y-[-50px] opacity-0 transition-all duration-300 ease-in-out min-[576px]:mx-auto min-[576px]:mt-7 px-2 sm:px-4 md:px8 min-[576px]:max-w-5xl"},O={class:"min-[576px]:shadow-[0_0.5rem_1rem_rgba(#000, 0.15)] pointer-events-auto relative flex w-full flex-col rounded-md border-none bg-white bg-clip-padding text-current shadow-lg outline-none max-w-xl mx-auto"},Q={class:"flex flex-shrink-0 items-center justify-between rounded-t-md border-b-2 border-neutral-100 border-opacity-100 p-4"},U={class:"text-lg text-primary-500 flex items-center font-medium leading-normal text-neutral-600",id:"citySelectorModalLabel"},W=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Y=[W],Z={class:"relative p-4","data-te-modal-body-ref":""},ee={class:"sticky items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},te={class:"text-xs"},re={class:"flex flex-wrap"},oe=["onClick"],se={class:"px-2 md:px-4"},ie={class:"mx-auto md:max-w-3xl mt-6 px-2 md:px-4 py-4 overflow-hidden rounded-lg"},ce={class:"flex flex-col mx-2 col-span-2 w-full px-2"},ne=["onClick"],ae={class:"flex items-center"},le={class:"mb-[0.125rem] block min-h-[1.5rem] pl-[1.5rem]",dir:"ltr"},de=["for"],he=["id","checked"];function pe(t,r,i,fe,n,h){const v=d("InputLabel"),x=d("MapPinIcon"),k=d("XMarkIcon"),y=d("InputError"),w=d("ChevronRightIcon"),g=d("ChevronLeftIcon");return s(),c("div",F,[a(v,{for:i.id,value:i.label},null,8,["for","value"]),e("div",{class:"rounded text-primary-500 items-center border border-neutral-300 hover:cursor-pointer p-2 hover:bg-gray-50 text-gray-500",onClick:r[0]||(r[0]=o=>{h.reset(),t.modal.show()})},[a(x,{class:"h-4 w-4 mx-1"}),n.selecteds.length==0?(s(),c("div",T,l(`0 ${t.__("select")}`),1)):(s(),c("div",q,[e("span",null,l(`${n.selecteds.length} ${t.__("select")}`),1),e("div",A,[(s(!0),c(u,null,m(n.selecteds,(o,p)=>(s(),c("div",{onClick:b(f=>h.remove(p),["stop"]),class:"flex ms-1 mt-1 bg-primary-500 text-white rounded px-1"},[e("span",null,l(o.name),1),e("span",H,[a(k,{class:"h-4 w-4"})])],8,G))),256))])]))]),a(y,{class:"mt-1",message:i.error},null,8,["message"]),e("div",J,[e("div",K,[e("div",O,[e("div",Q,[e("h5",U,[a(x,{class:"h-7 w-7 mx-3"})]),e("button",{class:I(["text-danger","box-content rounded-none border-none hover:no-underline hover:opacity-75 focus:opacity-100 focus:shadow-none focus:outline-none"]),type:"button","data-te-modal-dismiss":"","aria-label":"Close"},Y)]),e("div",Z,[e("div",ee,[e("div",te,[e("span",null,l(`${n.selecteds.length} ${t.__("select")}`),1),e("div",re,[(s(!0),c(u,null,m(n.selecteds,(o,p)=>(s(),c("div",{onClick:b(f=>h.remove(p),["stop"]),class:"flex items-center ms-1 mt-1 hover:bg-primary-400 cursor-pointer bg-primary-500 text-white rounded px-1"},[e("span",null,l(o.name),1),a(k,{class:"my-1 h-4 w-4"})],8,oe))),256))])])]),e("div",se,[e("div",ie,[e("div",ce,[e("ul",null,[n.currentCity.level>0?(s(),c("li",{key:0,onClick:r[1]||(r[1]=o=>h.back()),class:"p-3 px-3 border-b flex text-gray-600 items-center justify-between hover:bg-gray-100 rounded hover:cursor-pointer"},[e("span",null,l(t.__("return")),1),a(w,{class:"w-4 h-4"})])):_("",!0),(s(!0),c(u,null,m(n.cities,(o,p)=>L((s(),c("li",{onClick:f=>h.selectCity(o),class:"p-2 px-3 flex items-center justify-between hover:bg-gray-100 rounded hover:cursor-pointer"},[e("div",ae,[e("div",le,[e("label",{onClick:r[2]||(r[2]=b(()=>{},["stop"])),class:"inline-block select-none mx-2 hover:cursor-pointer",for:`checkCity${o.id}`},l(o.name),9,de),o.has_child?_("",!0):(s(),c("input",{key:0,class:"relative float-end h-[1.125rem] w-[1.125rem] appearance-none rounded-[0.25rem] border-[0.125rem] border-solid border-neutral-300 outline-none before:pointer-events-none before:absolute before:h-[0.875rem] before:w-[0.875rem] before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-[0px_0px_0px_13px_transparent] before:content-[''] checked:border-primary-500 checked:bg-primary-500 checked:before:opacity-[0.16] checked:after:absolute checked:after:-mt-px checked:after:ml-[0.25rem] checked:after:block checked:after:h-[0.8125rem] checked:after:w-[0.375rem] checked:after:rotate-45 checked:after:border-[0.125rem] checked:after:border-l-0 checked:after:border-t-0 checked:after:border-solid checked:after:border-white hover:checked:bg-primary-500 checked:after:bg-transparent checked:after:content-[''] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:shadow-none focus:transition-[border-color_0.2s] focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-[0.875rem] focus:after:w-[0.875rem] focus:after:rounded-[0.125rem] focus:after:content-[''] checked:focus:before:scale-100 checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:after:-mt-px checked:focus:after:ml-[0.25rem] checked:focus:after:h-[0.8125rem] checked:focus:after:w-[0.375rem] checked:focus:after:rotate-45 checked:focus:after:rounded-none checked:focus:after:border-[0.125rem] checked:focus:after:border-l-0 checked:focus:after:border-t-0 checked:focus:after:border-solid checked:focus:after:border-white checked:focus:after:bg-transparent dark:border-neutral-600 dark:checked:border-primary-500 dark:checked:bg-primary-500 dark:focus:before:shadow-[0px_0px_0px_13px_rgba(255,255,255,0.4)] dark:checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca]",type:"checkbox",value:"",id:`checkCity${o.id}`,checked:n.selecteds.filter(f=>f.id==o.id).length>0},null,8,he))])]),o.has_child?(s(),$(g,{key:0,class:"w-4 h-4"})):_("",!0)],8,ne)),[[M,o.parent_id==n.currentCity.id]])),256))])])])])])])])])])}const ge=j(X,[["render",pe]]);export{ge as C};
