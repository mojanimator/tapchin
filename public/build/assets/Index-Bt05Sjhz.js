import"./Scaffold-D_ifbLkl.js";import{P as A}from"./Panel-rs2tkraC.js";import{Z as E,j,i as p,o as d,c as M,w as h,a as e,t as n,b as l,g as m,e as c,h as x,F as b,k as y,G as T,J as U,A as k,f as L,l as V}from"./app-DeJr7fNP.js";import{P as B,r as G}from"./Pagination-VNHzEPuv.js";import{r as N,I as q}from"./Footer-BYUJXMx0.js";import{T as X}from"./Tooltip-CSg56dN2.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as F}from"./ShoppingBagIcon-zIu7FSuq.js";import{r as H}from"./Bars2Icon-DNQAv7Yb.js";import{r as K}from"./MagnifyingGlassIcon--KPgqpVy.js";import{r as J}from"./CartItemButton-BUsVs_zz.js";import"./Alert-CDDSmLjy.js";import"./LoadingIcon-8dx7WYGr.js";import"./ApplicationLogo-CV6pwTdm.js";import"./TextInput-BUWn7uYR.js";import"./InputLabel-C2gVT93H.js";import"./WrenchScrewdriverIcon-DQFoZ8JW.js";import"./QuestionMarkCircleIcon-jeUFMgsk.js";import"./ChevronRightIcon-9GRJ1f_S.js";import"./ChevronUpIcon-DGI4GkYP.js";import"./PlusIcon-NsBgz0vi.js";import"./MinusIcon-B-7x8Y4K.js";const Z={data(){return{params:{page:1,search:null,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},components:{Head:E,Link:j,HomeIcon:F,ChevronDownIcon:N,Panel:A,Bars2Icon:H,Image:q,MagnifyingGlassIcon:K,XMarkIcon:J,Pagination:B,ArrowsUpDownIcon:G,Tooltip:X},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.data=[],window.axios.get(route("panel.notification.search"),{params:this.params},{onUploadProgress:function(t){console.log(t)},onDownloadProgress:function(t){console.log(t)}}).then(t=>{this.data=t.data.data,this.data.forEach(s=>{s.selected=!1}),delete t.data.data,this.pagination=t.data}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",t)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},remove(t){this.isLoading(!0),window.axios.delete(route("panel.admin.notification.delete",t.id),{},{onUploadProgress:function(s){},onDownloadProgress:function(s){}}).then(s=>{s.data&&s.data.message&&(this.showToast("success",s.data.message),this.data.splice(t.idx,1))}).catch(s=>{this.error=this.getErrors(s),s.response&&s.response.data,this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(r=>r.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const s={cmnd:t,data:this.data.reduce((r,g)=>(g.selected&&r.push(g.id),r),[])};window.axios.patch(route("notification.update"),s,{onUploadProgress:function(r){},onDownloadProgress:function(r){}}).then(r=>{if(r.data&&r.data.message&&this.showToast("success",r.data.message),r.data&&r.data.results){const g=r.data.results;for(let a in this.data)for(let i in g)if(g[i].id==this.data[a].id){this.data[a].status=g[i].status;break}}}).catch(r=>{this.error=this.getErrors(r),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},createLink(t){return t?t.link?t.link:t.data_id&&t.type?route("/")+"/"+t.type.split("_")[0]+"/edit/"+t.data_id:route("panel.notification.index"):""}}},O={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},Q={class:"flex"},R={class:"text-2xl font-semibold"},W={class:"px-2 flex flex-col md:px-4"},Y={class:"flex-col bg-white overflow-x-auto shadow-lg rounded-lg"},$={class:"flex items-center justify-between py-4 p-4"},ee={class:"relative mx-1","data-te-dropdown-ref":""},te={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},se=e("span",{class:"sr-only"},"table actions",-1),oe={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},ae={class:"flex items-center"},ne={class:"relative mx-1","data-te-dropdown-ref":""},re={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ie=e("span",{class:"sr-only"},"table actions",-1),le={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},de={class:""},ce=["onClick"],pe=e("hr",{class:"border-gray-200"},null,-1),ge={class:"relative"},he=e("label",{for:"table-search",class:"sr-only"},"Search",-1),ue={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},_e=["placeholder"],me={class:"w-full text-sm text-left text-gray-500"},fe={class:"text-xs text-gray-700 uppercase bg-gray-50"},xe={class:"text-sm text-center"},be={class:"flex items-center"},ye=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),ve={class:"flex items-center justify-center"},we={class:"px-2"},ke={class:"flex items-center justify-center"},Ce={class:"px-2"},De={class:"flex items-center justify-center"},Se={class:"px-2"},Pe={class:"flex items-center justify-center"},Ie={class:"px-2"},Ae={scope:"col",class:"px-2 py-3"},Ee={class:""},je={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},Me=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),Te=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),Ue=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Le=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ve=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Be=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),Ge=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ne=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),qe=[Me,Te,Ue,Le,Ve,Be,Ge,Ne],Xe={class:"bg-white text-center border-b hover:bg-gray-50"},ze=["onClick"],Fe={class:"flex items-center"},He=["onUpdate:modelValue"],Ke={class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},Je={class:"text-base font-semibold"},Ze={class:"font-normal text-gray-500"},Oe={class:"px-2 py-4"},Qe={key:0},Re={key:1},We={class:"px-2 py-4"},Ye={key:0},$e={key:1},et={class:"px-2 py-4 text-primary"},tt={class:"px-2 py-4"},st={class:"inline-flex rounded-md shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]",role:"group"},ot=["onClick"];function at(t,s,r,g,a,i){const C=p("Bars2Icon"),u=p("Link"),v=p("ChevronDownIcon"),D=p("Pagination"),S=p("MagnifyingGlassIcon"),P=p("XMarkIcon"),_=p("ArrowsUpDownIcon"),I=p("Panel");return d(),M(I,null,{header:h(()=>[e("title",null,n(t.__("panel")),1)]),content:h(()=>[e("div",O,[e("div",Q,[l(C,{class:"h-7 w-7 mx-3"}),e("h1",R,n(t.__("notifications_list")),1)]),e("div",null,[l(u,{href:t.route("panel.admin.notification.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:h(()=>[m(n(t.__("new_notification")),1)]),_:1},8,["href"])])]),e("div",W,[e("div",Y,[e("div",$,[e("div",null,[e("div",ee,[e("button",te,[se,e("span",null,n(t.__("bulk_actions")),1),l(v,{class:"h-4 w-4 mx-1"})]),e("div",oe,null,512)])]),e("div",ae,[e("div",ne,[e("button",re,[ie,e("span",null,n(a.params.paginate),1),l(v,{class:"h-4 w-4 mx-1"})]),e("div",le,[(d(!0),c(b,null,x(t.$page.props.pageItems,o=>(d(),c("div",de,[e("div",{onClick:w=>{a.params.paginate=o,i.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},n(o),9,ce),pe]))),256))],512)]),l(D,{onPaginationChanged:i.paginationChanged,pagination:a.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",ge,[he,e("div",ue,[l(S,{onClick:s[0]||(s[0]=o=>i.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:s[1]||(s[1]=o=>{a.params.search=null,i.getData()})},[l(P,{class:"w-4 h-4"})]),y(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":s[2]||(s[2]=o=>a.params.search=o),onKeydown:s[3]||(s[3]=U(o=>i.getData(),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,_e),[[T,a.params.search]])])]),e("table",me,[e("thead",fe,[e("tr",xe,[e("th",{scope:"col",class:"p-4",onClick:s[5]||(s[5]=(...o)=>i.toggleAll&&i.toggleAll(...o))},[e("div",be,[y(e("input",{id:"checkbox-all-search",type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=o=>a.toggleSelect=o),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[k,a.toggleSelect]]),ye])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[6]||(s[6]=o=>{a.params.order_by="subject",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",ve,[e("span",we,n(t.__("subject")),1),l(_,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[7]||(s[7]=o=>{a.params.order_by="owner_id",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",ke,[e("span",Ce,n(t.__("user")),1),l(_,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[8]||(s[8]=o=>{a.params.order_by="data_id",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",De,[e("span",Se,n(t.__("item")),1),l(_,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[9]||(s[9]=o=>{a.params.order_by="type",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",Pe,[e("span",Ie,n(t.__("type")),1),l(_,{class:"w-4 h-4"})])]),e("th",Ae,n(t.__("actions")),1)])]),e("tbody",Ee,[a.loading?(d(),c(b,{key:0},x(3,o=>e("tr",je,qe)),64)):L("",!0),(d(!0),c(b,null,x(a.data,(o,w)=>(d(),c("tr",Xe,[e("td",{class:"w-4 p-4",onClick:f=>o.selected=!o.selected},[e("div",Fe,[y(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":f=>o.selected=f,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,He),[[k,o.selected]])])],8,ze),e("td",Ke,[l(u,{class:"px-3 hover:text-gray-500",href:t.route("panel.admin.notification.edit",o.id)},{default:h(()=>[e("div",Je,n(t.cropText(o.subject,30)),1),e("div",Ze,n(),1)]),_:2},1032,["href"])]),e("td",Oe,[o.owner_id?(d(),c("div",Qe,[l(u,{class:"hover:bg-primary-100 p-4 rounded",href:t.route("panel.admin.user.edit",o.owner_id)},{default:h(()=>[m(n(o.owner_id),1)]),_:2},1032,["href"])])):(d(),c("div",Re,"_"))]),e("td",We,[o.data_id?(d(),c("div",Ye,[l(u,{class:"hover:bg-secondary-100 p-4 rounded",href:i.createLink(o)},{default:h(()=>[m(n(o.data_id),1)]),_:2},1032,["href"])])):(d(),c("div",$e,"_"))]),e("td",et,[e("div",null,n(t.__(o.type)),1)]),e("td",tt,[e("div",st,[l(u,{type:"button",href:t.route("panel.admin.notification.edit",o.id),class:"inline-block rounded-s bg-orange-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-orange-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},{default:h(()=>[m(n(t.__("edit")),1)]),_:2},1032,["href"]),e("button",{type:"button",onClick:V(f=>t.showDialog("danger",t.__("remove_item?"),t.__("remove"),i.remove,{id:o.id,idx:w}),["prevent"]),class:"inline-block rounded-e bg-danger-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-danger-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},n(t.__("remove")),9,ot)])])]))),256))])])])])]),_:1})}const Pt=z(Z,[["render",at]]);export{Pt as default};
