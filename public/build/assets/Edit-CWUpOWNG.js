import"./Scaffold-D_ifbLkl.js";import{P as A,r as D}from"./Panel-rs2tkraC.js";import{T as F,Z as X,j as R,i as a,o as l,c as v,w as d,a as r,t as s,b as n,e as m,k as H,v as N,f as p,n as _,F as G,h as Q,l as f,p as z}from"./app-DeJr7fNP.js";import{_ as O}from"./Checkbox-BWgqGgzP.js";import"./GuestLayout-B84nh8OP.js";import{_ as J,a as Z}from"./InputLabel-C2gVT93H.js";import{_ as K}from"./PrimaryButton-Fk5jf8Nh.js";import{_ as W}from"./TextInput-BUWn7uYR.js";import{R as Y}from"./RadioGroup-F_Tqn1wR.js";import{L as $}from"./LoadingIcon-8dx7WYGr.js";import{P as ee}from"./Popover-BaS0lwjX.js";import{T as oe}from"./Tooltip-CSg56dN2.js";import{_ as re}from"./TagInput-3zOTNi0B.js";import{I as se}from"./ImageUploader-v1nOBbO9.js";import{S as te}from"./Selector-NdNaM2dQ.js";import{P as ie}from"./ProvinceCounty-Bztk6mkC.js";import{P as ne}from"./PhoneFields-Dp_fguC6.js";import{S as ae}from"./SocialFields-hQVy6EEa.js";import{V as le}from"./Video-BLyjCQx2.js";import{T as me}from"./TextEditor-7zAQTOol.js";import{U as pe}from"./UserSelector-D8GJCG_Y.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ce}from"./ShoppingBagIcon-zIu7FSuq.js";import{r as _e}from"./Footer-BYUJXMx0.js";import{r as fe}from"./Alert-CDDSmLjy.js";import{r as ue}from"./EyeIcon-DI71KuzS.js";import{r as ge}from"./FolderPlusIcon-oBdmLyEF.js";import{r as he}from"./Bars2Icon-DNQAv7Yb.js";import{r as ye}from"./ChatBubbleBottomCenterTextIcon-CovOeJqa.js";import{r as ve}from"./QuestionMarkCircleIcon-jeUFMgsk.js";import{r as be}from"./Squares2X2Icon-Dviu76Pe.js";import{r as we}from"./SignalIcon-C7ONQsBK.js";import{r as je}from"./CartItemButton-BUsVs_zz.js";import"./ApplicationLogo-CV6pwTdm.js";import"./WrenchScrewdriverIcon-DQFoZ8JW.js";import"./PlusIcon-NsBgz0vi.js";import"./XMarkIcon-CEnCPALs.js";import"./PhoneIcon-CdiwYJQQ.js";import"./LinkIcon-ClPrNMD5.js";import"./MinusIcon-B-7x8Y4K.js";import"./SpeakerXMarkIcon-CyRlW18-.js";import"./Pagination-VNHzEPuv.js";import"./ChevronRightIcon-9GRJ1f_S.js";import"./MagnifyingGlassIcon--KPgqpVy.js";import"./ChevronUpIcon-DGI4GkYP.js";const xe={data(){return{data:this.$page.props.data||{},form:F({id:this.$page.props.data.id,owner_id:null,owner:null,phone:null,phone_verify:null,lang:null,name:null,link:null,category_id:null,socials:null,tags:null,description:"",message:"",status:this.$page.props.data.status}),img:null,video:null,cmnd:null}},components:{TextEditor:me,ImageUploader:se,LoadingIcon:$,Head:X,Link:R,HomeIcon:ce,ChevronDownIcon:_e,Panel:A,InputLabel:J,TextInput:W,InputError:Z,PrimaryButton:K,RadioGroup:Y,UserIcon:fe,EyeIcon:ue,Checkbox:O,Popover:ee,Tooltip:oe,FolderPlusIcon:ge,Bars2Icon:he,ChatBubbleBottomCenterTextIcon:ye,TagInput:re,QuestionMarkCircleIcon:ve,Selector:te,Squares2X2Icon:be,ProvinceCounty:ie,PhoneFields:ne,SocialFields:ae,PencilSquareIcon:D,Video:le,SignalIcon:we,UserSelector:pe,XMarkIcon:je},created(){},mounted(){this.form.name=this.data.name,this.form.phone=this.data.phone,this.form.link=this.data.link,this.form.narrator=this.data.narrator,this.form.category_id=this.data.category_id,this.$refs.tags.set(this.data.tags),this.form.description=this.data.description,this.form.message=this.data.message,this.$refs.langSelector.selected=this.data.lang,this.form.project_item=this.data.project_item,this.form.owner=this.data.owner,this.form.owner_id=this.data.owner_id},methods:{submit(e){this.$refs.editor&&(this.form.message=this.$refs.editor.getData()),this.form.lang=this.$refs.langSelector.selected,this.form.clearErrors(),this.form.transform(i=>({...i,...e||{}})).patch(route("video.update"),{preserveScroll:!1,onSuccess:i=>{},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:i=>{this.$page.props.extra&&this.$page.props.extra.project_status&&(this.form.project_item.status=this.$page.props.extra.project_status),this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)}})}}},Ie={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},ke={class:"text-2xl font-semibold"},Se={class:"px-2 md:px-4"},Te={class:"lg:grid lg:grid-cols-3 mx-auto md:max-w-5xl mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},Ve={key:0,class:"border bg-sky-50 border-dashed rounded p-4 col-span-3"},Ce={class:"border-b text-md w-fit flex mx-auto mb-2 text-primary font-bold"},Pe={class:"flex items-center"},Be=["innerHTML"],Ue={key:2,class:"my-2 border bg-indigo-50 border-dashed rounded p-4 col-span-3"},Ee={class:"border-b text-md w-fit flex mx-auto mb-2 text-primary font-bold"},Le={class:"flex flex-col text-primary text-sm space-y-1"},Me={class:"flex items-center"},qe=["href"],Ae={key:1},De={class:"flex items-center border-b py-1"},Fe={class:"text-gray-500"},Xe={key:0,class:"mx-1"},Re={class:"flex items-center border-b py-1"},He={class:"text-gray-500"},Ne={class:"flex items-center border-b py-1"},Ge={class:"text-gray-500"},Qe={key:0,class:"mx-1"},ze={class:"flex items-center border-b py-1"},Oe={class:"text-gray-500"},Je={key:0,class:"mx-1 text-red-600"},Ze={class:"flex items-center border-b py-1"},Ke={class:"text-gray-500"},We={key:0,class:"mx-1 text-green-600"},Ye={class:"flex items-center py-1"},$e={key:0,class:"mx-1 w-full text-gray-500 whitespace-pre-line px-2 rounded"},eo={key:0},oo=["disabled"],ro={class:"lg:flex-col flex flex-wrap self-center md:m-2 lg:mx-2 md:items-center lg:items-stretch rounded-lg"},so={class:"flex-col m-2 items-center rounded-lg max-w-xs w-full mx-auto lg:mx-2"},to={class:"my-2"},io={class:"my-2"},no={class:"flex flex-col mx-2 col-span-2 w-full lg:border-s px-2"},ao={class:"flex items-center"},lo={key:0,class:"my-2"},mo={class:"grow"},po=["onClick"],co={class:"my-2"},_o={class:"p-3"},fo={class:"my-2"},uo={class:"p-3"},go={class:"my-2"},ho={class:"my-2"},yo={class:"p-3"},vo={key:1,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},bo={class:"animate-bounce"},wo={class:"mt-4"},jo={class:"text-lg"};function xo(e,i,Io,ko,o,c){const b=a("PencilSquareIcon"),u=a("RadioGroup"),w=a("InputLabel"),j=a("TextEditor"),x=a("ImageUploader"),g=a("InputError"),I=a("Video"),k=a("QuestionMarkCircleIcon"),S=a("Tooltip"),T=a("XMarkIcon"),V=a("UserSelector"),C=a("Bars2Icon"),h=a("TextInput"),P=a("Squares2X2Icon"),B=a("Selector"),U=a("TagInput"),E=a("ChatBubbleBottomCenterTextIcon"),L=a("LoadingIcon"),M=a("PrimaryButton"),q=a("Panel");return l(),v(q,null,{header:d(()=>[r("title",null,s(e.__("edit_video")),1)]),content:d(()=>[r("div",Ie,[n(b,{class:"h-7 w-7 mx-3"}),r("h1",ke,s(e.__("edit_video")),1)]),r("div",Se,[r("div",Te,[e.isAdmin()?(l(),m("div",Ve,[r("p",Ce,s(e.__("admin_section")),1),r("div",Pe,[n(u,{beforeSelected:o.form.status,ref:"statusSelector",class:"grow",name:"status",modelValue:o.form.status,"onUpdate:modelValue":i[0]||(i[0]=t=>o.form.status=t),items:e.myMap(e.$page.props.statuses,t=>t.name)},null,8,["beforeSelected","modelValue","items"])]),H(r("div",null,[n(w,{class:"text-red-500",for:"editor",value:e.__("reject_message")},null,8,["value"]),n(j,{mode:"create",preload:o.form.message,lang:e.$page.props.locale,id:"editor",ref:"editor"},null,8,["preload","lang"])],512),[[N,o.form.status=="reject"]])])):!e.isAdmin()&&o.form.message?(l(),m("div",{key:1,innerHTML:o.form.message,class:"border text-sm text-rose-400 bg-rose-50 border-dashed rounded p-4"},null,8,Be)):p("",!0),o.form.project_item?(l(),m("div",Ue,[r("p",Ee,s(e.__("project_info")),1),r("div",Le,[r("div",Me,[e.isAdmin()?(l(),m("a",{key:0,class:"hover:text-gray-700",href:e.route("panel.project.edit",o.form.project_item.project_id)},s(e.__("project"))+" "+s(o.form.project_item.id),9,qe)):(l(),m("div",Ae,s(e.__("project"))+" "+s(o.form.project_item.id),1))]),r("div",De,[r("div",Fe,s(e.__("operator"))+":",1),o.form.project_item.operator?(l(),m("div",Xe,s(o.form.project_item.operator.fullname)+" _"+s(o.form.project_item.operator.phone),1)):p("",!0)]),r("div",Re,[r("div",He,s(e.__("status"))+":",1),r("div",{class:_(["min-w-[5rem] px-1 items-center text-center rounded-md py-[.2rem]",`bg-${e.getStatus("project_statuses",o.form.project_item.status).color}-100   text-${e.getStatus("project_statuses",o.form.project_item.status).color}-500`])},s(e.getStatus("project_statuses",o.form.project_item.status).name),3)]),r("div",Ne,[r("div",Ge,s(e.__("commission"))+":",1),o.form.project_item.price?(l(),m("div",Qe,s(e.asPrice(o.form.project_item.price))+" "+s(e.__("currency")),1)):p("",!0)]),r("div",ze,[r("div",Oe,s(e.__("expire"))+":",1),o.form.project_item.expires_at?(l(),m("div",Je,s(e.toShamsi(o.form.project_item.expires_at,!0)),1)):p("",!0)]),r("div",Ze,[r("div",Ke,s(e.__("payed_at"))+":",1),o.form.project_item.payed_at?(l(),m("div",We,s(e.toShamsi(o.form.project_item.payed_at,!0)),1)):p("",!0)]),r("div",Ye,[o.form.project_item.chats?(l(),m("div",$e,[(l(!0),m(G,null,Q(JSON.parse(o.form.project_item.chats),(t,y)=>(l(),m("div",null,[y==0?(l(),m("div",eo,s(t.text),1)):p("",!0)]))),256))])):p("",!0)]),r("button",{onClick:i[1]||(i[1]=t=>e.showDialog("danger",e.__("complete_project_and_pay_after_admin_review?")+`<br>${e.asPrice(o.form.project_item.price)} ${e.__("currency")}<br>${e.__("user")} ${o.form.project_item.operator?`${o.form.project_item.operator.fullname} | ${o.form.project_item.operator.phone} `:"?"} `,e.__("final_accept"),c.submit,{cmnd:"operator-finish"})),disabled:!e.isAdmin()&&o.form.project_item.status!="progress",class:_([{"opacity-50":o.form.project_item.payed_at||o.form.project_item.status!="progress"},"rounded py-2 text-white cursor-pointer bg-success hover:bg-success-400"])},s(o.form.project_item.payed_at?e.__("payed_at")+` ${e.toShamsi(o.form.project_item.payed_at)} `:e.__("finish_and_request_pay")),11,oo)])])):p("",!0),r("div",ro,[r("div",so,[r("div",to,[n(x,{replace:e.$page.props.max_images_limit==1,preload:e.route("storage.videos")+`/${e.$page.props.data.id}.jpg`,mode:"edit","for-id":e.$page.props.data.id,link:e.route("video.update"),ref:"imageCropper",label:e.__("image_cover_jpg"),cropRatio:"1.25",id:"img",height:"10",class:"grow"},null,8,["replace","preload","for-id","link","label"]),n(g,{class:"mt-1",message:o.form.errors.img},null,8,["message"])]),r("div",io,[n(I,{lang:e.$page.props.locale,classes:"w-full h-64",preload:{name:e.$page.props.data.name,url:e.route("storage.videos")+`/${e.$page.props.data.id}.mp4`},view:"linear",mode:"edit",link:e.route("video.update"),"for-id":e.$page.props.data.id,ref:"video",label:e.__("video_file_mp4")},null,8,["lang","preload","link","for-id","label"]),n(g,{class:"mt-1",message:o.form.errors.video},null,8,["message"])])])]),r("div",no,[r("form",{onSubmit:i[8]||(i[8]=f((...t)=>c.submit&&c.submit(...t),["prevent"]))},[r("div",ao,[n(S,{class:"p-2",content:e.__("help_lang")},{default:d(()=>[n(k,{class:"text-gray-500 hover:bg-gray-50 w-4 h-4"})]),_:1},8,["content"]),n(u,{ref:"langSelector",class:"grow",name:"lang",items:e.$page.props.langs},null,8,["items"])]),e.isAdmin()&&o.data?(l(),m("div",lo,[n(V,{id:"user",selected:o.form.owner_id,"onUpdate:selected":i[2]||(i[2]=t=>o.form.owner_id=t),preload:o.data.owner},{selector:d(t=>[r("div",{class:_([(t.selectedText,"py-2"),"px-4 border rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[r("div",mo,s(t.selectedText??e.__("select_owner")),1),t.selectedText?(l(),m("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(y=>t.clear(),["stop"])},[n(T,{class:"w-5 h-5"})],8,po)):p("",!0)],2)]),_:1},8,["selected","preload"])])):p("",!0),r("div",co,[n(h,{id:"name",type:"text",placeholder:e.__("title"),classes:"  ",modelValue:o.form.name,"onUpdate:modelValue":i[3]||(i[3]=t=>o.form.name=t),autocomplete:"name",error:o.form.errors.name},{prepend:d(()=>[r("div",_o,[n(C,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),r("div",fo,[n(B,{ref:"categorySelector",data:e.$page.props.categories,label:e.__("category"),id:"category_id",modelValue:o.form.category_id,"onUpdate:modelValue":i[4]||(i[4]=t=>o.form.category_id=t)},{append:d(()=>[r("div",uo,[n(P,{class:"h-5 w-5"})])]),_:1},8,["data","label","modelValue"])]),r("div",go,[n(U,{ref:"tags",id:"tags",placeholder:e.__("tags"),classes:"  ",modelValue:o.form.tags,"onUpdate:modelValue":i[5]||(i[5]=t=>o.form.tags=t),autocomplete:"tags",error:o.form.errors.tags},null,8,["placeholder","modelValue","error"])]),r("div",ho,[n(h,{multiline:!0,id:"description",type:"text",placeholder:e.__("description"),classes:"  ",modelValue:o.form.description,"onUpdate:modelValue":i[6]||(i[6]=t=>o.form.description=t),autocomplete:"description",error:o.form.errors.description},{prepend:d(()=>[r("div",yo,[n(E,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),o.form.progress?(l(),m("div",vo,[r("div",{class:_(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":o.form.progress.percentage<100}]),style:z(`width: ${o.form.progress.percentage}%`)},[r("span",bo,s(o.form.progress.percentage),1)],6)])):p("",!0),r("div",wo,[n(M,{class:_(["w-full",{"opacity-25":o.form.processing}]),onClick:i[7]||(i[7]=f(t=>e.isAdmin()?c.submit():e.showDialog("primary",e.__("will_active_after_review"),e.__("ok"),c.submit),["prevent"])),disabled:o.form.processing},{default:d(()=>[o.form.processing?(l(),v(L,{key:0,class:"w-4 h-4 mx-3"})):p("",!0),r("span",jo,s(e.__("register_info")),1)]),_:1},8,["class","disabled"])])],32)])])])]),_:1})}const hr=de(xe,[["render",xo]]);export{hr as default};
