import"./Scaffold-DWvcdxbt.js";import{P as E}from"./Panel-B14SxVgH.js";import{Z as M,j as N,i as p,o as r,c as C,w as u,a as e,t as i,b as d,g as x,e as c,h as b,F as v,k as w,G as U,J as L,A as S,f as h,n as D}from"./app-COCv_6FM.js";import{P as V,r as B}from"./Pagination-B7Lk-YHC.js";import{r as z,I as G}from"./Footer-B5OFFhHa.js";import{T as q}from"./Tooltip-D0OChXnj.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as F}from"./ShoppingBagIcon-DdettYi9.js";import{r as H}from"./Bars2Icon-CXJclUCF.js";import{r as K}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as J}from"./CartItemButton-ClgMcctk.js";import"./Alert-eYSKKEf0.js";import"./LoadingIcon-PyLCRR-O.js";import"./ApplicationLogo-DT4XYSyB.js";import"./TextInput-K5DGNw4r.js";import"./InputLabel-DWU22C58.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./QuestionMarkCircleIcon-56s_3IWs.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";const Z={data(){return{params:{page:1,search:null,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},components:{Head:M,Link:N,HomeIcon:F,ChevronDownIcon:z,Panel:E,Bars2Icon:H,Image:G,MagnifyingGlassIcon:K,XMarkIcon:J,Pagination:V,ArrowsUpDownIcon:B,Tooltip:q},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.data=[],window.axios.get(route("admin.panel.repository.search"),{params:this.params},{}).then(t=>{this.data=t.data.data,this.data.forEach(a=>{a.selected=!1}),delete t.data.data,this.pagination=t.data,this.$nextTick(()=>{this.initTableDropdowns()})}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data?t.response.data.message?t.response.data.message:t.response.data:this.__("response_error")):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",this.error)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},edit(t){this.isLoading(!0),window.axios.patch(route("admin.panel.repository.update"),t,{}).then(a=>{a.data&&a.data.message&&this.showToast("success",a.data.message),a.data.charge&&(this.data[t.idx].charge=a.data.charge,this.user.wallet=a.data.wallet),a.data.status&&(this.data[t.idx].status=a.data.status),a.data.view_fee&&(this.data[t.idx].view_fee=a.data.view_fee),a.data.meta&&(this.data[t.idx].meta=a.data.meta,this.user.meta_wallet=a.data.meta_wallet)}).catch(a=>{this.error=this.getErrors(a),a.response&&a.response.data&&(a.response.data.charge&&(this.data[t.idx].charge=a.response.data.charge),a.response.data.view_fee&&(this.data[t.idx].view_fee=a.response.data.view_fee),a.response.data.meta&&(this.data[t.idx].meta=a.response.data.meta)),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(l=>l.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const a={cmnd:t,data:this.data.reduce((l,g)=>(g.selected&&l.push(g.id),l),[])};window.axios.patch(route("admin.panel.repository.update"),a,{}).then(l=>{if(l.data&&l.data.message&&this.showToast("success",l.data.message),l.data&&l.data.results){const g=l.data.results;for(let o in this.data)for(let n in g)if(g[n].id==this.data[o].id){this.data[o].status=g[n].status;break}}}).catch(l=>{this.error=this.getErrors(l),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})}}},O={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},Q={class:"flex"},R={class:"font-semibold"},W={class:"px-2 flex flex-col md:px-4"},Y={class:"flex-col bg-white overflow-x-auto shadow-lg rounded-lg"},$={class:"flex items-center justify-between py-4 p-4"},ee={class:"relative mx-1","data-te-dropdown-ref":""},te={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},se=e("span",{class:"sr-only"},"table actions",-1),ae={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},oe={class:"flex items-center"},ie={class:"relative mx-1","data-te-dropdown-ref":""},ne={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},re=e("span",{class:"sr-only"},"table actions",-1),le={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},de={class:""},ce=["onClick"],pe=e("hr",{class:"border-gray-200"},null,-1),ge={class:"relative"},he=e("label",{for:"table-search",class:"sr-only"},"Search",-1),ue={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},_e=["placeholder"],me={class:"w-full text-sm text-left text-gray-500"},ye={class:"sticky top-0 text-xs text-gray-700 uppercase bg-gray-50"},fe={class:"text-sm text-center"},xe={class:"flex items-center"},be=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),ve={class:"flex items-center justify-center"},we={class:"px-2"},ke={class:"flex items-center justify-center"},Ce={class:"px-2"},Se={class:"flex items-center justify-center"},De={class:"px-2"},Ie={class:"flex items-center justify-center"},Ae={class:"px-2"},je={scope:"col",class:"px-2 py-3"},Te={class:"text-xs"},Pe={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},Ee=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),Me=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),Ne=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ue=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Le=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ve=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),Be=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ze=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),Ge=[Ee,Me,Ne,Ue,Le,Ve,Be,ze],qe=["onClick"],Xe={class:"flex items-center"},Fe=["onUpdate:modelValue"],He={class:"flex items-center px-2 py-4 text-gray-900 whitespace-nowrap"},Ke={class:"text-sm font-semibold"},Je={class:"font-normal text-gray-500"},Ze={class:"px-2 py-4"},Oe={class:"px-2 py-4"},Qe={key:0},Re={key:1},We={key:2},Ye={class:"px-2 py-4","data-te-dropdown-ref":""},$e=["id"],et=["aria-labelledby"],tt=["onClick"],st={class:"flex items-center text-danger px-6 py-2 justify-between"},at=e("span",{class:"bg-danger mx-1 animate-pulse px-1 py-1 rounded"},null,-1),ot=e("hr",{class:"border-gray-200"},null,-1),it={key:1,role:"menuitem",class:"cursor-pointer text-sm text-gray-500 transition-colors hover:bg-gray-100"},nt={class:"flex items-center px-6 py-2 justify-between"},rt={key:0},lt={key:1},dt=e("hr",{class:"border-gray-200"},null,-1),ct=["onClick"],pt={class:"flex items-center px-6 py-2 justify-between"},gt=e("hr",{class:"border-gray-200"},null,-1),ht={class:"px-2 py-4"},ut={class:"inline-flex rounded-md shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]",role:"group"};function _t(t,a,l,g,o,n){const I=p("Bars2Icon"),_=p("Link"),k=p("ChevronDownIcon"),A=p("Pagination"),j=p("MagnifyingGlassIcon"),T=p("XMarkIcon"),m=p("ArrowsUpDownIcon"),P=p("Panel");return r(),C(P,null,{header:u(()=>[e("title",null,i(t.__("panel")),1)]),content:u(()=>[e("div",O,[e("div",Q,[d(I,{class:"h-7 w-7 mx-3"}),e("h5",R,i(t.__("repositories_list")),1)]),e("div",null,[d(_,{href:t.route("admin.panel.repository.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[x(i(t.__("new_repository")),1)]),_:1},8,["href"])])]),e("div",W,[e("div",Y,[e("div",$,[e("div",null,[e("div",ee,[e("button",te,[se,e("span",null,i(t.__("bulk_actions")),1),d(k,{class:"h-4 w-4 mx-1"})]),e("div",ae,null,512)])]),e("div",oe,[e("div",ie,[e("button",ne,[re,e("span",null,i(o.params.paginate),1),d(k,{class:"h-4 w-4 mx-1"})]),e("div",le,[(r(!0),c(v,null,b(t.$page.props.pageItems,s=>(r(),c("div",de,[e("div",{onClick:y=>{o.params.paginate=s,n.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},i(s),9,ce),pe]))),256))],512)]),d(A,{onPaginationChanged:n.paginationChanged,pagination:o.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",ge,[he,e("div",ue,[d(j,{onClick:a[0]||(a[0]=s=>n.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:a[1]||(a[1]=s=>{o.params.search=null,n.getData()})},[d(T,{class:"w-4 h-4"})]),w(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":a[2]||(a[2]=s=>o.params.search=s),onKeydown:a[3]||(a[3]=L(s=>n.getData(),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,_e),[[U,o.params.search]])])]),e("table",me,[e("thead",ye,[e("tr",fe,[e("th",{scope:"col",class:"p-4",onClick:a[5]||(a[5]=(...s)=>n.toggleAll&&n.toggleAll(...s))},[e("div",xe,[w(e("input",{id:"checkbox-all-search",type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=s=>o.toggleSelect=s),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[S,o.toggleSelect]]),be])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:a[6]||(a[6]=s=>{o.params.order_by="name",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",ve,[e("span",we,i(t.__("title")),1),d(m,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:a[7]||(a[7]=s=>{o.params.order_by="agency_id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",ke,[e("span",Ce,i(t.__("agency")),1),d(m,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:a[8]||(a[8]=s=>{o.params.order_by="county_id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Se,[e("span",De,i(t.__("city")),1),d(m,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:a[9]||(a[9]=s=>{o.params.order_by="status",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Ie,[e("span",Ae,i(t.__("status")),1),d(m,{class:"w-4 h-4"})])]),e("th",je,i(t.__("actions")),1)])]),e("tbody",Te,[o.loading?(r(),c(v,{key:0},b(3,s=>e("tr",Pe,Ge)),64)):h("",!0),(r(!0),c(v,null,b(o.data,(s,y)=>(r(),c("tr",{class:D(["text-center border-b hover:bg-gray-50",{"bg-gray-50":y%2==1}])},[e("td",{class:"w-4 p-4",onClick:f=>s.selected=!s.selected},[e("div",Xe,[w(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":f=>s.selected=f,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,Fe),[[S,s.selected]])])],8,qe),e("td",He,[d(_,{class:"px-2 hover:text-gray-500",href:t.route("admin.panel.repository.edit",s.id)},{default:u(()=>[e("div",Ke,i(t.cropText(s.name,30)),1),e("div",Je,i(),1)]),_:2},1032,["href"])]),e("td",Ze,[s.agency?(r(),C(_,{key:0,class:"hover:text-primary-500",href:t.route("admin.panel.agency.edit",s.agency_id)},{default:u(()=>[x(i(s.agency.name),1)]),_:2},1032,["href"])):h("",!0)]),e("td",Oe,[s.district_id?(r(),c("span",Qe,i(t.getCityName(s.county_id)+"/"+t.getCityName(s.district_id)),1)):s.county_id?(r(),c("span",Re,i(t.getCityName(s.province_id)+"/"+t.getCityName(s.county_id)),1)):(r(),c("span",We,i(t.getCityName(s.province_id)),1))]),e("td",Ye,[e("button",{id:`dropdownStatusSetting${s.id}`,"data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:D(["min-w-[5rem] px-1 cursor-pointer items-center text-center rounded-md py-[.2rem]",`bg-${t.getStatus("repository",s.status).color}-100 hover:bg-${t.getStatus("repository",s.status).color}-200 text-${t.getStatus("repository",s.status).color}-500`])},i(t.getStatus("repository",s.status).name),11,$e),e("ul",{ref_for:!0,ref:`statusMenu${s.id}`,"data-te-dropdown-menu-ref":"",class:"absolute z-[1000] m-0 hidden list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-center text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":`dropdownStatusSetting${s.id}`},[s.status=="active"?(r(),c("li",{key:0,role:"menuitem",onClick:f=>n.edit({idx:y,id:s.id,cmnd:"inactive"}),class:"cursor-pointer text-sm transition-colors hover:bg-gray-100"},[e("div",st,[at,x(" "+i(t.__("inactive")),1)]),ot],8,tt)):h("",!0),s.status=="review"||s.status=="block"?(r(),c("li",it,[e("div",nt,[s.status=="review"?(r(),c("span",rt,i(t.__("active_after_review")),1)):h("",!0),s.status=="block"?(r(),c("span",lt,i(t.__("not_available")),1)):h("",!0)]),dt])):h("",!0),s.status=="inactive"?(r(),c("li",{key:2,role:"menuitem",onClick:f=>n.edit({idx:y,id:s.id,cmnd:"activate"}),class:"cursor-pointer text-sm text-primary-500 transition-colors hover:bg-gray-100"},[e("div",pt,i(t.__("activate")),1),gt],8,ct)):h("",!0)],8,et)]),e("td",ht,[e("div",ut,[d(_,{type:"button",href:t.route("admin.panel.repository.edit",s.id),class:"inline-block rounded bg-orange-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-orange-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},{default:u(()=>[x(i(t.__("edit")),1)]),_:2},1032,["href"])])])],2))),256))])])])])]),_:1})}const Bt=X(Z,[["render",_t]]);export{Bt as default};
