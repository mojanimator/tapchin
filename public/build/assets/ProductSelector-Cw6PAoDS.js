import{o as s,e as a,a as r,D as C,i as d,b as l,t as i,F as f,h as m,g as M,n as $,f as _,l as b,k as D,v as L,c as V}from"./app-COCv_6FM.js";import{_ as B,a as N}from"./InputLabel-DWU22C58.js";import{_ as P}from"./TextInput-K5DGNw4r.js";import{L as S}from"./LoadingIcon-PyLCRR-O.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as E}from"./MapPinIcon-DwZhsMsl.js";import{r as R}from"./Bars2Icon-CXJclUCF.js";import{r as z,a as A}from"./ChevronRightIcon-B7nF-CoK.js";import{r as F}from"./CartItemButton-ClgMcctk.js";function O(e,t){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"})])}const X={data(){return{params:{},currentLevel:0,currentData:{id:0,parent_id:0,level:0},selecteds:[],loading:!1,data:[]}},props:["id","link","label","preload","modelValue","multi","error"],emits:["change","update:modelValue","change"],components:{InputLabel:B,MapPinIcon:E,Bars2Icon:R,TextInput:P,LoadingIcon:S,ChevronLeftIcon:z,ChevronRightIcon:A,XMarkIcon:F,InputError:N,CursorArrowRaysIcon:O},mounted(){const e=document.getElementById("productSelectorModal");if(this.modal=new C(e),this.preload){this.selecteds=[];for(let t in this.preload)this.selecteds.push({id:this.preload[t].id,name:this.createName(this.preload[t])});this.$emit("update:modelValue",this.myMap(this.selecteds,t=>t.id)),this.$emit("change",this.data.filter(t=>t.parent_id!=0&&this.selecteds.map(n=>n.id).indexOf(t.id)>-1))}},methods:{createName(e){return e?`${e.name} | ${this.getPack(e.pack_id)} | ${this.__("grade")} ${e.grade} | ${parseFloat(e.weight)} ${this.__("kg")} `:""},remove(e){this.selecteds.splice(e,1),this.$emit("update:modelValue",this.myMap(this.selecteds,t=>t.id)),this.$emit("change",this.data.filter(t=>t.parent_id!=0&&this.selecteds.map(n=>n.id).indexOf(t.id)>-1))},reset(){this.getData(),this.currentLevel=1,this.currentData={id:0,parent_id:0}},back(){this.currentData.parent_id>0?(this.currentData=this.data.filter(e=>e.id==this.currentData.parent_id)[0],this.currentLevel=this.currentData.level):this.currentData={id:0,parent_id:0,level:0}},selectData(e){this.data.filter(t=>e.parent_id==0&&e.id==t.parent_id).length==0?this.selecteds.filter(t=>e.parent_id!=0&&e.id==t.id).length==0?this.selecteds.push({id:e.id,name:this.createName(e)}):this.selecteds=this.selecteds.filter(t=>e.id!=t.id):(this.currentData=e,this.currentLevel++),this.$emit("update:modelValue",this.myMap(this.selecteds,t=>t.id)),this.$emit("change",this.data.filter(t=>t.parent_id!=0&&this.selecteds.map(n=>n.id).indexOf(t.id)>-1))},getData(){this.loading=!0,this.data=[],window.axios.get(this.link,{params:this.params},{}).then(e=>{this.data=e.data,delete e.data}).catch(e=>{e.response?this.errors=e.response.data:e.request?this.errors=e.request:this.errors=e.message}).finally(()=>{this.loading=!1})}}},q={class:""},H={key:0},T={key:1},G={class:"flex flex-wrap"},J=["onClick"],K={class:"p-1 rounded-full"},Q={"data-te-modal-init":"",class:"fixed left-0 top-0 backdrop-blur z-[1055] hidden h-full w-full overflow-y-auto overflow-x-hidden outline-none",id:"productSelectorModal",tabindex:"-1","aria-labelledby":"productSelectorModalLabel","aria-hidden":"true"},U={"data-te-modal-dialog-ref":"",class:"max-w-2xl pointer-events-none relative w-auto translate-y-[-50px] opacity-0 transition-all duration-300 ease-in-out min-[576px]:mx-auto min-[576px]:mt-7 px-2 sm:px-4 md:px8 min-[576px]:max-w-5xl"},W={class:"min-[576px]:shadow-[0_0.5rem_1rem_rgba(#000, 0.15)] pointer-events-auto relative flex w-full flex-col rounded-md border-none bg-white bg-clip-padding text-current shadow-lg outline-none max-w-xl mx-auto"},Y={class:"flex flex-shrink-0 items-center justify-between rounded-t-md border-b-2 border-neutral-100 border-opacity-100 p-4"},Z={class:"text-lg text-primary-500 flex items-center font-medium leading-normal text-neutral-600",id:"productSelectorModalLabel"},ee=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),te=[ee],re={class:"relative p-4","data-te-modal-body-ref":""},oe={class:"sticky items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},se={class:"text-xs"},ae={class:"flex flex-wrap"},ne=["onClick"],ce={class:"px-2 md:px-4"},ie={class:"mx-auto md:max-w-3xl mt-6 px-2 md:px-4 py-4 overflow-hidden rounded-lg"},de={class:"flex flex-col mx-2 col-span-2 w-full px-2"},le=["onClick"],he={class:"flex items-center"},ue={class:"mb-[0.125rem] block min-h-[1.5rem] pl-[1.5rem]",dir:"ltr"},pe=["for"],fe={key:0},me={key:1},_e=["id","checked"];function be(e,t,n,xe,c,h){const k=d("InputLabel"),v=d("CursorArrowRaysIcon"),x=d("XMarkIcon"),g=d("InputError"),w=d("MapPinIcon"),y=d("ChevronRightIcon"),I=d("ChevronLeftIcon");return s(),a("div",q,[l(k,{for:n.id,value:n.label},null,8,["for","value"]),r("div",{class:"rounded text-primary-500 items-center border border-neutral-300 hover:cursor-pointer p-2 hover:bg-gray-50 text-gray-500",onClick:t[0]||(t[0]=o=>{h.reset(),e.modal.show()})},[l(v,{class:"h-4 w-4 mx-1"}),c.selecteds.length==0?(s(),a("div",H,i(`0 ${e.__("product")}`),1)):(s(),a("div",T,[r("span",null,i(`${c.selecteds.length} ${e.__("product")}`),1),r("div",G,[(s(!0),a(f,null,m(c.selecteds,(o,u)=>(s(),a("div",{onClick:b(p=>h.remove(u),["stop"]),class:"flex ms-1 mt-1 bg-primary-500 text-white rounded px-1"},[r("span",null,i(o.name),1),r("span",K,[l(x,{class:"h-4 w-4"})])],8,J))),256))])]))]),l(g,{class:"mt-1",message:n.error},null,8,["message"]),r("div",Q,[r("div",U,[r("div",W,[r("div",Y,[r("h5",Z,[l(w,{class:"h-7 w-7 mx-3"}),M(" "+i(e.__("product_select")),1)]),r("button",{class:$(["text-danger","box-content rounded-none border-none hover:no-underline hover:opacity-75 focus:opacity-100 focus:shadow-none focus:outline-none"]),type:"button","data-te-modal-dismiss":"","aria-label":"Close"},te)]),r("div",re,[r("div",oe,[r("div",se,[r("span",null,i(`${c.selecteds.length} ${e.__("product")}`),1),r("div",ae,[(s(!0),a(f,null,m(c.selecteds,(o,u)=>(s(),a("div",{onClick:b(p=>h.remove(u),["stop"]),class:"flex items-center ms-1 mt-1 hover:bg-primary-400 cursor-pointer bg-primary-500 text-white rounded px-1"},[r("span",null,i(o.name),1),l(x,{class:"my-1 h-4 w-4"})],8,ne))),256))])])]),r("div",ce,[r("div",ie,[r("div",de,[r("ul",null,[c.currentData.has_child?(s(),a("li",{key:0,onClick:t[1]||(t[1]=o=>h.back()),class:"p-3 px-3 border-b flex text-gray-600 items-center justify-between hover:bg-gray-100 rounded hover:cursor-pointer"},[r("span",null,i(e.__("return")),1),l(y,{class:"w-4 h-4"})])):_("",!0),(s(!0),a(f,null,m(c.data,(o,u)=>D((s(),a("li",{onClick:p=>h.selectData(o),class:"p-2 px-3 flex items-center justify-between hover:bg-gray-100 rounded hover:cursor-pointer"},[r("div",he,[r("div",ue,[r("label",{onClick:t[2]||(t[2]=b(()=>{},["stop"])),class:"inline-block select-none mx-2 hover:cursor-pointer",for:`checkProduct${o.id}`},[o.has_child?(s(),a("div",fe,i(o.name),1)):(s(),a("div",me,i(h.createName(o)),1))],8,pe),o.has_child?_("",!0):(s(),a("input",{key:0,class:"relative float-end h-[1.125rem] w-[1.125rem] appearance-none rounded-[0.25rem] border-[0.125rem] border-solid border-neutral-300 outline-none before:pointer-events-none before:absolute before:h-[0.875rem] before:w-[0.875rem] before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-[0px_0px_0px_13px_transparent] before:content-[''] checked:border-primary-500 checked:bg-primary-500 checked:before:opacity-[0.16] checked:after:absolute checked:after:-mt-px checked:after:ml-[0.25rem] checked:after:block checked:after:h-[0.8125rem] checked:after:w-[0.375rem] checked:after:rotate-45 checked:after:border-[0.125rem] checked:after:border-l-0 checked:after:border-t-0 checked:after:border-solid checked:after:border-white hover:checked:bg-primary-500 checked:after:bg-transparent checked:after:content-[''] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:shadow-none focus:transition-[border-color_0.2s] focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-[0.875rem] focus:after:w-[0.875rem] focus:after:rounded-[0.125rem] focus:after:content-[''] checked:focus:before:scale-100 checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:after:-mt-px checked:focus:after:ml-[0.25rem] checked:focus:after:h-[0.8125rem] checked:focus:after:w-[0.375rem] checked:focus:after:rotate-45 checked:focus:after:rounded-none checked:focus:after:border-[0.125rem] checked:focus:after:border-l-0 checked:focus:after:border-t-0 checked:focus:after:border-solid checked:focus:after:border-white checked:focus:after:bg-transparent dark:border-neutral-600 dark:checked:border-primary-500 dark:checked:bg-primary-500 dark:focus:before:shadow-[0px_0px_0px_13px_rgba(255,255,255,0.4)] dark:checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca]",type:"checkbox",value:"",id:`checkProduct${o.id}`,checked:c.selecteds.filter(p=>p.id==o.id).length>0},null,8,_e))])]),o.has_child?(s(),V(I,{key:0,class:"w-4 h-4"})):_("",!0)],8,le)),[[L,o.parent_id==c.currentData.id]])),256))])])])])])])])])])}const De=j(X,[["render",be]]);export{De as P};
