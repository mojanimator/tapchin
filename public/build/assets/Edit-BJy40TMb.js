import"./Scaffold-DWvcdxbt.js";import{P as w,a as $}from"./Panel-B14SxVgH.js";import{T as C,Z as P,j as S,i as a,o as d,c as u,w as m,a as o,t as n,b as i,l as f,n as l,e as _,f as c,p as T}from"./app-COCv_6FM.js";import{_ as D}from"./Checkbox-CBncJiFN.js";import"./GuestLayout-BDT4xVuL.js";import{_ as B,a as U}from"./InputLabel-DWU22C58.js";import{_ as L}from"./PrimaryButton-zI18mNha.js";import{_ as E}from"./TextInput-K5DGNw4r.js";import{R as F}from"./RadioGroup-C0IaMOYL.js";import{L as A}from"./LoadingIcon-PyLCRR-O.js";import{P as M}from"./Popover-BnSFaYHK.js";import{T as j}from"./Tooltip-D0OChXnj.js";import{_ as O}from"./TagInput-BIsym76x.js";import{I as X}from"./ImageUploader-s6j9d9TR.js";import{S as H}from"./Selector-D_Wz8VRX.js";import{P as N}from"./ProvinceCounty-C8K57e0e.js";import{P as V}from"./PhoneFields-BjmCrPkD.js";import{S as z}from"./SocialFields-DiyjC1jc.js";import{T as R}from"./TextEditor-CnO9P51X.js";import{U as q}from"./UserSelector-DX52qDNU.js";import{A as G}from"./AddressSelector-Bg6-VUjw.js";import{C as Q}from"./CitySelector-dPFDIOiq.js";import{P as Z}from"./ProductSelector-Cw6PAoDS.js";import{O as J}from"./OrderSelector-BZvje85_.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as W}from"./ShoppingBagIcon-DdettYi9.js";import{r as Y}from"./Footer-B5OFFhHa.js";import{r as rr}from"./Alert-eYSKKEf0.js";import{r as er}from"./EyeIcon-DDKOnXSf.js";import{r as or}from"./FolderPlusIcon-CThkctZA.js";import{r as sr}from"./Bars2Icon-CXJclUCF.js";import{r as tr}from"./ChatBubbleBottomCenterTextIcon-CDqsO2LX.js";import{r as ar}from"./QuestionMarkCircleIcon-56s_3IWs.js";import{r as ir}from"./Squares2X2Icon-B-hFow5j.js";import{r as nr}from"./SignalIcon-sgS5f9kg.js";import{r as dr}from"./PencilIcon-CQwlpeJo.js";import{r as mr}from"./CartItemButton-ClgMcctk.js";import{r as lr}from"./ClockIcon-Ca9_Bi8-.js";import{r as cr}from"./TrashIcon-CtMFSBd1.js";import{r as pr}from"./PlusIcon-RnmXorVm.js";import"./ApplicationLogo-DT4XYSyB.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./XMarkIcon-CErzUapP.js";import"./PhoneIcon-CmyMHnNp.js";import"./LinkIcon-L57onCYw.js";import"./MinusIcon-7FMvIveB.js";import"./Pagination-B7Lk-YHC.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./MagnifyingGlassIcon-BmWdTLzH.js";import"./geosearch.module-Dvy0ZXuX.js";import"./SearchInput-o3w2TZ-x.js";import"./MapPinIcon-DwZhsMsl.js";import"./MapIcon-zUuRLJSy.js";import"./ChevronUpIcon-BtLkJPMB.js";const fr={data(){return{orderFrom:[this.__("internal"),this.__("external")],data:this.$page.props.data,form:C({id:this.$page.props.data.id,agency_id:this.$page.props.agency.id,driver_id:null,car_id:null,ordersData:[],orders:[],_method:"PATCH"})}},components:{AddressSelector:G,UserSelector:q,ImageUploader:X,LoadingIcon:A,Head:P,Link:S,HomeIcon:W,ChevronDownIcon:Y,Panel:w,InputLabel:B,TextInput:E,InputError:U,PrimaryButton:L,RadioGroup:F,UserIcon:rr,EyeIcon:er,Checkbox:D,Popover:M,Tooltip:j,FolderPlusIcon:or,Bars2Icon:sr,ChatBubbleBottomCenterTextIcon:tr,TagInput:O,QuestionMarkCircleIcon:ar,Selector:H,Squares2X2Icon:ir,ProvinceCounty:N,PhoneFields:V,SocialFields:z,SignalIcon:nr,TextEditor:R,PencilIcon:dr,XMarkIcon:mr,CitySelector:Q,CurrencyDollarIcon:$,ClockIcon:lr,ProductSelector:Z,TrashIcon:cr,PlusIcon:pr,OrderSelector:J},mounted(){this.form.agency_id=this.data.agency_id,this.form.driver_id=this.data.driver_id,this.form.car_id=this.data.car_id,this.form.orders=this.data.orders},watch:{form(r,t){}},methods:{submit(){this.form.clearErrors(),this.form.orders=this.myMap(this.form.ordersData,r=>({id:r.id,type:r.type,from_agency_id:r.from_agency_id,status:r.status})),this.form.post(route("admin.panel.shipping.update"),{preserveScroll:!1,onSuccess:r=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:r=>{}})}}},_r={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},gr={class:"text-2xl font-semibold"},hr={class:"px-2 md:px-4"},ur={class:"mx-auto md:max-w-2xl lg:max-w-max mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},yr={class:"flex flex-col mx-2 col-span-2 w-full px-2"},br={class:"my-2"},vr={class:"grow"},kr=["onClick"],xr={class:"my-2"},Ir={class:"grow"},wr=["onClick"],$r={class:"my-2"},Cr={key:0,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},Pr={class:"animate-bounce"},Sr={class:"mt-4"},Tr={class:"text-lg"};function Dr(r,t,Br,Ur,s,p){const y=a("FolderPlusIcon"),g=a("XMarkIcon"),h=a("UserSelector"),b=a("OrderSelector"),v=a("LoadingIcon"),k=a("PrimaryButton"),x=a("Panel");return d(),u(x,null,{header:m(()=>[o("title",null,n(r.__("edit_shipping")),1)]),content:m(()=>[o("div",_r,[i(y,{class:"h-7 w-7 mx-3"}),o("h1",gr,n(r.__("edit_shipping")),1)]),o("div",hr,[o("div",ur,[o("div",yr,[o("form",{onSubmit:t[3]||(t[3]=f((...e)=>p.submit&&p.submit(...e),["prevent"]))},[o("div",br,[i(h,{colsData:["fullname","phone","agency"],labelsData:["name","phone","agency"],callback:{level:r.getAgency,agency:e=>`${e.name||""} (${e.id||""})`},error:s.form.errors.driver_id,link:r.route("admin.panel.shipping.driver.search"),label:r.__("driver"),id:"driver",selected:s.form.driver_id,"onUpdate:selected":t[0]||(t[0]=e=>s.form.driver_id=e),preload:r.$page.props.data.driver},{selector:m(e=>[o("div",{class:l([(e.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[o("div",vr,n(e.selectedText??r.__("select")),1),e.selectedText?(d(),_("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(I=>e.clear(),["stop"])},[i(g,{class:"w-5 h-5"})],8,kr)):c("",!0)],2)]),_:1},8,["callback","error","link","label","selected","preload"])]),o("div",xr,[i(h,{colsData:["name","agency"],labelsData:["name","agency"],callback:{level:r.getAgency,agency:e=>`${e.name||""} (${e.id||""})`},error:s.form.errors.car_id,link:r.route("admin.panel.shipping.car.search"),label:r.__("car"),id:"car",selected:s.form.car_id,"onUpdate:selected":t[1]||(t[1]=e=>s.form.car_id=e),preload:r.$page.props.data.car},{selector:m(e=>[o("div",{class:l([(e.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[o("div",Ir,n(e.selectedText??r.__("select")),1),e.selectedText?(d(),_("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(I=>e.clear(),["stop"])},[i(g,{class:"w-5 h-5"})],8,wr)):c("",!0)],2)]),_:1},8,["callback","error","link","label","selected","preload"])]),o("div",$r,[i(b,{error:s.form.errors,updateLink:r.route("admin.panel.shipping.update"),link:r.route("admin.panel.order.merged.search")+`?agency_id=${s.form.agency_id}`,label:r.__("orders"),id:"orders",selecteds:s.form.ordersData,"onUpdate:selecteds":t[2]||(t[2]=e=>s.form.ordersData=e),preload:r.$page.props.data.orders},null,8,["error","updateLink","link","label","selecteds","preload"])]),s.form.progress?(d(),_("div",Cr,[o("div",{class:l(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":s.form.progress.percentage<100}]),style:T(`width: ${s.form.progress.percentage}%`)},[o("span",Pr,n(s.form.progress.percentage),1)],6)])):c("",!0),o("div",Sr,[i(k,{onClick:p.submit,type:"button",class:l(["w-full flex items-center justify-center",{"opacity-25":s.form.processing}]),disabled:s.form.processing},{default:m(()=>[s.form.processing?(d(),u(v,{key:0,class:"w-4 h-4 mx-3"})):c("",!0),o("span",Tr,n(r.__("register_info")),1)]),_:1},8,["onClick","class","disabled"])])],32)])])])]),_:1})}const Le=K(fr,[["render",Dr]]);export{Le as default};
