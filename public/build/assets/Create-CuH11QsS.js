import"./Scaffold-DWvcdxbt.js";import{P as T}from"./Panel-B14SxVgH.js";import{T as $,Z as C,j as B,i as t,o as m,c as _,w as p,a as e,t as a,b as n,l as S,e as d,n as h,p as E,f as g,h as F,F as L,g as V}from"./app-COCv_6FM.js";import{_ as M}from"./Checkbox-CBncJiFN.js";import"./GuestLayout-BDT4xVuL.js";import{T as N}from"./Tooltip-D0OChXnj.js";import{_ as X,a as A}from"./InputLabel-DWU22C58.js";import{_ as D}from"./PrimaryButton-zI18mNha.js";import{_ as q}from"./TextInput-K5DGNw4r.js";import{R as z}from"./RadioGroup-C0IaMOYL.js";import{L as H}from"./LoadingIcon-PyLCRR-O.js";import{P as O}from"./Popover-BnSFaYHK.js";import{S as R}from"./Selector-D_Wz8VRX.js";import{T as U}from"./TextEditor-CnO9P51X.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as Q}from"./ShoppingBagIcon-DdettYi9.js";import{r as Z}from"./Footer-B5OFFhHa.js";import{r as J}from"./Alert-eYSKKEf0.js";import{r as K}from"./EyeIcon-DDKOnXSf.js";import{r as W}from"./FolderPlusIcon-CThkctZA.js";import{r as Y}from"./Bars2Icon-CXJclUCF.js";import{r as ee}from"./ChatBubbleBottomCenterTextIcon-CDqsO2LX.js";import{r as oe}from"./QuestionMarkCircleIcon-56s_3IWs.js";import{r as se}from"./Squares2X2Icon-B-hFow5j.js";import{r as re}from"./SignalIcon-sgS5f9kg.js";import{r as te}from"./PencilIcon-CQwlpeJo.js";import{r as ne}from"./PlusIcon-RnmXorVm.js";import{r as ie}from"./CartItemButton-ClgMcctk.js";import"./ApplicationLogo-DT4XYSyB.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./MinusIcon-7FMvIveB.js";const ae={data(){return{form:$({subject:null,message:null}),files:[null]}},components:{LoadingIcon:H,Head:C,Link:B,HomeIcon:Q,ChevronDownIcon:Z,Panel:T,InputLabel:X,TextInput:q,InputError:A,PrimaryButton:D,RadioGroup:z,UserIcon:J,EyeIcon:K,Checkbox:M,Popover:O,Tooltip:N,FolderPlusIcon:W,Bars2Icon:Y,ChatBubbleBottomCenterTextIcon:ee,QuestionMarkCircleIcon:oe,Selector:R,Squares2X2Icon:se,SignalIcon:re,PencilIcon:te,TextEditor:U,PlusIcon:ne,XMarkIcon:ie},mounted(){},methods:{submit(){let o=document.querySelectorAll("input[type=file]"),r=[];for(let i in o)o[i].files&&o[i].files.length>0&&r.push(o[i].files[0]);this.form.message=this.$refs.text.getData(),this.form.uploading=!1,this.form.clearErrors(),this.form.post(route(`${this.isAdmin()?"admin":"user"}.panel.ticket.create`),{preserveScroll:!1,onSuccess:i=>{this.form.uploading||(this.form.uploading=!0,this.form.transform(c=>({...c,uploading:!0,attachments:r})).post(route(`${this.isAdmin()?"admin":"user"}.panel.ticket.create`),{preserveScroll:!1,onSuccess:c=>{},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:c=>{}}))},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:i=>{}})}},watch:{}},le={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},me={class:"text-2xl font-semibold"},ce={class:"px-2 md:px-4"},pe={class:"mx-auto md:max-w-3xl mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},de={class:"flex flex-col mx-2 col-span-2 w-full px-2"},fe={class:"my-2"},ue={class:"p-3"},_e={class:"my-2"},he={key:0,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},ge={class:"animate-bounce"},xe={class:"my-4 flex flex-col"},be={class:"flex items-center"},ye={class:"text-gray-700 my-2"},ve=e("div",{class:"border-b w-full mb-2"},null,-1),we={class:"flex justify-between items-center"},Ie=["id","accept"],ke={class:"mt-4"},Pe={class:"text-lg"};function je(o,r,i,c,s,f){const x=t("FolderPlusIcon"),b=t("Bars2Icon"),y=t("TextInput"),v=t("TextEditor"),w=t("XMarkIcon"),I=t("PlusIcon"),k=t("LoadingIcon"),P=t("PrimaryButton"),j=t("Panel");return m(),_(j,null,{header:p(()=>[e("title",null,a(o.__("new_ticket")),1)]),content:p(()=>[e("div",le,[n(x,{class:"h-7 w-7 mx-3"}),e("h1",me,a(o.__("new_ticket")),1)]),e("div",ce,[e("div",pe,[e("div",de,[e("form",{onSubmit:r[2]||(r[2]=S((...l)=>f.submit&&f.submit(...l),["prevent"]))},[e("div",fe,[n(y,{id:"subject",type:"text",placeholder:o.__("subject"),classes:"  ",modelValue:s.form.subject,"onUpdate:modelValue":r[0]||(r[0]=l=>s.form.subject=l),autocomplete:"subject",error:s.form.errors.subject},{prepend:p(()=>[e("div",ue,[n(b,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),e("div",_e,[n(v,{label:o.__("message"),mode:"simple",lang:o.$page.props.locale,id:"editor",ref:"text",error:s.form.errors.message},null,8,["label","lang","error"])]),s.form.progress?(m(),d("div",he,[e("div",{class:h(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":s.form.progress.percentage<100}]),style:E(`width: ${s.form.progress.percentage}%`)},[e("span",ge,a(s.form.progress.percentage),1)],6)])):g("",!0),e("div",xe,[e("div",be,[e("div",ye,a(o.__("attachments")),1)]),ve,(m(!0),d(L,null,F(s.files,(l,u)=>(m(),d("div",null,[e("div",we,[e("input",{id:`attachment-${u}`,class:"w-full my-1",accept:o.$page.props.attachment_allowed_mimes,type:"file",name:"attachments"},null,8,Ie),n(w,{onClick:Te=>{s.files.splice(u,1)},class:"w-6 h-6 text-danger cursor-pointer hover:scale-[112%] hover:text-danger-500"},null,8,["onClick"])])]))),256)),e("div",{class:"flex w-fit text-sm items-center text-white cursor-pointer bg-success hover:bg-success-500 rounded p-2 my-2",onClick:r[1]||(r[1]=l=>s.files.push(null))},[n(I,{class:"h-4 w-4 mx-1"}),V(" "+a(o.__("add_more")),1)])]),e("div",ke,[n(P,{class:h(["w-full flex justify-center items-center",{"opacity-25":s.form.processing}]),disabled:s.form.processing},{default:p(()=>[s.form.processing?(m(),_(k,{key:0,class:"w-4 h-4 mx-3"})):g("",!0),e("span",Pe,a(o.__("register_info")),1)]),_:1},8,["class","disabled"])])],32)])])])]),_:1})}const io=G(ae,[["render",je]]);export{io as default};
