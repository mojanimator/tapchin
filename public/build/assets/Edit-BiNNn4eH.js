import"./Scaffold-DWvcdxbt.js";import{P as U,r as $}from"./Panel-B14SxVgH.js";import{T as B,Z as E,j as L,i as a,o as l,c as h,w as n,a as r,t as m,b as i,l as c,e as u,n as f,f as d,p as j}from"./app-COCv_6FM.js";import{_ as A}from"./Checkbox-CBncJiFN.js";import"./GuestLayout-BDT4xVuL.js";import{_ as M,a as R}from"./InputLabel-DWU22C58.js";import{_ as q}from"./PrimaryButton-zI18mNha.js";import{_ as D}from"./TextInput-K5DGNw4r.js";import{R as F}from"./RadioGroup-C0IaMOYL.js";import{L as X}from"./LoadingIcon-PyLCRR-O.js";import{P as G}from"./Popover-BnSFaYHK.js";import{T as N}from"./Tooltip-D0OChXnj.js";import{_ as z}from"./TagInput-BIsym76x.js";import{I as H}from"./ImageUploader-s6j9d9TR.js";import{S as O}from"./Selector-D_Wz8VRX.js";import{P as Q}from"./ProvinceCounty-C8K57e0e.js";import{P as Z}from"./PhoneFields-BjmCrPkD.js";import{S as J}from"./SocialFields-DiyjC1jc.js";import{A as K}from"./Article-ClNrVETD.js";import{T as W}from"./TextEditor-CnO9P51X.js";import{U as Y}from"./UserSelector-DX52qDNU.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as oe}from"./ShoppingBagIcon-DdettYi9.js";import{r as re}from"./Footer-B5OFFhHa.js";import{r as te}from"./Alert-eYSKKEf0.js";import{r as se}from"./EyeIcon-DDKOnXSf.js";import{r as ae}from"./FolderPlusIcon-CThkctZA.js";import{r as ie}from"./Bars2Icon-CXJclUCF.js";import{r as ne}from"./LinkIcon-L57onCYw.js";import{r as le}from"./QuestionMarkCircleIcon-56s_3IWs.js";import{r as me}from"./Squares2X2Icon-B-hFow5j.js";import{r as pe}from"./SignalIcon-sgS5f9kg.js";import{r as de}from"./ChatBubbleBottomCenterTextIcon-CDqsO2LX.js";import{r as ce}from"./PencilIcon-CQwlpeJo.js";import{r as ue}from"./CartItemButton-ClgMcctk.js";import"./ApplicationLogo-DT4XYSyB.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./PlusIcon-RnmXorVm.js";import"./XMarkIcon-CErzUapP.js";import"./PhoneIcon-CmyMHnNp.js";import"./MinusIcon-7FMvIveB.js";import"./Pagination-B7Lk-YHC.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./Podcast-BgTgi3aO.js";import"./SpeakerXMarkIcon-D8zKgbnz.js";import"./Video-CUwwXX7_.js";import"./Banner-BUcXzEct.js";import"./MagnifyingGlassIcon-BmWdTLzH.js";import"./ChevronUpIcon-BtLkJPMB.js";const fe={data(){return{data:this.$page.props.data||{},form:B({id:this.$page.props.data.id,owner_id:null,owner:null,lang:null,title:null,author:null,link:null,category_id:null,socials:null,tags:null,content:null,summary:"",message:"",status:this.$page.props.data.status}),img:null}},components:{TextEditor:W,ImageUploader:H,LoadingIcon:X,Head:E,Link:L,HomeIcon:oe,ChevronDownIcon:re,Panel:U,InputLabel:M,TextInput:D,InputError:R,PrimaryButton:q,RadioGroup:F,UserIcon:te,EyeIcon:se,Checkbox:A,Popover:G,Tooltip:N,FolderPlusIcon:ae,Bars2Icon:ie,LinkIcon:ne,TagInput:z,QuestionMarkCircleIcon:le,Selector:O,Squares2X2Icon:me,ProvinceCounty:Q,PhoneFields:Z,SocialFields:J,PencilSquareIcon:$,Article:K,SignalIcon:pe,ChatBubbleBottomCenterTextIcon:de,PencilIcon:ce,UserSelector:Y,XMarkIcon:ue},created(){},mounted(){this.form.title=this.data.title,this.form.author=this.data.author,this.form.phone=this.data.phone,this.form.link=this.data.link,this.$refs.tags.set(this.data.tags),this.form.status=this.data.status=="active"?"active":"inactive",this.$refs.statusSelector.selected=this.form.status,this.form.message=this.data.message,this.form.owner=this.data.owner,this.form.owner_id=this.data.owner_id},methods:{submit(){this.form.content=this.$refs.text.getData(),this.form.clearErrors(),this.form.patch(route("panel.admin.article.update"),{preserveScroll:!1,onSuccess:o=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:o=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)}})}}},_e={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},he={class:"text-2xl font-semibold"},ge={class:"px-2 md:px-4"},we={class:"mx-auto md:max-w-5xl mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},ve={class:"flex flex-col mx-2 col-span-2 w-full px-2"},Ie={class:"flex-col m-2 items-center rounded-lg max-w-xs w-full mx-auto"},ye={class:"my-2"},be={class:"my-2"},xe={key:0,class:"my-2"},ke={class:"grow"},Se=["onClick"],Pe={class:"my-2"},Te={class:"p-3"},Ve={class:"my-2"},Ce={class:"p-3"},Ue={class:"my-2"},$e={class:"my-2"},Be={key:1,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},Ee={class:"animate-bounce"},Le={class:"mt-4"},je={class:"text-lg"};function Ae(o,s,Me,Re,e,p){const g=a("PencilSquareIcon"),w=a("ImageUploader"),v=a("InputError"),I=a("RadioGroup"),y=a("XMarkIcon"),b=a("UserSelector"),x=a("Bars2Icon"),_=a("TextInput"),k=a("PencilIcon"),S=a("TagInput"),P=a("TextEditor"),T=a("LoadingIcon"),V=a("PrimaryButton"),C=a("Panel");return l(),h(C,null,{header:n(()=>[r("title",null,m(o.__("edit_article")),1)]),content:n(()=>[r("div",_e,[i(g,{class:"h-7 w-7 mx-3"}),r("h1",he,m(o.__("edit_article")),1)]),r("div",ge,[r("div",we,[r("div",ve,[r("div",Ie,[r("div",ye,[i(w,{replace:o.$page.props.max_images_limit==1,preload:o.route("storage.articles")+`/${o.$page.props.data.id}.jpg`,mode:"edit","for-id":o.$page.props.data.id,link:o.route("panel.admin.article.update"),ref:"imageCropper",label:o.__("image_cover_jpg"),cropRatio:"1.25",id:"img",height:"10",class:"grow"},null,8,["replace","preload","for-id","link","label"]),i(v,{class:"mt-1",message:e.form.errors.img},null,8,["message"])])]),r("form",{onSubmit:s[6]||(s[6]=c((...t)=>p.submit&&p.submit(...t),["prevent"]))},[r("div",be,[i(I,{beforeSelected:e.form.status,ref:"statusSelector",class:"grow",name:"status",modelValue:e.form.status,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.status=t),items:o.myMap(o.$page.props.statuses,t=>t.name)},null,8,["beforeSelected","modelValue","items"])]),o.isAdmin()&&e.data?(l(),u("div",xe,[i(b,{id:"user",selected:e.form.owner_id,"onUpdate:selected":s[1]||(s[1]=t=>e.form.owner_id=t),preload:e.data.owner},{selector:n(t=>[r("div",{class:f([(t.selectedText,"py-2"),"px-4 border rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[r("div",ke,m(t.selectedText??o.__("select_owner")),1),t.selectedText?(l(),u("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:c(qe=>t.clear(),["stop"])},[i(y,{class:"w-5 h-5"})],8,Se)):d("",!0)],2)]),_:1},8,["selected","preload"])])):d("",!0),r("div",Pe,[i(_,{id:"title",type:"text",placeholder:o.__("title"),classes:"  ",modelValue:e.form.title,"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.title=t),autocomplete:"title",error:e.form.errors.title},{prepend:n(()=>[r("div",Te,[i(x,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),r("div",Ve,[i(_,{id:"author",type:"text",placeholder:o.__("author"),classes:"  ",modelValue:e.form.author,"onUpdate:modelValue":s[3]||(s[3]=t=>e.form.author=t),autocomplete:"author",error:e.form.errors.author},{prepend:n(()=>[r("div",Ce,[i(k,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),r("div",Ue,[i(S,{id:"tags",ref:"tags",placeholder:o.__("tags"),classes:"  ",modelValue:e.form.tags,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form.tags=t),autocomplete:"tags",error:e.form.errors.tags},null,8,["placeholder","modelValue","error"])]),r("div",$e,[i(P,{mode:"edit",lang:"fa",id:"editor",preload:e.data.content,ref:"text",label:o.__("article_content"),error:e.form.errors.content},null,8,["preload","label","error"])]),e.form.progress?(l(),u("div",Be,[r("div",{class:f(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":e.form.progress.percentage<100}]),style:j(`width: ${e.form.progress.percentage}%`)},[r("span",Ee,m(e.form.progress.percentage),1)],6)])):d("",!0),r("div",Le,[i(V,{class:f(["w-full",{"opacity-25":e.form.processing}]),onClick:s[5]||(s[5]=c(t=>o.isAdmin()?p.submit():o.showDialog("primary",o.__("will_active_after_review"),o.__("ok"),p.submit),["prevent"])),disabled:e.form.processing},{default:n(()=>[e.form.processing?(l(),h(T,{key:0,class:"w-4 h-4 mx-3"})):d("",!0),r("span",je,m(o.__("register_info")),1)]),_:1},8,["class","disabled"])])],32)])])])]),_:1})}const Ao=ee(fe,[["render",Ae]]);export{Ao as default};
