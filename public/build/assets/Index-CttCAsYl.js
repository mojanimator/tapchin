import"./Scaffold-DWvcdxbt.js";import{P as D}from"./Panel-B14SxVgH.js";import{Z as P,j as S,i as l,o as c,c as T,w as f,a as e,t as i,b as g,e as p,f as x,h,F as m,k as E,G as M,J as B,n as y}from"./app-COCv_6FM.js";import{P as j,r as A}from"./Pagination-B7Lk-YHC.js";import{r as L,I as $}from"./Footer-B5OFFhHa.js";import{_ as G}from"./SecondaryButton-T-3OVGxv.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as V}from"./ShoppingBagIcon-DdettYi9.js";import{r as q}from"./Bars2Icon-CXJclUCF.js";import{r as z}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as N}from"./CartItemButton-ClgMcctk.js";import{r as X}from"./TrashIcon-CtMFSBd1.js";import"./Alert-eYSKKEf0.js";import"./LoadingIcon-PyLCRR-O.js";import"./ApplicationLogo-DT4XYSyB.js";import"./Tooltip-D0OChXnj.js";import"./TextInput-K5DGNw4r.js";import"./InputLabel-DWU22C58.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./QuestionMarkCircleIcon-56s_3IWs.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";const F={data(){return{params:{page:1,search:null,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},components:{SecondaryButton:G,Head:P,Link:S,HomeIcon:V,ChevronDownIcon:L,Panel:D,Bars2Icon:q,Image:$,MagnifyingGlassIcon:z,XMarkIcon:N,Pagination:j,ArrowsUpDownIcon:A,TrashIcon:X},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.data=[],window.axios.get(route("panel.admin.message.search"),{params:this.params},{}).then(t=>{this.data=t.data.data,this.data.forEach(s=>{s.selected=!1}),delete t.data.data,this.pagination=t.data}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",t)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},edit(t){this.isLoading(!0),window.axios.patch(route("panel.admin.message.update"),t,{}).then(s=>{s.data&&s.data.message&&(this.showToast("success",s.data.message),t.cmnd=="remove"&&this.data.splice(t.idx,1))}).catch(s=>{this.error=this.getErrors(s),s.response&&s.response.data,this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(o=>o.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const s={cmnd:t,data:this.data.reduce((o,d)=>(d.selected&&o.push(d.id),o),[])};window.axios.patch(route("notification.update"),s,{onUploadProgress:function(o){},onDownloadProgress:function(o){}}).then(o=>{if(o.data&&o.data.message&&this.showToast("success",o.data.message),o.data&&o.data.results){const d=o.data.results;for(let n in this.data)for(let r in d)if(d[r].id==this.data[n].id){this.data[n].status=d[r].status;break}}}).catch(o=>{this.error=this.getErrors(o),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},createLink(t){return t?t.link?t.link:t.data_id&&t.type?route("/")+"/"+t.type.split("_")[0]+"/edit/"+t.data_id:"":""}}},H={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},K={class:"flex"},J={class:"text-2xl font-semibold"},Z={class:"px-2 flex flex-col md:px-4"},O={class:"flex-col bg-white overflow-x-auto shadow-lg rounded-lg"},Q={class:"flex items-center justify-between py-4 p-4"},R={key:0},W={class:"relative mx-1","data-te-dropdown-ref":""},Y={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ee=e("span",{class:"sr-only"},"table actions",-1),te={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},se={class:"flex items-center"},ae={class:"relative mx-1","data-te-dropdown-ref":""},oe={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ne=e("span",{class:"sr-only"},"table actions",-1),ie={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},re={class:""},de=["onClick"],le=e("hr",{class:"border-gray-200"},null,-1),ce={class:"relative"},ge=e("label",{for:"table-search",class:"sr-only"},"Search",-1),pe={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},he=["placeholder"],me={class:"w-full text-start text-gray-500"},ue={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},_e=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),fe=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),xe=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ye=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),be=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),we=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),ve=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ke=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),Ie=[_e,fe,xe,ye,be,we,ve,ke],Ce={class:"my-1"},De={class:"flex items-center"},Pe={class:"m-1 text-xs text-gray-500"},Se=["onClick"],Te={class:"flex justify-between items-center"},Ee={class:"flex text-sm text-gray-900 items-center"},Me={class:"my-1"},Be=e("div",{class:"mx-2"},"|",-1),je={class:"my-1"},Ae={class:"text-gray-500 text-sm m-2"};function Le(t,s,o,d,n,r){const b=l("Bars2Icon"),u=l("ChevronDownIcon"),w=l("Pagination"),v=l("MagnifyingGlassIcon"),k=l("XMarkIcon"),I=l("TrashIcon"),C=l("Panel");return c(),T(C,null,{header:f(()=>[e("title",null,i(t.__("panel")),1)]),content:f(()=>[e("div",H,[e("div",K,[g(b,{class:"h-7 w-7 mx-3"}),e("h1",J,i(t.__("messages")),1)])]),e("div",Z,[e("div",O,[e("div",Q,[t.isAdmin()?(c(),p("div",R,[e("div",W,[e("button",Y,[ee,e("span",null,i(t.__("bulk_actions")),1),g(u,{class:"h-4 w-4 mx-1"})]),e("div",te,null,512)])])):x("",!0),e("div",se,[e("div",ae,[e("button",oe,[ne,e("span",null,i(n.params.paginate),1),g(u,{class:"h-4 w-4 mx-1"})]),e("div",ie,[(c(!0),p(m,null,h(t.$page.props.pageItems,a=>(c(),p("div",re,[e("div",{onClick:_=>{n.params.paginate=a,r.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},i(a),9,de),le]))),256))],512)]),g(w,{onPaginationChanged:r.paginationChanged,pagination:n.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",ce,[ge,e("div",pe,[g(v,{onClick:s[0]||(s[0]=a=>r.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:s[1]||(s[1]=a=>{n.params.search=null,r.getData()})},[g(k,{class:"w-4 h-4"})]),E(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":s[2]||(s[2]=a=>n.params.search=a),onKeydown:s[3]||(s[3]=B(a=>r.getData(),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,he),[[M,n.params.search]])])]),e("div",me,[n.loading?(c(),p(m,{key:0},h(3,a=>e("div",ue,Ie)),64)):x("",!0),(c(!0),p(m,null,h(n.data,(a,_)=>(c(),p("div",{class:y([`text-${t.getStatus("messages",a.type).color}-500`,"flex flex-col px-2 sm:px-8 py-2 text-start border-b hover:bg-gray-50"])},[e("div",{class:y(["flex justify-between items-center border-b p-1",`border-${t.getStatus("messages",a.type).color}-200`])},[e("div",Ce,i(t.__(a.type)),1),e("div",De,[e("div",Pe,i(t.toShamsi(a.created_at)),1),e("button",{onClick:$e=>t.showDialog("danger",t.__("remove_item?"),t.__("remove"),r.edit,{idx:_,id:a.id,cmnd:"remove"}),class:"w-fit flex rounded text-end bg-red-500 text-white p-2 text-xs font-medium text-white transition duration-150 ease-in-out hover:bg-red-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},[g(I,{class:"w-4 h-4 text-white"})],8,Se)])],2),e("span",Te,[e("div",Ee,[e("div",Me,i(a.fullname),1),Be,e("div",je,i(a.phone),1)])]),e("span",Ae,i(a.description),1)],2))),256))])])])]),_:1})}const rt=U(F,[["render",Le]]);export{rt as default};
