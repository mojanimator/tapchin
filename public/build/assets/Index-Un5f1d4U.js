import"./Scaffold-DWvcdxbt.js";import{P as A}from"./Panel-B14SxVgH.js";import{Z as I,j as P,i as _,o as p,c as C,w as u,a as e,t as r,b as l,g as y,e as h,h as b,F as w,k as v,G as U,J as j,A as B,f as d,n as T}from"./app-COCv_6FM.js";import{P as M,r as K}from"./Pagination-B7Lk-YHC.js";import{r as z,I as L}from"./Footer-B5OFFhHa.js";import{T as F}from"./Tooltip-D0OChXnj.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as W}from"./ShoppingBagIcon-DdettYi9.js";import{r as q}from"./Bars2Icon-CXJclUCF.js";import{r as X}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as H}from"./CartItemButton-ClgMcctk.js";import"./Alert-eYSKKEf0.js";import"./LoadingIcon-PyLCRR-O.js";import"./ApplicationLogo-DT4XYSyB.js";import"./TextInput-K5DGNw4r.js";import"./InputLabel-DWU22C58.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./QuestionMarkCircleIcon-56s_3IWs.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";const J={data(){return{params:{page:1,search:null,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},components:{Head:I,Link:P,HomeIcon:W,ChevronDownIcon:z,Panel:A,Bars2Icon:q,Image:L,MagnifyingGlassIcon:X,XMarkIcon:H,Pagination:M,ArrowsUpDownIcon:K,Tooltip:F},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.data=[],window.axios.get(route("panel.video.search"),{params:this.params},{onUploadProgress:function(t){console.log(t)},onDownloadProgress:function(t){console.log(t)}}).then(t=>{this.data=t.data.data,this.data.forEach(s=>{s.selected=!1}),delete t.data.data,this.pagination=t.data}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",t)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},edit(t){this.isLoading(!0),window.axios.patch(route("video.update"),t,{onUploadProgress:function(s){},onDownloadProgress:function(s){}}).then(s=>{s.data&&s.data.message&&this.showToast("success",s.data.message),s.data.charge&&(this.data[t.idx].charge=s.data.charge,this.user.wallet=s.data.wallet),s.data.status&&(this.data[t.idx].status=s.data.status),s.data.view_fee&&(this.data[t.idx].view_fee=s.data.view_fee),s.data.meta&&(this.data[t.idx].meta=s.data.meta,this.user.meta_wallet=s.data.meta_wallet)}).catch(s=>{this.error=this.getErrors(s),s.response&&s.response.data&&(s.response.data.charge&&(this.data[t.idx].charge=s.response.data.charge),s.response.data.view_fee&&(this.data[t.idx].view_fee=s.response.data.view_fee),s.response.data.meta&&(this.data[t.idx].meta=s.response.data.meta)),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(n=>n.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const s={cmnd:t,data:this.data.reduce((n,g)=>(g.selected&&n.push(g.id),n),[])};window.axios.patch(route("video.update"),s,{onUploadProgress:function(n){},onDownloadProgress:function(n){}}).then(n=>{if(n.data&&n.data.message&&this.showToast("success",n.data.message),n.data&&n.data.results){const g=n.data.results;for(let a in this.data)for(let i in g)if(g[i].id==this.data[a].id){this.data[a].status=g[i].status;break}}}).catch(n=>{this.error=this.getErrors(n),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})}}},Z={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},O={class:"flex"},Q={class:"text-2xl font-semibold"},R={class:"px-2 flex flex-col md:px-4"},Y={class:"flex-col bg-white overflow-x-auto shadow-lg rounded-lg"},ee={class:"flex items-center justify-between py-4 p-4"},te={class:"relative mx-1","data-te-dropdown-ref":""},se={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},oe=e("span",{class:"sr-only"},"table actions",-1),ae={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},re={class:"flex items-center"},ne={class:"relative mx-1","data-te-dropdown-ref":""},ie={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},de=e("span",{class:"sr-only"},"table actions",-1),le={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},ce={class:""},pe=["onClick"],_e=e("hr",{class:"border-gray-200"},null,-1),he={class:"relative"},ge=e("label",{for:"table-search",class:"sr-only"},"Search",-1),ue={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},me=["placeholder"],xe={class:"w-full text-sm text-left text-gray-500"},ye={class:"text-xs text-gray-700 uppercase bg-gray-50"},fe={class:"text-sm text-center"},be={class:"flex items-center"},we=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),ve={class:"flex items-center justify-center"},ke={class:"px-2"},Ce={class:"flex items-center justify-center"},Be={class:"px-2"};const Ve={class:"flex items-center justify-center"},Se={class:"px-2"};const De={class:"flex items-center justify-center"},Ne={class:"px-2"},Ee={scope:"col",class:"px-2 py-3"},$e={class:""},Ae={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},Ie=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),Pe=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),Ue=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),je=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Te=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Me=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),Ke=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ze=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),Le=[Ie,Pe,Ue,je,Te,Me,Ke,ze],Fe={class:"bg-white text-center border-b hover:bg-gray-50"},Ge=["onClick"],We={class:"flex items-center"},qe=["onUpdate:modelValue"],Xe={class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},He={class:"text-base font-semibold"},Je={class:"font-normal text-gray-500"},Ze={class:"px-2 py-4"};const Oe={class:"px-2 py-4","data-te-dropdown-ref":""},Qe=["onClick"],Re={class:"flex items-center text-danger px-6 py-2 justify-between"},Ye=e("span",{class:"bg-danger mx-1 animate-pulse px-1 py-1 rounded"},null,-1),et=e("hr",{class:"border-gray-200"},null,-1),tt={key:1,role:"menuitem",class:"cursor-pointer text-sm text-gray-700 transition-colors hover:bg-gray-100"},st={class:"flex items-center px-6 py-2 justify-between"},ot={key:0},at={key:1},rt=e("hr",{class:"border-gray-200"},null,-1),nt=["onClick"],it={class:"flex items-center px-6 py-2 justify-between"},dt=e("hr",{class:"border-gray-200"},null,-1);const lt={class:"px-2 py-4"},ct={class:"px-2 py-4"},pt={class:"inline-flex rounded-md shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]",role:"group"};function _t(t,s,n,g,a,i){const V=_("Bars2Icon"),m=_("Link"),k=_("ChevronDownIcon"),S=_("Pagination"),D=_("MagnifyingGlassIcon"),N=_("XMarkIcon"),x=_("ArrowsUpDownIcon"),ht=_("Tooltip"),E=_("Image"),$=_("Panel");return p(),C($,null,{header:u(()=>[e("title",null,r(t.__("panel")),1)]),content:u(()=>[e("div",Z,[e("div",O,[l(V,{class:"h-7 w-7 mx-3"}),e("h1",Q,r(t.__("videos_list")),1)]),e("div",null,[l(m,{href:t.route("panel.video.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[y(r(t.__("new_video")),1)]),_:1},8,["href"])])]),e("div",R,[e("div",Y,[e("div",ee,[e("div",null,[e("div",te,[e("button",se,[oe,e("span",null,r(t.__("bulk_actions")),1),l(k,{class:"h-4 w-4 mx-1"})]),e("div",ae,null,512)])]),e("div",re,[e("div",ne,[e("button",ie,[de,e("span",null,r(a.params.paginate),1),l(k,{class:"h-4 w-4 mx-1"})]),e("div",le,[(p(!0),h(w,null,b(t.$page.props.pageItems,o=>(p(),h("div",ce,[e("div",{onClick:f=>{a.params.paginate=o,i.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},r(o),9,pe),_e]))),256))],512)]),l(S,{onPaginationChanged:i.paginationChanged,pagination:a.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",he,[ge,e("div",ue,[l(D,{onClick:s[0]||(s[0]=o=>i.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:s[1]||(s[1]=o=>{a.params.search=null,i.getData()})},[l(N,{class:"w-4 h-4"})]),v(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":s[2]||(s[2]=o=>a.params.search=o),onKeydown:s[3]||(s[3]=j(o=>i.getData(),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,me),[[U,a.params.search]])])]),e("table",xe,[e("thead",ye,[e("tr",fe,[e("th",{scope:"col",class:"p-4",onClick:s[5]||(s[5]=(...o)=>i.toggleAll&&i.toggleAll(...o))},[e("div",be,[v(e("input",{id:"checkbox-all-search",type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=o=>a.toggleSelect=o),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[B,a.toggleSelect]]),we])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[6]||(s[6]=o=>{a.params.order_by="name",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",ve,[e("span",ke,r(t.__("name")),1),l(x,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[7]||(s[7]=o=>{a.params.order_by="article_id",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",Ce,[e("span",Be,r(t.__("article")),1),l(x,{class:"w-4 h-4"})])]),d("",!0),d("",!0),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[10]||(s[10]=o=>{a.params.order_by="status",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",Ve,[e("span",Se,r(t.__("status")),1),l(x,{class:"w-4 h-4"})])]),d("",!0),d("",!0),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[105%]",onClick:s[13]||(s[13]=o=>{a.params.order_by="category_id",a.params.dir=a.params.dir=="ASC"?"DESC":"ASC",a.params.page=1,i.getData()})},[e("div",De,[e("span",Ne,r(t.__("category")),1),l(x,{class:"w-4 h-4"})])]),e("th",Ee,r(t.__("actions")),1)])]),e("tbody",$e,[a.loading?(p(),h(w,{key:0},b(3,o=>e("tr",Ae,Le)),64)):d("",!0),(p(!0),h(w,null,b(a.data,(o,f)=>(p(),h("tr",Fe,[e("td",{class:"w-4 p-4",onClick:c=>o.selected=!o.selected},[e("div",We,[v(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":c=>o.selected=c,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,qe),[[B,o.selected]])])],8,Ge),e("td",Xe,[l(E,{class:"w-10 h-10 rounded-full",src:`${t.route("storage.videos")}/${o.id}.jpg`,alt:t.cropText(o.name,5)},null,8,["src","alt"]),l(m,{class:"px-3 hover:text-gray-500",href:t.route("panel.video.edit",o.id)},{default:u(()=>[e("div",He,r(t.cropText(o.name,40)),1),e("div",Je,r(),1)]),_:2},1032,["href"])]),e("td",Ze,[o.article_id?(p(),C(m,{key:0,href:t.route("article",o.article_id)},{default:u(()=>[y(r(o.article_id),1)]),_:2},1032,["href"])):d("",!0)]),d("",!0),d("",!0),e("td",Oe,[e("button",{id:"dropdownStatusSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:T(["min-w-[5rem] px-1 cursor-pointer items-center text-center rounded-md py-[.2rem]",`bg-${t.getStatus("article",o.status).color}-100 hover:bg-${t.getStatus("article",o.status).color}-200 text-${t.getStatus("article",o.status).color}-500`])},r(t.getStatus("article",o.status).name),3),e("ul",{ref_for:!0,ref:"statusMenu","data-te-dropdown-menu-ref":"",class:"absolute z-[1000] m-0 hidden list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-center text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownStatusSetting"},[o.status=="active"?(p(),h("li",{key:0,role:"menuitem",onClick:c=>i.edit({idx:f,id:o.id,cmnd:"inactive"}),class:"cursor-pointer text-sm transition-colors hover:bg-gray-100"},[e("div",Re,[Ye,y(" "+r(t.__("inactive")),1)]),et],8,Qe)):d("",!0),o.status=="review"||o.status=="block"?(p(),h("li",tt,[e("div",st,[o.status=="review"?(p(),h("span",ot,r(t.__("active_after_review")),1)):d("",!0),o.status=="block"?(p(),h("span",at,r(t.__("not_available")),1)):d("",!0)]),rt])):d("",!0),o.status=="inactive"?(p(),h("li",{key:2,role:"menuitem",onClick:c=>i.edit({idx:f,id:o.id,cmnd:"activate"}),class:"cursor-pointer text-sm text-primary-700 transition-colors hover:bg-gray-100"},[e("div",it,r(t.__("activate")),1),dt],8,nt)):d("",!0)],512)]),d("",!0),d("",!0),e("td",lt,[e("div",null,r(t.getCategory(o.category_id)),1)]),e("td",ct,[e("div",pt,[l(m,{type:"button",href:t.route("panel.video.edit",o.id),class:"inline-block rounded bg-orange-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-orange-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},{default:u(()=>[y(r(t.__("edit")),1)]),_:2},1032,["href"])])])]))),256))])])])])]),_:1})}const jt=G(J,[["render",_t]]);export{jt as default};
