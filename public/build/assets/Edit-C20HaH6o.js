import"./Scaffold-D_ifbLkl.js";import{P as V,r as P}from"./Panel-rs2tkraC.js";import{T,Z as A,j as U,i as l,o as a,c as v,w as d,a as s,t as m,b as i,e as p,f as n,l as f,n as h,p as B}from"./app-DeJr7fNP.js";import{_ as E}from"./Checkbox-BWgqGgzP.js";import"./GuestLayout-B84nh8OP.js";import{_ as L,a as j}from"./InputLabel-C2gVT93H.js";import{_ as D}from"./PrimaryButton-Fk5jf8Nh.js";import{_ as F}from"./TextInput-BUWn7uYR.js";import{R as M}from"./RadioGroup-F_Tqn1wR.js";import{L as N}from"./LoadingIcon-8dx7WYGr.js";import{P as $}from"./Popover-BaS0lwjX.js";import{T as X}from"./Tooltip-CSg56dN2.js";import{_ as O}from"./TagInput-3zOTNi0B.js";import{I as R}from"./ImageUploader-v1nOBbO9.js";import{S as q}from"./Selector-NdNaM2dQ.js";import{P as z}from"./ProvinceCounty-Bztk6mkC.js";import{P as H}from"./PhoneFields-Dp_fguC6.js";import{S as G}from"./SocialFields-hQVy6EEa.js";import{A as Q}from"./Article-CxGv6SoN.js";import{T as Z}from"./TextEditor-7zAQTOol.js";import{U as J}from"./UserSelector-D8GJCG_Y.js";import{A as K}from"./AddressSelector-BkUCPfBb.js";import{C as W}from"./CitySelector-BCnZf9JU.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ee}from"./ShoppingBagIcon-zIu7FSuq.js";import{r as oe}from"./Footer-BYUJXMx0.js";import{r as re}from"./Alert-CDDSmLjy.js";import{r as se}from"./EyeIcon-DI71KuzS.js";import{r as te}from"./FolderPlusIcon-oBdmLyEF.js";import{r as ie}from"./Bars2Icon-DNQAv7Yb.js";import{r as le}from"./LinkIcon-ClPrNMD5.js";import{r as ae}from"./QuestionMarkCircleIcon-jeUFMgsk.js";import{r as ne}from"./Squares2X2Icon-Dviu76Pe.js";import{r as de}from"./SignalIcon-C7ONQsBK.js";import{r as me}from"./ChatBubbleBottomCenterTextIcon-CovOeJqa.js";import{r as pe}from"./PencilIcon-BtrTq_9n.js";import{r as ce}from"./CartItemButton-BUsVs_zz.js";import"./ApplicationLogo-CV6pwTdm.js";import"./WrenchScrewdriverIcon-DQFoZ8JW.js";import"./PlusIcon-NsBgz0vi.js";import"./XMarkIcon-CEnCPALs.js";import"./PhoneIcon-CdiwYJQQ.js";import"./MinusIcon-B-7x8Y4K.js";import"./Pagination-VNHzEPuv.js";import"./ChevronRightIcon-9GRJ1f_S.js";import"./Podcast-BxCdE2Ha.js";import"./SpeakerXMarkIcon-CyRlW18-.js";import"./Video-BLyjCQx2.js";import"./Banner-DAn6f3HS.js";import"./MagnifyingGlassIcon--KPgqpVy.js";import"./ChevronUpIcon-DGI4GkYP.js";import"./geosearch.module--3h6cvjB.js";import"./SearchInput-CiaqlZI_.js";import"./MapPinIcon-DUvwgUpM.js";import"./MapIcon-CJ5EAjl4.js";import"./TrashIcon-BFmLih4l.js";const _e={data(){return{data:this.$page.props.data||{},filteredAgencies:this.$page.props.agencies,preloadAddress:null,form:T({id:null,agency_id:null,admin_id:null,type_id:null,is_shop:!1,allow_visit:!1,name:null,address:null,lat:null,lon:null,location:null,province_id:null,county_id:null,district_id:null,postal_code:null,phone:null,timestamps:null,cities:[]}),img:null}},components:{TextEditor:Z,ImageUploader:R,LoadingIcon:N,Head:A,Link:U,HomeIcon:ee,ChevronDownIcon:oe,Panel:V,InputLabel:L,TextInput:F,InputError:j,PrimaryButton:D,RadioGroup:M,UserIcon:re,EyeIcon:se,Checkbox:E,Popover:$,Tooltip:X,FolderPlusIcon:te,Bars2Icon:ie,LinkIcon:le,TagInput:O,QuestionMarkCircleIcon:ae,Selector:q,Squares2X2Icon:ne,ProvinceCounty:z,PhoneFields:H,SocialFields:G,PencilSquareIcon:P,Article:Q,SignalIcon:de,ChatBubbleBottomCenterTextIcon:me,PencilIcon:pe,UserSelector:J,XMarkIcon:ce,AddressSelector:K,CitySelector:W},created(){},mounted(){this.form.id=this.data.id,this.form.name=this.data.name,this.form.is_shop=this.data.is_shop,this.form.allow_visit=this.data.allow_visit,this.form.type_id=this.data.type_id,this.form.admin=this.data.admin,this.form.admin_id=this.data.admin_id,this.form.agency=this.data.agency,this.form.agency_id=this.data.agency_id,this.form.phone=this.data.phone,this.form.status=this.data.status,this.form.cities=this.data.cities||[],this.form.owner=this.data.owner,this.form.owner_id=this.data.owner_id,this.preloadAddress={address:this.data.address,postal_code:this.data.postal_code,province_id:this.data.province_id,county_id:this.data.county_id,district_id:this.data.district_id,lat:this.data.location&&this.data.location.indexOf(",")>-1?this.data.location.split(",")[0]:null,lon:this.data.location&&this.data.location.indexOf(",")>-1?this.data.location.split(",")[1]:null},this.$nextTick(()=>{this.$refs.addressSelector.preload(this.preloadAddress),this.updateAddress(this.preloadAddress)})},methods:{updateAddress(o){o=o||{},this.form.address=o.address,this.form.province_id=o.province_id,this.form.county_id=o.county_id,this.form.district_id=o.district_id,this.form.lat=o.lat,this.form.lon=o.lon,this.form.location=`${o.lat},${o.lon}`,this.form.postal_code=this.f2e(o.postal_code)},submit(){this.form.clearErrors(),this.form.patch(route("admin.panel.repository.update"),{preserveScroll:!1,onSuccess:o=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)},onError:()=>{this.showToast("danger",Object.values(this.form.errors).join("<br/>"))},onFinish:o=>{this.$page.props.flash.status&&this.showAlert(this.$page.props.flash.status,this.$page.props.flash.message)}})}}},he={class:"flex items-center justify-start px-4 py-2 text-primary-500 border-b md:py-4"},fe={class:"text-2xl font-semibold"},ue={class:"px-2 md:px-4"},ge={class:"mx-auto md:max-w-2xl mt-6 px-2 md:px-4 py-4 bg-white shadow-md overflow-hidden rounded-lg"},ye={key:0,class:"flex flex-col mx-2 col-span-2 w-full px-2"},ve={class:"flex-col m-2 items-center rounded-lg max-w-xs w-full mx-auto"};const be={key:0,class:"my-2"},we={class:"grow"},xe=["onClick"],Ie={class:"my-2"},ke={class:"grow"},Se=["onClick"],Ce={class:"my-2"},Ve={class:"p-3"},Pe={class:"my-2"},Te={class:"p-3"},Ae={class:"my-4"},Ue={class:"my-4"},Be={class:"my-3"},Ee={key:1,class:"my-3"},Le={key:2,class:"shadow w-full bg-grey-light m-2 bg-gray-200 rounded-full"},je={class:"animate-bounce"},De={class:"mt-4"},Fe={class:"text-lg"};function Me(o,t,Ne,$e,e,c){const b=l("FolderPlusIcon"),Xe=l("ImageUploader"),Oe=l("InputError"),u=l("XMarkIcon"),g=l("UserSelector"),y=l("Bars2Icon"),_=l("TextInput"),w=l("AddressSelector"),x=l("CitySelector"),I=l("LoadingIcon"),k=l("PrimaryButton"),S=l("Panel");return a(),v(S,null,{header:d(()=>[s("title",null,m(o.__("edit_repository")),1)]),content:d(()=>[s("div",he,[i(b,{class:"h-7 w-7 mx-3"}),s("h1",fe,m(o.__("edit_repository")),1)]),s("div",ue,[s("div",ge,[e.data?(a(),p("div",ye,[s("div",ve,[n("",!0)]),s("form",{onSubmit:t[8]||(t[8]=f((...r)=>c.submit&&c.submit(...r),["prevent"]))},[o.$page.props.agency&&o.$page.props.agency.level<3?(a(),p("div",be,[i(g,{colsData:["name","phone","level"],labelsData:["name","phone","type"],callback:{level:o.getAgency},error:e.form.errors.agency_id,link:o.route("admin.panel.agency.search"),label:o.__("agency"),id:"agency",selected:e.form.agency_id,"onUpdate:selected":t[0]||(t[0]=r=>e.form.agency_id=r),preload:this.$page.props.data.agency},{selector:d(r=>[s("div",{class:h([(r.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[s("div",we,m(r.selectedText??o.__("select")),1),r.selectedText?(a(),p("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(C=>r.clear(),["stop"])},[i(u,{class:"w-5 h-5"})],8,xe)):n("",!0)],2)]),_:1},8,["callback","error","link","label","selected","preload"])])):n("",!0),s("div",Ie,[i(g,{colsData:["fullname","phone","agency_id"],labelsData:["name","phone","agency_id"],link:o.route("admin.panel.admin.search")+(e.form.agency_id?`?agency_id=${e.form.agency_id}`:""),label:o.__("repo_owner/admin"),error:e.form.errors.admin_id,id:"admin",selected:e.form.admin_id,"onUpdate:selected":t[1]||(t[1]=r=>e.form.admin_id=r),preload:this.$page.props.data.admin},{selector:d(r=>[s("div",{class:h([(r.selectedText,"py-2"),"px-4 border border-gray-300 rounded hover:bg-gray-100 cursor-pointer flex items-center"])},[s("div",ke,m(r.selectedText??o.__("select")),1),r.selectedText?(a(),p("div",{key:0,class:"bg-danger rounded p-2 cursor-pointer text-white hover:bg-danger-400",onClick:f(C=>r.clear(),["stop"])},[i(u,{class:"w-5 h-5"})],8,Se)):n("",!0)],2)]),_:1},8,["link","label","error","selected","preload"])]),s("div",Ce,[i(_,{id:"name",type:"text",placeholder:o.__("repo_name"),classes:"  ",modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.name=r),autocomplete:"name",error:e.form.errors.name},{prepend:d(()=>[s("div",Ve,[i(y,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),s("div",Pe,[i(_,{id:"phone",type:"tel",placeholder:o.__("phone"),classes:"  ",modelValue:e.form.phone,"onUpdate:modelValue":t[3]||(t[3]=r=>e.form.phone=r),autocomplete:"phone",error:e.form.errors.phone},{prepend:d(()=>[s("div",Te,[i(y,{class:"h-5 w-5"})])]),_:1},8,["placeholder","modelValue","error"])]),s("div",Ae,[i(w,{ref:"addressSelector",editable:!0,clearable:!0,class:"",type:"",label:o.__("address"),onChange:t[4]||(t[4]=r=>c.updateAddress(r)),error:e.form.errors.address||e.form.errors.postal_code||e.form.errors.province_id||e.form.errors.county_id},null,8,["label","error"])]),s("div",Ue,[i(x,{multi:!0,label:o.__("supported_districts"),modelValue:e.form.cities,"onUpdate:modelValue":t[5]||(t[5]=r=>e.form.cities=r),preload:o.$page.props.data.cities,error:e.form.errors.cities},null,8,["label","modelValue","preload","error"])]),s("div",Be,[i(_,{id:"is_shop",type:"checkbox",placeholder:o.__("connect_shop"),classes:"  ",modelValue:e.form.is_shop,"onUpdate:modelValue":t[6]||(t[6]=r=>e.form.is_shop=r),autocomplete:"is_shop",error:e.form.errors.is_shop},null,8,["placeholder","modelValue","error"])]),e.form.is_shop?(a(),p("div",Ee,[i(_,{id:"allow_visit",type:"checkbox",placeholder:o.__("allow_visit"),classes:"  ",modelValue:e.form.allow_visit,"onUpdate:modelValue":t[7]||(t[7]=r=>e.form.allow_visit=r),autocomplete:"allow_visit",error:e.form.errors.allow_visit},null,8,["placeholder","modelValue","error"])])):n("",!0),e.form.progress?(a(),p("div",Le,[s("div",{class:h(["bg-primary rounded text-xs leading-none py-[.1rem] text-center text-white duration-300",{" animate-pulse":e.form.progress.percentage<100}]),style:B(`width: ${e.form.progress.percentage}%`)},[s("span",je,m(e.form.progress.percentage),1)],6)])):n("",!0),s("div",De,[i(k,{onClick:c.submit,type:"button",class:h(["w-full flex items-center justify-center",{"opacity-25":e.form.processing}]),disabled:e.form.processing},{default:d(()=>[e.form.processing?(a(),v(I,{key:0,class:"w-4 h-4 mx-3"})):n("",!0),s("span",Fe,m(o.__("register_info")),1)]),_:1},8,["onClick","class","disabled"])])],32)])):n("",!0)])])]),_:1})}const Ho=Y(_e,[["render",Me]]);export{Ho as default};
