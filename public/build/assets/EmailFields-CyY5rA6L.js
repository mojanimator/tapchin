import{o as i,e as a,a as r,i as l,b as m,t as d,n as _,c as b,f as x}from"./app-COCv_6FM.js";import"./Scaffold-DWvcdxbt.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as g}from"./LoadingIcon-PyLCRR-O.js";import{_ as y,a as k}from"./InputLabel-DWU22C58.js";function w(t,e){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[r("path",{"stroke-linecap":"round",d:"M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"})])}function K(t,e){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"})])}const I={props:["email","for","verified","type","emailVerify","emailError","emailVerifyError","admin"],emits:["update:email","update:emailVerify"],data(){return{loading:!1,timer:60,oldEmail:null}},components:{LoadingIcon:g,AtSymbolIcon:w,InputLabel:y,InputError:k},computed:{isDisabled:function(){return this.loading||this.timer<60&&this.timer>0||this.oldEmail==this.email}},created(){},mounted(){this.$nextTick(()=>{this.oldEmail=this.email})},methods:{sendVerificationCode(t){this.loading=!0,window.axios.post(route("verification.send"),{email:t,type:this.type||"verification",table:this.for}).then(e=>{e&&e.status==202&&(this.showToast("success",this.__("email_verification_sent")),this.startTimer()),e&&e.status==204&&this.showToast("success",this.__("email_verified_before"))}).catch(e=>{console.log(e),e=this.getErrors(e),this.showToast("danger",e)}).finally(()=>{this.loading=!1})},startTimer(){this.timer=60;const t=setInterval((function(){this.timer--,this.timer<=0&&(clearInterval(t),this.timer=60)}).bind(this),1e3)}}},E={class:"grid grid-cols-1 gap-2"},V={class:"flex items-center"},C={key:0,class:"text-danger text-xs mx-1"},L={key:1,class:"text-success text-xs mx-1"},B={class:"relative mb-2 mt-2 flex flex-wrap items-stretch"},T={class:"flex bg-gray-100 text-gray-500 items-center whitespace-nowrap rounded-s border border-e-0 border-solid border-neutral-300 text-center text-base font-normal leading-[1.6] dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200",id:"basic-addon1"},D={class:"p-3"},S=["value"],z=["disabled"],A={key:1,class:"text-white"},M={key:2,class:"text-white"};function N(t,e,s,j,o,n){const u=l("InputLabel"),h=l("AtSymbolIcon"),p=l("LoadingIcon"),f=l("InputError");return i(),a("div",E,[r("div",null,[r("div",V,[m(u,{class:"my-2",for:"email",value:t.__("email")},null,8,["value"]),s.verified==null?(i(),a("span",C,"("+d(t.__("not_verified"))+")",1)):(i(),a("span",L,"("+d(t.__("verified"))+")",1))]),r("div",B,[r("span",T,[r("div",D,[m(h,{class:"h-5 w-5"})])]),r("input",{value:s.email,onInput:e[0]||(e[0]=c=>{t.$emit("update:email",c.target.value)}),class:"flex-auto rounded-0 border border-solid border-neutral-300 px-3 text-neutral-700 transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:focus:border-primary",onVisibility:e[1]||(e[1]=c=>t.$el.type="text"),ref:"input_email"},null,40,S),r("span",{onClick:e[2]||(e[2]=c=>n.isDisabled?null:n.sendVerificationCode(s.email)),class:_(["flex cursor-pointer hover:bg-primary-400 bg-primary-500 items-center whitespace-nowrap rounded-e border border-s-0 border-solid border-neutral-300 px-3 py-[0.25rem] focus:border-primary text-center text-base font-normal leading-[1.6] text-neutral-700 dark:border-neutral-600 dark:text-neutral-200 dark:placeholder:text-neutral-200",{"opacity-25":n.isDisabled}]),disabled:n.isDisabled},[o.loading?(i(),b(p,{key:0,class:"w-4 h-4 mx-3"})):x("",!0),o.timer<60&&o.timer>0?(i(),a("span",A,d(o.timer),1)):(i(),a("span",M,d(t.__("activation")),1))],10,z)]),m(f,{class:"mt-1",message:s.emailError},null,8,["message"])])])}const O=v(I,[["render",N]]);export{O as E,w as a,K as r};
