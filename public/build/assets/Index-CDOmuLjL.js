import"./Scaffold-D_ifbLkl.js";import{P,a as M}from"./Panel-rs2tkraC.js";import{Z as q,j as U,i as p,o as d,c as C,w as m,a as e,t as r,b as l,g as S,f as _,e as c,h as f,F as y,k as b,G as L,J as V,A as D,n as v}from"./app-DeJr7fNP.js";import{P as B,r as R}from"./Pagination-VNHzEPuv.js";import{r as H,I as z}from"./Footer-BYUJXMx0.js";import{T as G}from"./Tooltip-CSg56dN2.js";import{S as N}from"./Selector-NdNaM2dQ.js";import{_ as X}from"./TextInput-BUWn7uYR.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as $}from"./ShoppingBagIcon-zIu7FSuq.js";import{r as F}from"./Bars2Icon-DNQAv7Yb.js";import{r as K}from"./MagnifyingGlassIcon--KPgqpVy.js";import{r as J}from"./CartItemButton-BUsVs_zz.js";import{r as Z}from"./Squares2X2Icon-Dviu76Pe.js";import"./Alert-CDDSmLjy.js";import"./LoadingIcon-8dx7WYGr.js";import"./ApplicationLogo-CV6pwTdm.js";import"./WrenchScrewdriverIcon-DQFoZ8JW.js";import"./QuestionMarkCircleIcon-jeUFMgsk.js";import"./ChevronRightIcon-9GRJ1f_S.js";import"./InputLabel-C2gVT93H.js";import"./ChevronUpIcon-DGI4GkYP.js";import"./PlusIcon-NsBgz0vi.js";import"./MinusIcon-B-7x8Y4K.js";const O={data(){return{errors:{},filteredRepositories:[],repoModal:null,selected:null,selectedParams:null,params:{page:1,search:null,is_from_agency:!0,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},directives:{},components:{TextInput:X,Head:q,Link:U,HomeIcon:$,ChevronDownIcon:H,Panel:P,Bars2Icon:F,Image:z,MagnifyingGlassIcon:K,XMarkIcon:J,Pagination:B,ArrowsUpDownIcon:R,Tooltip:G,Squares2X2Icon:Z,Selector:N,CurrencyDollarIcon:M},mounted(){this.getData(),this.tableWrapper=document.querySelector("table  ").parentElement;for(const t in this.$page.props.agencyRepositories){let s=this.$page.props.agencyRepositories[t].id;this.filteredRepositories[s]=this.$page.props.agencyRepositories.filter(i=>i.id==this.$page.props.agencyRepositories[t].id)[0].repositories.map(i=>({id:i.id,name:`(${i.id}) ${i.name}`}))}},methods:{setTableHeight(){let t=window.innerHeight-this.tableWrapper.offsetTop;this.tableWrapper.style.height=`${t}px`},getData(){this.loading=!0,this.data=[],window.axios.get(route("admin.panel.shipping.search"),{params:this.params},{}).then(t=>{this.data=t.data.data,this.data.forEach(s=>{s.selected=!1}),delete t.data.data,this.pagination=t.data,this.setTableHeight(),this.$nextTick(()=>{this.initTableDropdowns()})}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data?t.response.data.message?t.response.data.message:t.response.data:this.__("response_error")):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",this.error)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},edit(t){this.isLoading(!0),this.errors={},window.axios.patch(route("admin.panel.shipping.update"),t,{}).then(s=>{s.data&&s.data.message&&this.showToast("success",s.data.message),s.data.status?(this.data[t.idx].status=s.data.status,s.data.statuses&&(this.data[t.idx].statuses=s.data.statuses),s.data.order_qty!==null&&(this.data[t.idx].order_qty=s.data.order_qty)):this.getData(),this.selected=null}).catch(s=>{this.error=this.getErrors(s),s.response&&s.response.data&&(this.errors=s.response.data.errors||{},s.response.data.meta&&(this.data[t.idx].meta=s.response.data.meta)),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(i=>i.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const s={cmnd:t,data:this.data.reduce((i,g)=>(g.selected&&i.push(g.id),i),[])};window.axios.patch(route("admin.panel.variation.update"),s,{}).then(i=>{if(i.data&&i.data.message&&this.showToast("success",i.data.message),i.data&&i.data.results){const g=i.data.results;for(let o in this.data)for(let n in g)if(g[n].id==this.data[o].id){this.data[o].status=g[n].status;break}}}).catch(i=>{this.error=this.getErrors(i),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})}}},Q={class:""},Y={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},ee={class:"flex"},te={class:"font-semibold"},se={class:"px-2 md:px-4"},ae={class:"flex flex-col overflow-x-aut bg-white shadow-lg rounded-lg"},oe={class:"flex gap-1 flex-wrap items-center justify-start py-4 p-4"},re={class:"relative mx-1","data-te-dropdown-ref":""},ie={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ne=e("span",{class:"sr-only"},"table actions",-1),le={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},de={class:"flex items-center"},ce={class:"relative mx-1","data-te-dropdown-ref":""},pe={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ge=e("span",{class:"sr-only"},"table actions",-1),he={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},ue={class:""},_e=["onClick"],me=e("hr",{class:"border-gray-200"},null,-1),fe={class:"relative"},ye=e("label",{for:"table-search",class:"sr-only"},"Search",-1),xe={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},be=["placeholder"],ve={class:"flex-grow w-full"},we={class:"w-full overflow-x-auto md:rounded-lg"},ke={ref:"tableRef ",class:"table-auto text-sm text-gray-500"},Ce={class:"sticky top-0 shadow-md text-xs text-gray-700 bg-gray-50"},Se={class:"text-sm text-center"},De={class:"flex items-center"},Ie=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),Ae={class:"flex items-center justify-center"},Te={class:"px-0"},Ee={class:"flex items-center justify-center"},je={class:"px-2"},Pe={class:"flex items-center justify-center"},Me={class:"px-2"},qe={class:"flex items-center justify-center"},Ue={class:"px-2"},Le={class:"flex items-center justify-center"},Ve={class:"px-2"},Be={class:"flex items-center justify-center"},Re={class:"px-2"},He={scope:"col",class:"px-2 py-3"},ze={class:"overflow-y-scroll text-xs"},Ge={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},Ne=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),Xe=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),We=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),$e=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Fe=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ke=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),Je=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ze=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),Oe=[Ne,Xe,We,$e,Fe,Ke,Je,Ze],Qe=["onClick"],Ye={class:"flex items-center"},et=["onUpdate:modelValue"],tt={class:"px-2 py-4"},st={class:"px-2 py-4"},at={key:0},ot={class:"px-2 py-4"},rt={key:0},it={class:"px-2 py-4"},nt={key:0},lt={class:"px-2 py-4","data-te-dropdown-ref":""},dt=["id"],ct=["aria-labelledby"],pt=["onClick"],gt=e("hr",{class:"border-gray-200"},null,-1),ht={class:"px-2 py-4"},ut={class:"inline-flex rounded-md shadow-sm transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]",role:"group"};function _t(t,s,i,g,o,n){const I=p("Bars2Icon"),w=p("Link"),k=p("ChevronDownIcon"),A=p("Pagination"),T=p("MagnifyingGlassIcon"),E=p("XMarkIcon"),u=p("ArrowsUpDownIcon"),j=p("Panel");return d(),C(j,null,{header:m(()=>[e("title",null,r(t.__("panel")),1)]),content:m(()=>[e("div",Q,[e("div",Y,[e("div",ee,[l(I,{class:"h-7 w-7 mx-3"}),e("h5",te,r(t.__("shipping_list")),1)]),e("div",null,[t.hasAccess("create_shipping")?(d(),C(w,{key:0,href:t.route("admin.panel.shipping.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:m(()=>[S(r(t.__("new_shipping")),1)]),_:1},8,["href"])):_("",!0)])]),e("div",se,[e("div",ae,[e("div",oe,[e("div",null,[e("div",re,[e("button",ie,[ne,e("span",null,r(t.__("bulk_actions")),1),l(k,{class:"h-4 w-4 mx-1"})]),e("div",le,null,512)])]),e("div",de,[e("div",ce,[e("button",pe,[ge,e("span",null,r(o.params.paginate),1),l(k,{class:"h-4 w-4 mx-1"})]),e("div",he,[(d(!0),c(y,null,f(t.$page.props.pageItems,a=>(d(),c("div",ue,[e("div",{onClick:x=>{o.params.paginate=a,n.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},r(a),9,_e),me]))),256))],512)]),l(A,{onPaginationChanged:n.paginationChanged,pagination:o.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",fe,[ye,e("div",xe,[l(T,{onClick:s[0]||(s[0]=a=>n.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:s[1]||(s[1]=a=>{o.params.search=null,n.getData()})},[l(E,{class:"w-4 h-4"})]),b(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":s[2]||(s[2]=a=>o.params.search=a),onKeydown:s[3]||(s[3]=V(a=>n.getData(),["enter"])),class:"w-fit p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,be),[[L,o.params.search]])])]),e("div",ve,[e("div",we,[e("table",ke,[e("thead",Ce,[e("tr",Se,[e("th",{scope:"col",class:"p-4",onClick:s[5]||(s[5]=(...a)=>n.toggleAll&&n.toggleAll(...a))},[e("div",De,[b(e("input",{id:"checkbox-all-search",type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=a=>o.toggleSelect=a),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[D,o.toggleSelect]]),Ie])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[6]||(s[6]=a=>{o.params.order_by="id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Ae,[e("span",Te,r(t.__("id")),1),l(u,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[7]||(s[7]=a=>{o.params.order_by="agency_id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Ee,[e("span",je,r(t.__("agency")),1),l(u,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[8]||(s[8]=a=>{o.params.order_by="driver_id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Pe,[e("span",Me,r(t.__("driver")),1),l(u,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[9]||(s[9]=a=>{o.params.order_by="car_id",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",qe,[e("span",Ue,r(t.__("car")),1),l(u,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[10]||(s[10]=a=>{o.params.order_by="order_done_qty",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Le,[e("span",Ve,r(t.__("orders")),1),l(u,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:s[11]||(s[11]=a=>{o.params.order_by="status",o.params.dir=o.params.dir=="ASC"?"DESC":"ASC",o.params.page=1,n.getData()})},[e("div",Be,[e("span",Re,r(t.__("status")),1),l(u,{class:"w-4 h-4"})])]),e("th",He,r(t.__("actions")),1)])]),e("tbody",ze,[o.loading?(d(),c(y,{key:0},f(3,a=>e("tr",Ge,Oe)),64)):_("",!0),(d(!0),c(y,null,f(o.data,(a,x)=>(d(),c("tr",{class:v(["text-center border-b hover:bg-gray-50",x%2==1?"bg-gray-50":"bg-white"])},[e("td",{class:"w-4 p-4",onClick:h=>a.selected=!a.selected},[e("div",Ye,[b(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":h=>a.selected=h,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,et),[[D,a.selected]])])],8,Qe),e("td",tt,r(a.id),1),e("td",st,[a.agency?(d(),c("div",at,[e("div",null,r(`(${a.agency.id})`),1),e("div",null,r(`${a.agency.name||""}`),1),e("div",null,r(`${a.agency.phone||""}`),1)])):_("",!0)]),e("td",ot,[a.driver?(d(),c("div",rt,[e("div",null,r(`(${a.driver.id})`),1),e("div",null,r(`${a.driver.name||""}`),1),e("div",null,r(`${a.driver.phone||""}`),1)])):_("",!0)]),e("td",it,[a.car?(d(),c("div",nt,[e("div",null,r(`(${a.car.id})`),1),e("div",null,r(`${a.driver.phone||""}`),1)])):_("",!0)]),e("td",null,r(`${a.order_qty} / ${a.order_delivered_qty}`),1),e("td",lt,[e("button",{type:"button",id:`dropdownStatusSetting${a.id}`,"data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:v(["min-w-[5rem] px-1 cursor-pointer items-center text-center rounded-md py-[.2rem]",`bg-${t.getStatus("shipping_statuses",a.status).color}-100 hover:bg-${t.getStatus("shipping_statuses",a.status).color}-200 text-${t.getStatus("shipping_statuses",a.status).color}-500`])},r(t.getStatus("shipping_statuses",a.status).name),11,dt),e("ul",{ref_for:!0,ref:`statusMenu${a.id}`,"data-te-dropdown-menu-ref":"",class:"absolute z-[1000] m-0 hidden list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-center text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":`dropdownStatusSetting${a.id}`},[(d(!0),c(y,null,f(a.statuses,(h,mt)=>(d(),c("li",{role:"menuitem",onClick:ft=>t.showDialog("danger",h.message,t.__("accept"),n.edit,{idx:x,id:a.id,cmnd:"status",status:h.name}),class:"cursor-pointer text-sm transition-colors hover:bg-gray-100"},[e("div",{class:v(["flex items-center justify-center px-6 py-2",` hover:bg-gray-200 text-${h.color}-500`])},r(t.__(h.name)),3),gt],8,pt))),256))],8,ct)]),e("td",ht,[e("div",ut,[l(w,{type:"button",href:t.route("admin.panel.shipping.edit",a.id),class:"inline-block rounded bg-blue-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-blue-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},{default:m(()=>[S(r(t.__("edit")),1)]),_:2},1032,["href"])])])],2))),256))])],512)])])])])])]),_:1})}const Gt=W(O,[["render",_t]]);export{Gt as default};
