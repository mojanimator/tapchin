import"./Scaffold-DWvcdxbt.js";import{P as L}from"./Panel-B14SxVgH.js";import{Z as S,j as A,i as g,o as r,c as b,w as u,a as t,t as d,b as p,e as l,g as w,f as h,h as m,F as f,k as v,G as M,J as B,A as T,n as k}from"./app-COCv_6FM.js";import{P as U,r as V}from"./Pagination-B7Lk-YHC.js";import{r as G,I as N}from"./Footer-B5OFFhHa.js";import{_ as q}from"./SecondaryButton-T-3OVGxv.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as X}from"./ShoppingBagIcon-DdettYi9.js";import{r as F}from"./Bars2Icon-CXJclUCF.js";import{r as H}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as K}from"./CartItemButton-ClgMcctk.js";import"./Alert-eYSKKEf0.js";import"./LoadingIcon-PyLCRR-O.js";import"./ApplicationLogo-DT4XYSyB.js";import"./Tooltip-D0OChXnj.js";import"./TextInput-K5DGNw4r.js";import"./InputLabel-DWU22C58.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./QuestionMarkCircleIcon-56s_3IWs.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";const $={data(){return{params:{page:1,search:null,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},components:{SecondaryButton:q,Head:S,Link:A,HomeIcon:X,ChevronDownIcon:G,Panel:L,Bars2Icon:F,Image:N,MagnifyingGlassIcon:H,XMarkIcon:K,Pagination:U,ArrowsUpDownIcon:V},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.data=[],window.axios.get(route("panel.notification.search"),{params:this.params},{onUploadProgress:function(e){console.log(e)},onDownloadProgress:function(e){console.log(e)}}).then(e=>{this.data=e.data.data,this.data.forEach(s=>{s.selected=!1}),delete e.data.data,this.pagination=e.data}).catch(e=>{e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),this.error=e.response.data):e.request?(console.log(e.request),this.error=e.request):(console.log("Error",e.message),this.error=e.message),console.log(e.config),this.showToast("danger",e)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(e=>{e.selected=this.toggleSelect})},edit(e){this.isLoading(!0),window.axios.patch(route("notification.update"),e,{onUploadProgress:function(s){},onDownloadProgress:function(s){}}).then(s=>{s.data&&s.data.message&&this.showToast("success",s.data.message),s.data.charge&&(this.data[e.idx].charge=s.data.charge,this.user.wallet=s.data.wallet),s.data.status&&(this.data[e.idx].status=s.data.status),s.data.view_fee&&(this.data[e.idx].view_fee=s.data.view_fee),s.data.meta&&(this.data[e.idx].meta=s.data.meta,this.user.meta_wallet=s.data.meta_wallet)}).catch(s=>{this.error=this.getErrors(s),s.response&&s.response.data&&(s.response.data.charge&&(this.data[e.idx].charge=s.response.data.charge),s.response.data.view_fee&&(this.data[e.idx].view_fee=s.response.data.view_fee),s.response.data.meta&&(this.data[e.idx].meta=s.response.data.meta)),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(e){this.params.page=e.page,this.getData()},bulkAction(e){if(this.data.filter(o=>o.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const s={cmnd:e,data:this.data.reduce((o,c)=>(c.selected&&o.push(c.id),o),[])};window.axios.patch(route("notification.update"),s,{onUploadProgress:function(o){},onDownloadProgress:function(o){}}).then(o=>{if(o.data&&o.data.message&&this.showToast("success",o.data.message),o.data&&o.data.results){const c=o.data.results;for(let n in this.data)for(let i in c)if(c[i].id==this.data[n].id){this.data[n].status=c[i].status;break}}}).catch(o=>{this.error=this.getErrors(o),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},createLink(e){return e?e.link?e.link:e.data_id&&e.type?route("/")+"/"+e.type.split("_")[0]+"/"+e.data_id:"":""}}},J={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},Z={class:"flex"},O={class:"text-2xl font-semibold"},Q={key:0},R={class:"px-2 flex flex-col md:px-4"},W={class:"flex-col bg-white overflow-x-auto shadow-lg rounded-lg"},Y={class:"flex items-center justify-between py-4 p-4"},ee={key:0},te={class:"relative mx-1","data-te-dropdown-ref":""},se={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ae=t("span",{class:"sr-only"},"table actions",-1),oe={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},ne={class:"flex items-center"},ie={class:"relative mx-1","data-te-dropdown-ref":""},re={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},de=t("span",{class:"sr-only"},"table actions",-1),le={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},ce={class:""},ge=["onClick"],pe=t("hr",{class:"border-gray-200"},null,-1),he={class:"relative"},ue=t("label",{for:"table-search",class:"sr-only"},"Search",-1),me={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},fe=["placeholder"],_e={class:"w-full text-start text-gray-500"},xe={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},ye=t("td",{class:"w-4 p-4"},[t("div",{class:"flex items-center"},[t("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),be=t("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[t("div",{class:"w-10 h-10 rounded-full"}),t("div",{class:"px-3"},[t("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),t("div",{class:"font-normal text-gray-500"})])],-1),we=t("td",{class:"px-2 py-4"},[t("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ve=t("td",{class:"px-2 py-4"},[t("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ke=t("td",{class:"px-2 py-4"},[t("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Pe=t("td",{class:"px-2 py-4"},[t("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),Ce=t("td",{class:"px-2 py-4"},[t("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),Ie=t("td",{class:"px-2 py-4"},[t("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),De=[ye,be,we,ve,ke,Pe,Ce,Ie],je={class:"bg-white flex flex-col px-2 sm:px-8 py-2 text-start border-b hover:bg-gray-50"},Ee=["onClick"],Le={class:"flex items-center"},Se=["onUpdate:modelValue"],Ae={class:"text-gray-500 my-1"},Me={class:"text-gray-300 my-1 text-xs"},Be={class:"text-slate-400 text-sm m-2"},Te={class:"flex justify-end"};function Ue(e,s,o,c,n,i){const P=g("Bars2Icon"),_=g("Link"),x=g("ChevronDownIcon"),C=g("Pagination"),I=g("MagnifyingGlassIcon"),D=g("XMarkIcon"),j=g("Panel");return r(),b(j,null,{header:u(()=>[t("title",null,d(e.__("panel")),1)]),content:u(()=>[t("div",J,[t("div",Z,[p(P,{class:"h-7 w-7 mx-3"}),t("h1",O,d(e.__("notifications_list")),1)]),e.isAdmin()?(r(),l("div",Q,[p(_,{href:e.route("admin.panel.notification.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[w(d(e.__("new_notification")),1)]),_:1},8,["href"])])):h("",!0)]),t("div",R,[t("div",W,[t("div",Y,[e.isAdmin()?(r(),l("div",ee,[t("div",te,[t("button",se,[ae,t("span",null,d(e.__("bulk_actions")),1),p(x,{class:"h-4 w-4 mx-1"})]),t("div",oe,null,512)])])):h("",!0),t("div",ne,[t("div",ie,[t("button",re,[de,t("span",null,d(n.params.paginate),1),p(x,{class:"h-4 w-4 mx-1"})]),t("div",le,[(r(!0),l(f,null,m(e.$page.props.pageItems,a=>(r(),l("div",ce,[t("div",{onClick:E=>{n.params.paginate=a,i.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},d(a),9,ge),pe]))),256))],512)]),p(C,{onPaginationChanged:i.paginationChanged,pagination:n.pagination},null,8,["onPaginationChanged","pagination"])]),t("div",he,[ue,t("div",me,[p(I,{onClick:s[0]||(s[0]=a=>i.getData()),class:"w-4 h-4"})]),t("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:s[1]||(s[1]=a=>{n.params.search=null,i.getData()})},[p(D,{class:"w-4 h-4"})]),v(t("input",{type:"text",id:"table-search-users","onUpdate:modelValue":s[2]||(s[2]=a=>n.params.search=a),onKeydown:s[3]||(s[3]=B(a=>i.getData(),["enter"])),class:"block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:e.__("search")},null,40,fe),[[M,n.params.search]])])]),t("div",_e,[n.loading?(r(),l(f,{key:0},m(3,a=>t("div",xe,De)),64)):h("",!0),(r(!0),l(f,null,m(n.data,(a,E)=>(r(),l("div",je,[e.isAdmin()?(r(),l("span",{key:0,class:"w-4 p-4",onClick:y=>a.selected=!a.selected},[t("div",Le,[v(t("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":y=>a.selected=y,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,Se),[[T,a.selected]])])],8,Ee)):h("",!0),t("span",{class:k(["flex justify-between items-center",a.type?a.type.includes("reject")?"text-danger":a.type.includes("approve")?"text-success":"text-primary-500":"text-slate-700"])},[t("div",Ae,d(a.subject),1),t("div",Me,d(e.toShamsi(a.created_at)),1)],2),t("span",Be,d(a.description),1),t("span",Te,[i.createLink(a)?(r(),b(_,{key:0,href:i.createLink(a),class:k([a.type?a.type.includes("reject")?"bg-danger-100 hover:bg-danger-200 text-danger":a.type.includes("approve")?"bg-success-100 hover:bg-success-200 text-success":"bg-primary-100 hover:bg-primary-200 text-primary-500":"bg-primary-100 hover:bg-primary-200 text-primary","mx-2 rounded px-8 py-1"])},{default:u(()=>[w(d(e.__("more...")),1)]),_:2},1032,["href","class"])):h("",!0)])]))),256))])])])]),_:1})}const it=z($,[["render",Ue]]);export{it as default};
