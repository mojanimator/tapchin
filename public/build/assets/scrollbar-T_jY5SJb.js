import{g as R,c as A,a as I,n as j,b as B}from"./scrollbar-D-KXdfFN.js";function G(L){let{swiper:s,extendParams:x,on:f,emit:u}=L;const g=R();let d=!1,w=null,y=null,v,i,c,D;x({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),s.scrollbar={el:null,dragEl:null};function b(){if(!s.params.scrollbar.el||!s.scrollbar.el)return;const{scrollbar:l,rtlTranslate:r}=s,{dragEl:e,el:a}=l,t=s.params.scrollbar,n=s.params.loop?s.progressLoop:s.progress;let p=i,o=(c-i)*n;r?(o=-o,o>0?(p=i-o,o=0):-o+i>c&&(p=c+o)):o<0?(p=i+o,o=0):o+i>c&&(p=c-o),s.isHorizontal()?(e.style.transform=`translate3d(${o}px, 0, 0)`,e.style.width=`${p}px`):(e.style.transform=`translate3d(0px, ${o}px, 0)`,e.style.height=`${p}px`),t.hide&&(clearTimeout(w),a.style.opacity=1,w=setTimeout(()=>{a.style.opacity=0,a.style.transitionDuration="400ms"},1e3))}function k(l){!s.params.scrollbar.el||!s.scrollbar.el||(s.scrollbar.dragEl.style.transitionDuration=`${l}ms`)}function m(){if(!s.params.scrollbar.el||!s.scrollbar.el)return;const{scrollbar:l}=s,{dragEl:r,el:e}=l;r.style.width="",r.style.height="",c=s.isHorizontal()?e.offsetWidth:e.offsetHeight,D=s.size/(s.virtualSize+s.params.slidesOffsetBefore-(s.params.centeredSlides?s.snapGrid[0]:0)),s.params.scrollbar.dragSize==="auto"?i=c*D:i=parseInt(s.params.scrollbar.dragSize,10),s.isHorizontal()?r.style.width=`${i}px`:r.style.height=`${i}px`,D>=1?e.style.display="none":e.style.display="",s.params.scrollbar.hide&&(e.style.opacity=0),s.params.watchOverflow&&s.enabled&&l.el.classList[s.isLocked?"add":"remove"](s.params.scrollbar.lockClass)}function C(l){return s.isHorizontal()?l.clientX:l.clientY}function E(l){const{scrollbar:r,rtlTranslate:e}=s,{el:a}=r;let t;t=(C(l)-B(a)[s.isHorizontal()?"left":"top"]-(v!==null?v:i/2))/(c-i),t=Math.max(Math.min(t,1),0),e&&(t=1-t);const n=s.minTranslate()+(s.maxTranslate()-s.minTranslate())*t;s.updateProgress(n),s.setTranslate(n),s.updateActiveIndex(),s.updateSlidesClasses()}function H(l){const r=s.params.scrollbar,{scrollbar:e,wrapperEl:a}=s,{el:t,dragEl:n}=e;d=!0,v=l.target===n?C(l)-l.target.getBoundingClientRect()[s.isHorizontal()?"left":"top"]:null,l.preventDefault(),l.stopPropagation(),a.style.transitionDuration="100ms",n.style.transitionDuration="100ms",E(l),clearTimeout(y),t.style.transitionDuration="0ms",r.hide&&(t.style.opacity=1),s.params.cssMode&&(s.wrapperEl.style["scroll-snap-type"]="none"),u("scrollbarDragStart",l)}function P(l){const{scrollbar:r,wrapperEl:e}=s,{el:a,dragEl:t}=r;d&&(l.preventDefault?l.preventDefault():l.returnValue=!1,E(l),e.style.transitionDuration="0ms",a.style.transitionDuration="0ms",t.style.transitionDuration="0ms",u("scrollbarDragMove",l))}function $(l){const r=s.params.scrollbar,{scrollbar:e,wrapperEl:a}=s,{el:t}=e;d&&(d=!1,s.params.cssMode&&(s.wrapperEl.style["scroll-snap-type"]="",a.style.transitionDuration=""),r.hide&&(clearTimeout(y),y=j(()=>{t.style.opacity=0,t.style.transitionDuration="400ms"},1e3)),u("scrollbarDragEnd",l),r.snapOnRelease&&s.slideToClosest())}function S(l){const{scrollbar:r,params:e}=s,a=r.el;if(!a)return;const t=a,n=e.passiveListeners?{passive:!1,capture:!1}:!1,p=e.passiveListeners?{passive:!0,capture:!1}:!1;if(!t)return;const o=l==="on"?"addEventListener":"removeEventListener";t[o]("pointerdown",H,n),g[o]("pointermove",P,n),g[o]("pointerup",$,p)}function M(){!s.params.scrollbar.el||!s.scrollbar.el||S("on")}function O(){!s.params.scrollbar.el||!s.scrollbar.el||S("off")}function h(){const{scrollbar:l,el:r}=s;s.params.scrollbar=A(s,s.originalParams.scrollbar,s.params.scrollbar,{el:"swiper-scrollbar"});const e=s.params.scrollbar;if(!e.el)return;let a;typeof e.el=="string"&&s.isElement&&(a=s.el.querySelector(e.el)),!a&&typeof e.el=="string"?a=g.querySelectorAll(e.el):a||(a=e.el),s.params.uniqueNavElements&&typeof e.el=="string"&&a.length>1&&r.querySelectorAll(e.el).length===1&&(a=r.querySelector(e.el)),a.length>0&&(a=a[0]),a.classList.add(s.isHorizontal()?e.horizontalClass:e.verticalClass);let t;a&&(t=a.querySelector(`.${s.params.scrollbar.dragClass}`),t||(t=I("div",s.params.scrollbar.dragClass),a.append(t))),Object.assign(l,{el:a,dragEl:t}),e.draggable&&M(),a&&a.classList[s.enabled?"remove":"add"](s.params.scrollbar.lockClass)}function z(){const l=s.params.scrollbar,r=s.scrollbar.el;r&&r.classList.remove(s.isHorizontal()?l.horizontalClass:l.verticalClass),O()}f("init",()=>{s.params.scrollbar.enabled===!1?T():(h(),m(),b())}),f("update resize observerUpdate lock unlock",()=>{m()}),f("setTranslate",()=>{b()}),f("setTransition",(l,r)=>{k(r)}),f("enable disable",()=>{const{el:l}=s.scrollbar;l&&l.classList[s.enabled?"remove":"add"](s.params.scrollbar.lockClass)}),f("destroy",()=>{z()});const q=()=>{s.el.classList.remove(s.params.scrollbar.scrollbarDisabledClass),s.scrollbar.el&&s.scrollbar.el.classList.remove(s.params.scrollbar.scrollbarDisabledClass),h(),m(),b()},T=()=>{s.el.classList.add(s.params.scrollbar.scrollbarDisabledClass),s.scrollbar.el&&s.scrollbar.el.classList.add(s.params.scrollbar.scrollbarDisabledClass),z()};Object.assign(s.scrollbar,{enable:q,disable:T,updateSize:m,setTranslate:b,init:h,destroy:z})}export{G as S};
