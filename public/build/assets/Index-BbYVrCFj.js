import"./Scaffold-DWvcdxbt.js";import{P as N,a as j}from"./Panel-B14SxVgH.js";import{Z as P,j as T,i as _,o as p,c as k,w as u,a as e,t as a,b as d,g as S,f as m,e as h,h as x,F as y,k as f,G as R,J as U,A as D,n as b}from"./app-COCv_6FM.js";import{P as L,r as q}from"./Pagination-B7Lk-YHC.js";import{r as z,I as F}from"./Footer-B5OFFhHa.js";import{T as H}from"./Tooltip-D0OChXnj.js";import{S as K}from"./Selector-D_Wz8VRX.js";import{_ as X}from"./TextInput-K5DGNw4r.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as W}from"./ShoppingBagIcon-DdettYi9.js";import{r as J}from"./Bars2Icon-CXJclUCF.js";import{r as Z}from"./MagnifyingGlassIcon-BmWdTLzH.js";import{r as O}from"./CartItemButton-ClgMcctk.js";import{r as Q}from"./Squares2X2Icon-B-hFow5j.js";import"./Alert-eYSKKEf0.js";import"./LoadingIcon-PyLCRR-O.js";import"./ApplicationLogo-DT4XYSyB.js";import"./WrenchScrewdriverIcon-D0loC_t3.js";import"./QuestionMarkCircleIcon-56s_3IWs.js";import"./ChevronRightIcon-B7nF-CoK.js";import"./InputLabel-DWU22C58.js";import"./ChevronUpIcon-BtLkJPMB.js";import"./PlusIcon-RnmXorVm.js";import"./MinusIcon-7FMvIveB.js";const Y={data(){return{errors:{},filteredRepositories:[],repoModal:null,selected:null,selectedParams:null,params:{page:1,search:null,is_from_agency:!0,paginate:this.$page.props.pageItems[0],order_by:null,dir:"DESC"},data:[],pagination:{},toggleSelect:!1,loading:!1,error:null}},directives:{},components:{TextInput:X,Head:P,Link:T,HomeIcon:W,ChevronDownIcon:z,Panel:N,Bars2Icon:J,Image:F,MagnifyingGlassIcon:Z,XMarkIcon:O,Pagination:L,ArrowsUpDownIcon:q,Tooltip:H,Squares2X2Icon:Q,Selector:K,CurrencyDollarIcon:j},mounted(){this.getData(),this.tableWrapper=document.querySelector("table  ").parentElement;for(const t in this.$page.props.agencyRepositories){let o=this.$page.props.agencyRepositories[t].id;this.filteredRepositories[o]=this.$page.props.agencyRepositories.filter(n=>n.id==this.$page.props.agencyRepositories[t].id)[0].repositories.map(n=>({id:n.id,name:`(${n.id}) ${n.name}`}))}},methods:{setTableHeight(){let t=window.innerHeight-this.tableWrapper.offsetTop;this.tableWrapper.style.height=`${t}px`},getData(){this.loading=!0,this.data=[],window.axios.get(route("admin.panel.repository.order.search"),{params:this.params},{}).then(t=>{this.data=t.data.data,this.data.forEach(o=>{o.selected=!1}),delete t.data.data,this.pagination=t.data,this.setTableHeight(),this.$nextTick(()=>{})}).catch(t=>{t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers),this.error=t.response.data?t.response.data.message?t.response.data.message:t.response.data:this.__("response_error")):t.request?(console.log(t.request),this.error=t.request):(console.log("Error",t.message),this.error=t.message),console.log(t.config),this.showToast("danger",this.error)}).finally(()=>{this.loading=!1})},toggleAll(){this.toggleSelect=!this.toggleSelect,this.data.forEach(t=>{t.selected=this.toggleSelect})},edit(t){this.isLoading(!0),this.errors={},window.axios.patch(route("admin.panel.variation.update"),t,{}).then(o=>{o.data&&o.data.message&&this.showToast("success",o.data.message),o.data.status?this.data[t.idx].status=o.data.status:this.getData(),this.selected=null}).catch(o=>{this.error=this.getErrors(o),o.response&&o.response.data&&(this.errors=o.response.data.errors||{},o.response.data.meta&&(this.data[t.idx].meta=o.response.data.meta)),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})},paginationChanged(t){this.params.page=t.page,this.getData()},bulkAction(t){if(this.data.filter(n=>n.selected).length==0){this.showToast("danger",this.__("nothing_selected"));return}this.isLoading(!0);const o={cmnd:t,data:this.data.reduce((n,g)=>(g.selected&&n.push(g.id),n),[])};window.axios.patch(route("admin.panel.variation.update"),o,{}).then(n=>{if(n.data&&n.data.message&&this.showToast("success",n.data.message),n.data&&n.data.results){const g=n.data.results;for(let s in this.data)for(let i in g)if(g[i].id==this.data[s].id){this.data[s].status=g[i].status;break}}}).catch(n=>{this.error=this.getErrors(n),this.showToast("danger",this.error)}).finally(()=>{this.isLoading(!1)})}}},$={class:""},ee={class:"flex items-center justify-between px-4 py-2 text-primary-500 border-b md:py-4"},te={class:"flex"},se={class:"font-semibold"},oe={class:"px-2 md:px-4"},re={class:"flex flex-col overflow-x-aut bg-white shadow-lg rounded-lg"},ae={class:"flex gap-1 flex-wrap items-center justify-start py-4 p-4"},ie={class:"relative mx-1","data-te-dropdown-ref":""},ne={id:"dropdownActionsSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},de=e("span",{class:"sr-only"},"table actions",-1),le={ref:"actionsMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] float-start m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"Actions menu","aria-labelledby":"dropdownActionsSetting"},ce={class:"flex items-center"},pe={class:"relative mx-1","data-te-dropdown-ref":""},_e={id:"dropdownPaginate","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:"inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5"},ge=e("span",{class:"sr-only"},"table actions",-1),he={ref:"userMenu","data-te-dropdown-menu-ref":"",class:"min-w-[12rem] absolute z-[1000] start-0 text-gray-500 m-0 hidden min-w-max list-none overflow-hidden rounded-lg border-none bg-white bg-clip-padding text-start text-base shadow-lg [&[data-te-dropdown-show]]:block",tabindex:"-1",role:"menu","aria-orientation":"vertical","aria-label":"User menu","aria-labelledby":"dropdownPaginate"},ue={class:""},me=["onClick"],xe=e("hr",{class:"border-gray-200"},null,-1),ye={class:"relative"},fe=e("label",{for:"table-search",class:"sr-only"},"Search",-1),be={class:"absolute inset-y-0 cursor-pointer text-gray-500 hover:text-gray-700 start-0 flex items-center px-3"},ve=["placeholder"],we={class:"flex-grow w-full"},Ce={class:"w-full overflow-x-auto md:rounded-lg"},ke={ref:"tableRef ",class:"table-auto text-sm text-gray-500"},Se={class:"sticky top-0 shadow-md text-xs text-gray-700 bg-gray-50"},De={class:"text-sm text-center"},Ae={class:"flex items-center"},Ie=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),Be={class:"flex items-center justify-center"},Ve={class:"px-0"},Ee={class:"flex items-center justify-center"},Me={class:"px-2"},Ne={class:"flex items-center justify-center"},je={class:"px-2"},Pe={class:"flex items-center justify-center"},Te={class:"px-2"},Re={class:"flex items-center justify-center"},Ue={class:"px-2"},Le={class:"flex items-center justify-center"},qe={class:"px-2"},ze={class:"flex items-center justify-center"},Fe={class:"px-2"},He={class:"flex items-center justify-center"},Ke={class:"px-2"},Xe={class:"flex items-center justify-center"},Ge={class:"px-2"},We={class:"flex items-center justify-center"},Je={class:"px-2"},Ze={class:"flex items-center justify-center"},Oe={class:"px-2"},Qe={scope:"col",class:"px-2 py-3"},Ye={class:"overflow-y-scroll text-xs"},$e={class:"animate-pulse bg-white text-center border-b hover:bg-gray-50"},et=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})])],-1),tt=e("td",{class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},[e("div",{class:"w-10 h-10 rounded-full"}),e("div",{class:"px-3"},[e("div",{class:"text-base bg-gray-200 px-5 py-2 rounded-lg"}),e("div",{class:"font-normal text-gray-500"})])],-1),st=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),ot=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),rt=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),at=e("td",{class:"px-2 py-4"},[e("div",{class:"justify-center bg-gray-200 px-5 py-3 rounded-lg items-center text-center rounded-md"})],-1),it=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-2 rounded-lg"})],-1),nt=e("td",{class:"px-2 py-4"},[e("div",{class:"bg-gray-200 px-5 py-4 rounded-lg rounded-md",role:"group"})],-1),dt=[et,tt,st,ot,rt,at,it,nt],lt=["onClick"],ct={class:"flex items-center"},pt=["onUpdate:modelValue"],_t={class:"px-2 py-4"},gt={class:"px-2 py-4"},ht={class:"px-2 py-4"},ut={class:"px-2 py-4"},mt={class:"px-2 py-4 text-xs"};const xt={class:"px-2 py-4"},yt={class:"inline-flex rounded-md shadow-sm transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]",role:"group"};function ft(t,o,n,g,s,i){const A=_("Bars2Icon"),v=_("Link"),w=_("ChevronDownIcon"),I=_("Pagination"),B=_("MagnifyingGlassIcon"),V=_("XMarkIcon"),c=_("ArrowsUpDownIcon"),E=_("Panel");return p(),k(E,null,{header:u(()=>[e("title",null,a(t.__("orders_list")),1)]),content:u(()=>[e("div",$,[e("div",ee,[e("div",te,[d(A,{class:"h-7 w-7 mx-3"}),e("h5",se,a(t.__("orders_list")),1)]),e("div",null,[t.hasAccess("create_order")?(p(),k(v,{key:0,href:t.route("admin.panel.repository.order.create"),class:"inline-flex items-center justify-center px-4 py-2 bg-green-500 border border-transparent rounded-md font-semibold transition-all duration-500 text-white hover:bg-green-600 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[S(a(t.__("new_order")),1)]),_:1},8,["href"])):m("",!0)])]),e("div",oe,[e("div",re,[e("div",ae,[e("div",null,[e("div",ie,[e("button",ne,[de,e("span",null,a(t.__("bulk_actions")),1),d(w,{class:"h-4 w-4 mx-1"})]),e("div",le,null,512)])]),e("div",ce,[e("div",pe,[e("button",_e,[ge,e("span",null,a(s.params.paginate),1),d(w,{class:"h-4 w-4 mx-1"})]),e("div",he,[(p(!0),h(y,null,x(t.$page.props.pageItems,r=>(p(),h("div",ue,[e("div",{onClick:C=>{s.params.paginate=r,i.getData()},role:"menuitem",class:"cursor-pointer select-none block p-2 px-6 text-sm transition-colors hover:bg-gray-100"},a(r),9,me),xe]))),256))],512)]),d(I,{onPaginationChanged:i.paginationChanged,pagination:s.pagination},null,8,["onPaginationChanged","pagination"])]),e("div",ye,[fe,e("div",be,[d(B,{onClick:o[0]||(o[0]=r=>i.getData()),class:"w-4 h-4"})]),e("div",{class:"absolute inset-y-0 end-0 text-gray-500 flex items-center px-3 cursor-pointer hover:text-gray-700",onClick:o[1]||(o[1]=r=>{s.params.search=null,i.getData()})},[d(V,{class:"w-4 h-4"})]),f(e("input",{type:"text",id:"table-search-users","onUpdate:modelValue":o[2]||(o[2]=r=>s.params.search=r),onKeydown:o[3]||(o[3]=U(r=>i.getData(),["enter"])),class:"w-fit p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:t.__("search")},null,40,ve),[[R,s.params.search]])])]),e("div",we,[e("div",Ce,[e("table",ke,[e("thead",Se,[e("tr",De,[e("th",{scope:"col",class:"p-4",onClick:o[5]||(o[5]=(...r)=>i.toggleAll&&i.toggleAll(...r))},[e("div",Ae,[f(e("input",{id:"checkbox-all-search",type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=r=>s.toggleSelect=r),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[D,s.toggleSelect]]),Ie])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[6]||(o[6]=r=>{s.params.order_by="id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Be,[e("span",Ve,a(t.__("id")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[7]||(o[7]=r=>{s.params.order_by="from_repo_id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Ee,[e("span",Me,a(t.__("origin_repository")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[8]||(o[8]=r=>{s.params.order_by="id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Ne,[e("span",je,a(t.__("items")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[9]||(o[9]=r=>{s.params.order_by="to_repo_id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Pe,[e("span",Te,a(t.__("destination_repository")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[10]||(o[10]=r=>{s.params.order_by="from_fullname",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Re,[e("span",Ue,a(t.__("sender")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[11]||(o[11]=r=>{s.params.order_by="from_county_id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Le,[e("span",qe,a(t.__("county")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[12]||(o[12]=r=>{s.params.order_by="district_id",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",ze,[e("span",Fe,a(t.__("city")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[13]||(o[13]=r=>{s.params.order_by="total_discount",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",He,[e("span",Ke,a(t.__("discount")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[14]||(o[14]=r=>{s.params.order_by="total_price",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Xe,[e("span",Ge,a(t.__("total_price")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[15]||(o[15]=r=>{s.params.order_by="created_at",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",We,[e("span",Je,a(t.__("created_at")),1),d(c,{class:"w-4 h-4"})])]),e("th",{scope:"col",class:"px-2 py-3 cursor-pointer duration-300 hover:text-gray-500 hover:scale-[99%]",onClick:o[16]||(o[16]=r=>{s.params.order_by="status",s.params.dir=s.params.dir=="ASC"?"DESC":"ASC",s.params.page=1,i.getData()})},[e("div",Ze,[e("span",Oe,a(t.__("status")),1),d(c,{class:"w-4 h-4"})])]),e("th",Qe,a(t.__("actions")),1)])]),e("tbody",Ye,[s.loading?(p(),h(y,{key:0},x(3,r=>e("tr",$e,dt)),64)):m("",!0),(p(!0),h(y,null,x(s.data,(r,C)=>(p(),h("tr",{class:b(["text-center border-b hover:bg-gray-50",C%2==1?"bg-gray-50":"bg-white"])},[e("td",{class:"w-4 p-4",onClick:l=>r.selected=!r.selected},[e("div",ct,[f(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":l=>r.selected=l,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,pt),[[D,r.selected]])])],8,lt),e("td",_t,a(r.id),1),e("td",gt,a(r.from_repo_id),1),e("td",ht,[(p(!0),h(y,null,x(r.items,(l,M)=>(p(),h("div",{class:b(["text-xs",{"border-b":M+1<r.items.length}])},a(`${l.name} ( ${parseFloat(l.qty)} ${t.getPack(l.variation.pack_id)}  ${parseFloat(l.variation.weight)} ${t.__("kg")})`),3))),256))]),e("td",ut,a(r.to_repo_id),1),e("td",mt,a(`${r.from_fullname||""}
${r.from_phone||""}`),1),e("td",null,a(t.getCityName(r.from_county_id)),1),e("td",null,a(t.getCityName(r.from_district_id)),1),e("td",null,a(t.asPrice(r.total_discount)),1),e("td",null,a(t.asPrice(r.total_price)),1),e("td",null,a(t.toShamsi(r.created_at,!0)),1),e("td",null,[e("button",{id:"dropdownStatusSetting","data-te-dropdown-toggle-ref":"","aria-expanded":"false","data-te-ripple-init":"","data-te-ripple-color":"light",class:b(["min-w-[5rem] px-1 cursor-pointer items-center text-center rounded-md py-[.2rem]",`bg-${t.getStatus("order_statuses",r.status).color}-100 hover:bg-${t.getStatus("order_statuses",r.status).color}-200 text-${t.getStatus("order_statuses",r.status).color}-500`])},a(t.getStatus("order_statuses",r.status).name),3)]),m("",!0),m("",!0),e("td",xt,[e("div",yt,[d(v,{type:"button",href:t.route("admin.panel.repository.order.edit",r.id),class:"inline-block rounded bg-blue-500 text-white px-6 py-2 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-blue-400 focus:outline-none focus:ring-0","data-te-ripple-init":"","data-te-ripple-color":"light"},{default:u(()=>[S(a(t.__("details")),1)]),_:2},1032,["href"])])])],2))),256))])],512)])])])])])]),_:1})}const Gt=G(Y,[["render",ft]]);export{Gt as default};
